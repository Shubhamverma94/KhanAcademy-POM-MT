"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("../logger.js"));
var _helpers = require("../helpers.js");
var _path = _interopRequireDefault(require("path"));
var _lodash = _interopRequireDefault(require("lodash"));
var _support = require("@appium/support");
var _os = require("os");
var _logcat = _interopRequireDefault(require("../logcat"));
var _asyncbox = require("asyncbox");
var _teen_process = require("teen_process");
var _bluebird = _interopRequireDefault(require("bluebird"));
const MAX_SHELL_BUFFER_LENGTH = 1000;
const NOT_CHANGEABLE_PERM_ERROR = /not a changeable permission type/i;
const IGNORED_PERM_ERRORS = [NOT_CHANGEABLE_PERM_ERROR, /Unknown permission/i];
const MAX_PGREP_PATTERN_LEN = 15;
const HIDDEN_API_POLICY_KEYS = ['hidden_api_policy_pre_p_apps', 'hidden_api_policy_p_apps', 'hidden_api_policy'];
const PID_COLUMN_TITLE = 'PID';
const PROCESS_NAME_COLUMN_TITLE = 'NAME';
const PS_TITLE_PATTERN = new RegExp(`^(.*\\b${PID_COLUMN_TITLE}\\b.*\\b${PROCESS_NAME_COLUMN_TITLE}\\b.*)$`, 'm');
const MIN_API_LEVEL_WITH_PERMS_SUPPORT = 23;
const methods = {};
methods.shellChunks = async function shellChunks(argTransformer, args) {
  const commands = [];
  let cmdChunk = [];
  for (const arg of args) {
    const nextCmd = argTransformer(arg);
    if (!_lodash.default.isArray(nextCmd)) {
      throw new Error('Argument transformer must result in an array');
    }
    if (_lodash.default.last(nextCmd) !== ';') {
      nextCmd.push(';');
    }
    if (nextCmd.join(' ').length + cmdChunk.join(' ').length >= MAX_SHELL_BUFFER_LENGTH) {
      commands.push(cmdChunk);
      cmdChunk = [];
    }
    cmdChunk = [...cmdChunk, ...nextCmd];
  }
  if (!_lodash.default.isEmpty(cmdChunk)) {
    commands.push(cmdChunk);
  }
  _logger.default.debug(`Got the following command chunks to execute: ${JSON.stringify(commands)}`);
  let lastError = null;
  for (const cmd of commands) {
    try {
      await this.shell(cmd);
    } catch (e) {
      lastError = e;
    }
  }
  if (lastError) {
    throw lastError;
  }
};
methods.getAdbWithCorrectAdbPath = async function getAdbWithCorrectAdbPath() {
  this.executable.path = await this.getSdkBinaryPath('adb');
  return this.adb;
};
methods.initAapt = async function initAapt() {
  await this.getSdkBinaryPath('aapt');
};
methods.initAapt2 = async function initAapt2() {
  await this.getSdkBinaryPath('aapt2');
};
methods.initZipAlign = async function initZipAlign() {
  await this.getSdkBinaryPath('zipalign');
};
methods.initBundletool = async function initBundletool() {
  try {
    this.binaries.bundletool = await _support.fs.which('bundletool.jar');
  } catch (err) {
    throw new Error('bundletool.jar binary is expected to be present in PATH. ' + 'Visit https://github.com/google/bundletool for more details.');
  }
};
methods.getApiLevel = async function getApiLevel() {
  if (!_lodash.default.isInteger(this._apiLevel)) {
    try {
      const strOutput = await this.getDeviceProperty('ro.build.version.sdk');
      let apiLevel = parseInt(strOutput.trim(), 10);
      const charCodeQ = 'q'.charCodeAt(0);
      const apiLevelDiff = apiLevel - 28;
      const codename = String.fromCharCode(charCodeQ + apiLevelDiff);
      if (apiLevelDiff >= 0 && (await this.getPlatformVersion()).toLowerCase() === codename) {
        _logger.default.debug(`Release version is ${codename.toUpperCase()} but found API Level ${apiLevel}. Setting API Level to ${apiLevel + 1}`);
        apiLevel++;
      }
      this._apiLevel = apiLevel;
      _logger.default.debug(`Device API level: ${this._apiLevel}`);
      if (isNaN(this._apiLevel)) {
        throw new Error(`The actual output '${strOutput}' cannot be converted to an integer`);
      }
    } catch (e) {
      throw new Error(`Error getting device API level. Original error: ${e.message}`);
    }
  }
  return this._apiLevel;
};
methods.getPlatformVersion = async function getPlatformVersion() {
  _logger.default.info('Getting device platform version');
  try {
    return await this.getDeviceProperty('ro.build.version.release');
  } catch (e) {
    throw new Error(`Error getting device platform version. Original error: ${e.message}`);
  }
};
methods.isDeviceConnected = async function isDeviceConnected() {
  let devices = await this.getConnectedDevices();
  return devices.length > 0;
};
methods.mkdir = async function mkdir(remotePath) {
  return await this.shell(['mkdir', '-p', remotePath]);
};
methods.isValidClass = function isValidClass(classString) {
  return (0, _helpers.matchComponentName)(classString);
};
methods.resolveLaunchableActivity = async function resolveLaunchableActivity(pkg, opts = {}) {
  const {
    preferCmd = true
  } = opts;
  if (!preferCmd || (await this.getApiLevel()) < 24) {
    const stdout = await this.shell(['dumpsys', 'package', pkg]);
    const names = (0, _helpers.parseLaunchableActivityNames)(stdout);
    if (_lodash.default.isEmpty(names)) {
      _logger.default.debug(stdout);
      throw new Error(`Unable to resolve the launchable activity of '${pkg}'. Is it installed on the device?`);
    }
    if (names.length === 1) {
      return names[0];
    }
    const tmpRoot = await _support.tempDir.openDir();
    try {
      const tmpApp = await this.pullApk(pkg, tmpRoot);
      const {
        apkActivity
      } = await this.packageAndLaunchActivityFromManifest(tmpApp);
      return apkActivity;
    } catch (e) {
      _logger.default.debug(e.stack);
      _logger.default.warn(`Unable to resolve the launchable activity of '${pkg}'. ` + `The very first match of the dumpsys output is going to be used. ` + `Original error: ${e.message}`);
      return names[0];
    } finally {
      await _support.fs.rimraf(tmpRoot);
    }
  }
  const {
    stdout,
    stderr
  } = await this.shell(['cmd', 'package', 'resolve-activity', '--brief', pkg], {
    outputFormat: this.EXEC_OUTPUT_FORMAT.FULL
  });
  for (const line of (stdout || '').split('\n').map(_lodash.default.trim)) {
    if (this.isValidClass(line)) {
      return line;
    }
  }
  throw new Error(`Unable to resolve the launchable activity of '${pkg}'. Original error: ${stderr || stdout}`);
};
methods.forceStop = async function forceStop(pkg) {
  return await this.shell(['am', 'force-stop', pkg]);
};
methods.killPackage = async function killPackage(pkg) {
  return await this.shell(['am', 'kill', pkg]);
};
methods.clear = async function clear(pkg) {
  return await this.shell(['pm', 'clear', pkg]);
};
methods.grantAllPermissions = async function grantAllPermissions(pkg, apk) {
  const apiLevel = await this.getApiLevel();
  let targetSdk = 0;
  let dumpsysOutput = null;
  try {
    if (!apk) {
      dumpsysOutput = await this.shell(['dumpsys', 'package', pkg]);
      targetSdk = await this.targetSdkVersionUsingPKG(pkg, dumpsysOutput);
    } else {
      targetSdk = await this.targetSdkVersionFromManifest(apk);
    }
  } catch (e) {
    _logger.default.warn(`Ran into problem getting target SDK version; ignoring...`);
  }
  if (apiLevel >= MIN_API_LEVEL_WITH_PERMS_SUPPORT && targetSdk >= MIN_API_LEVEL_WITH_PERMS_SUPPORT) {
    dumpsysOutput = dumpsysOutput || (await this.shell(['dumpsys', 'package', pkg]));
    const requestedPermissions = await this.getReqPermissions(pkg, dumpsysOutput);
    const grantedPermissions = await this.getGrantedPermissions(pkg, dumpsysOutput);
    const permissionsToGrant = _lodash.default.difference(requestedPermissions, grantedPermissions);
    if (_lodash.default.isEmpty(permissionsToGrant)) {
      _logger.default.info(`${pkg} contains no permissions available for granting`);
    } else {
      await this.grantPermissions(pkg, permissionsToGrant);
    }
  } else if (targetSdk < MIN_API_LEVEL_WITH_PERMS_SUPPORT) {
    _logger.default.info(`It is only possible to grant permissions in runtime for ` + `apps whose targetSdkVersion in the manifest is set to ${MIN_API_LEVEL_WITH_PERMS_SUPPORT} or above. ` + `The current ${pkg} targetSdkVersion is ${targetSdk || 'unset'}.`);
  } else if (apiLevel < MIN_API_LEVEL_WITH_PERMS_SUPPORT) {
    _logger.default.info(`The device's OS API level is ${apiLevel}. ` + `It is only possible to grant permissions on devices running Android 6 or above.`);
  }
};
methods.grantPermissions = async function grantPermissions(pkg, permissions) {
  _logger.default.debug(`Granting permissions ${JSON.stringify(permissions)} to '${pkg}'`);
  try {
    await this.shellChunks(perm => ['pm', 'grant', pkg, perm], permissions);
  } catch (e) {
    if (!IGNORED_PERM_ERRORS.some(pattern => pattern.test(e.stderr || e.message))) {
      throw e;
    }
  }
};
methods.grantPermission = async function grantPermission(pkg, permission) {
  try {
    await this.shell(['pm', 'grant', pkg, permission]);
  } catch (e) {
    if (!NOT_CHANGEABLE_PERM_ERROR.test(e.stderr || e.message)) {
      throw e;
    }
  }
};
methods.revokePermission = async function revokePermission(pkg, permission) {
  try {
    await this.shell(['pm', 'revoke', pkg, permission]);
  } catch (e) {
    if (!NOT_CHANGEABLE_PERM_ERROR.test(e.stderr || e.message)) {
      throw e;
    }
  }
};
methods.getGrantedPermissions = async function getGrantedPermissions(pkg, cmdOutput = null) {
  _logger.default.debug('Retrieving granted permissions');
  const stdout = cmdOutput || (await this.shell(['dumpsys', 'package', pkg]));
  return (0, _helpers.extractMatchingPermissions)(stdout, ['install', 'runtime'], true);
};
methods.getDeniedPermissions = async function getDeniedPermissions(pkg, cmdOutput = null) {
  _logger.default.debug('Retrieving denied permissions');
  const stdout = cmdOutput || (await this.shell(['dumpsys', 'package', pkg]));
  return (0, _helpers.extractMatchingPermissions)(stdout, ['install', 'runtime'], false);
};
methods.getReqPermissions = async function getReqPermissions(pkg, cmdOutput = null) {
  _logger.default.debug('Retrieving requested permissions');
  const stdout = cmdOutput || (await this.shell(['dumpsys', 'package', pkg]));
  return (0, _helpers.extractMatchingPermissions)(stdout, ['requested']);
};
methods.getLocationProviders = async function getLocationProviders() {
  if ((await this.getApiLevel()) < 31) {
    const stdout = await this.getSetting('secure', 'location_providers_allowed');
    return stdout.trim().split(',').map(p => p.trim()).filter(Boolean);
  }
  return _lodash.default.includes(await this.shell(['cmd', 'location', 'is-location-enabled']), 'true') ? ['gps'] : [];
};
methods.toggleGPSLocationProvider = async function toggleGPSLocationProvider(enabled) {
  if ((await this.getApiLevel()) < 31) {
    await this.setSetting('secure', 'location_providers_allowed', `${enabled ? '+' : '-'}gps`);
    return;
  }
  await this.shell(['cmd', 'location', 'set-location-enabled', enabled ? 'true' : 'false']);
};
methods.setHiddenApiPolicy = async function setHiddenApiPolicy(value, ignoreError = false) {
  try {
    await this.shell(HIDDEN_API_POLICY_KEYS.map(k => `settings put global ${k} ${value}`).join(';'));
  } catch (e) {
    if (!ignoreError) {
      throw e;
    }
    _logger.default.info(`Failed to set setting keys '${HIDDEN_API_POLICY_KEYS}' to '${value}'. Original error: ${e.message}`);
  }
};
methods.setDefaultHiddenApiPolicy = async function setDefaultHiddenApiPolicy(ignoreError = false) {
  try {
    await this.shell(HIDDEN_API_POLICY_KEYS.map(k => `settings delete global ${k}`).join(';'));
  } catch (e) {
    if (!ignoreError) {
      throw e;
    }
    _logger.default.info(`Failed to delete keys '${HIDDEN_API_POLICY_KEYS}'. Original error: ${e.message}`);
  }
};
methods.stopAndClear = async function stopAndClear(pkg) {
  try {
    await this.forceStop(pkg);
    await this.clear(pkg);
  } catch (e) {
    throw new Error(`Cannot stop and clear ${pkg}. Original error: ${e.message}`);
  }
};
methods.availableIMEs = async function availableIMEs() {
  try {
    return (0, _helpers.getIMEListFromOutput)(await this.shell(['ime', 'list', '-a']));
  } catch (e) {
    throw new Error(`Error getting available IME's. Original error: ${e.message}`);
  }
};
methods.enabledIMEs = async function enabledIMEs() {
  try {
    return (0, _helpers.getIMEListFromOutput)(await this.shell(['ime', 'list']));
  } catch (e) {
    throw new Error(`Error getting enabled IME's. Original error: ${e.message}`);
  }
};
methods.enableIME = async function enableIME(imeId) {
  await this.shell(['ime', 'enable', imeId]);
};
methods.disableIME = async function disableIME(imeId) {
  await this.shell(['ime', 'disable', imeId]);
};
methods.setIME = async function setIME(imeId) {
  await this.shell(['ime', 'set', imeId]);
};
methods.defaultIME = async function defaultIME() {
  try {
    let engine = await this.getSetting('secure', 'default_input_method');
    if (engine === 'null') {
      return null;
    }
    return engine.trim();
  } catch (e) {
    throw new Error(`Error getting default IME. Original error: ${e.message}`);
  }
};
methods.keyevent = async function keyevent(keycode) {
  let code = parseInt(keycode, 10);
  await this.shell(['input', 'keyevent', code]);
};
methods.inputText = async function inputText(text) {
  if (text === '') {
    return;
  }
  const originalStr = `${text}`;
  const escapedText = originalStr.replace(/\$/g, '\\$').replace(/ /g, '%s');
  let args = ['input', 'text', originalStr];
  const adbInputEscapePattern = /[()<>|;&*\\~^"']/g;
  if (escapedText !== originalStr || adbInputEscapePattern.test(originalStr)) {
    if (_lodash.default.every(['"', `'`], c => originalStr.includes(c))) {
      throw new Error(`Did not know how to escape a string that contains both types of quotes (" and ')`);
    }
    const q = originalStr.includes('"') ? `'` : '"';
    args = [`input text ${q}${escapedText}${q}`];
  }
  await this.shell(args);
};
methods.clearTextField = async function clearTextField(length = 100) {
  _logger.default.debug(`Clearing up to ${length} characters`);
  if (length === 0) {
    return;
  }
  let args = ['input', 'keyevent'];
  for (let i = 0; i < length; i++) {
    args.push('67', '112');
  }
  await this.shell(args);
};
methods.lock = async function lock() {
  if (await this.isScreenLocked()) {
    _logger.default.debug('Screen is already locked. Doing nothing.');
    return;
  }
  _logger.default.debug('Pressing the KEYCODE_POWER button to lock screen');
  await this.keyevent(26);
  const timeoutMs = 5000;
  try {
    await (0, _asyncbox.waitForCondition)(async () => await this.isScreenLocked(), {
      waitMs: timeoutMs,
      intervalMs: 500
    });
  } catch (e) {
    throw new Error(`The device screen is still locked after ${timeoutMs}ms timeout`);
  }
};
methods.back = async function back() {
  _logger.default.debug('Pressing the BACK button');
  await this.keyevent(4);
};
methods.goToHome = async function goToHome() {
  _logger.default.debug('Pressing the HOME button');
  await this.keyevent(3);
};
methods.getAdbPath = function getAdbPath() {
  return this.executable.path;
};
methods.getScreenOrientation = async function getScreenOrientation() {
  let stdout = await this.shell(['dumpsys', 'input']);
  return (0, _helpers.getSurfaceOrientation)(stdout);
};
methods.sendTelnetCommand = async function sendTelnetCommand(command) {
  return await this.execEmuConsoleCommand(command, {
    port: await this.getEmulatorPort()
  });
};
methods.isAirplaneModeOn = async function isAirplaneModeOn() {
  const stdout = await this.getSetting('global', 'airplane_mode_on');
  return parseInt(stdout, 10) !== 0;
};
methods.setAirplaneMode = async function setAirplaneMode(on) {
  if ((await this.getApiLevel()) < 30) {
    await this.setSetting('global', 'airplane_mode_on', on ? 1 : 0);
    return;
  }
  await this.shell(['cmd', 'connectivity', 'airplane-mode', on ? 'enable' : 'disable']);
};
methods.broadcastAirplaneMode = async function broadcastAirplaneMode(on) {
  const args = ['am', 'broadcast', '-a', 'android.intent.action.AIRPLANE_MODE', '--ez', 'state', on ? 'true' : 'false'];
  try {
    await this.shell(args);
  } catch (e) {
    if (_lodash.default.includes(e.stderr, 'SecurityException')) {
      try {
        await this.shell(args, {
          privileged: true
        });
        return;
      } catch (ign) {}
    }
    throw e;
  }
};
methods.isWifiOn = async function isWifiOn() {
  const stdout = await this.getSetting('global', 'wifi_on');
  return parseInt(stdout, 10) !== 0;
};
methods.isDataOn = async function isDataOn() {
  const stdout = await this.getSetting('global', 'mobile_data');
  return parseInt(stdout, 10) !== 0;
};
methods.setWifiAndData = async function setWifiAndData({
  wifi,
  data
}, isEmulator = false) {
  if (_support.util.hasValue(wifi)) {
    await this.setWifiState(wifi, isEmulator);
  }
  if (_support.util.hasValue(data)) {
    await this.setDataState(data, isEmulator);
  }
};
methods.isAnimationOn = async function isAnimationOn() {
  let animator_duration_scale = await this.getSetting('global', 'animator_duration_scale');
  let transition_animation_scale = await this.getSetting('global', 'transition_animation_scale');
  let window_animation_scale = await this.getSetting('global', 'window_animation_scale');
  return _lodash.default.some([animator_duration_scale, transition_animation_scale, window_animation_scale], setting => setting !== '0.0');
};
methods.rimraf = async function rimraf(path) {
  await this.shell(['rm', '-rf', path]);
};
methods.push = async function push(localPath, remotePath, opts) {
  await this.mkdir(_path.default.posix.dirname(remotePath));
  await this.adbExec(['push', localPath, remotePath], opts);
};
methods.pull = async function pull(remotePath, localPath, opts = {}) {
  await this.adbExec(['pull', remotePath, localPath], {
    ...opts,
    timeout: opts.timeout ?? 60000
  });
};
methods.processExists = async function processExists(processName) {
  return !_lodash.default.isEmpty(await this.getPIDsByName(processName));
};
methods.getForwardList = async function getForwardList() {
  _logger.default.debug(`List forwarding ports`);
  const connections = await this.adbExec(['forward', '--list']);
  return connections.split(_os.EOL).filter(line => Boolean(line.trim()));
};
methods.forwardPort = async function forwardPort(systemPort, devicePort) {
  _logger.default.debug(`Forwarding system: ${systemPort} to device: ${devicePort}`);
  await this.adbExec(['forward', `tcp:${systemPort}`, `tcp:${devicePort}`]);
};
methods.removePortForward = async function removePortForward(systemPort) {
  _logger.default.debug(`Removing forwarded port socket connection: ${systemPort} `);
  await this.adbExec(['forward', `--remove`, `tcp:${systemPort}`]);
};
methods.getReverseList = async function getReverseList() {
  _logger.default.debug(`List reverse forwarding ports`);
  const connections = await this.adbExec(['reverse', '--list']);
  return connections.split(_os.EOL).filter(line => Boolean(line.trim()));
};
methods.reversePort = async function reversePort(devicePort, systemPort) {
  _logger.default.debug(`Forwarding device: ${devicePort} to system: ${systemPort}`);
  await this.adbExec(['reverse', `tcp:${devicePort}`, `tcp:${systemPort}`]);
};
methods.removePortReverse = async function removePortReverse(devicePort) {
  _logger.default.debug(`Removing reverse forwarded port socket connection: ${devicePort} `);
  await this.adbExec(['reverse', `--remove`, `tcp:${devicePort}`]);
};
methods.forwardAbstractPort = async function forwardAbstractPort(systemPort, devicePort) {
  _logger.default.debug(`Forwarding system: ${systemPort} to abstract device: ${devicePort}`);
  await this.adbExec(['forward', `tcp:${systemPort}`, `localabstract:${devicePort}`]);
};
methods.ping = async function ping() {
  let stdout = await this.shell(['echo', 'ping']);
  if (stdout.indexOf('ping') === 0) {
    return true;
  }
  throw new Error(`ADB ping failed, returned ${stdout}`);
};
methods.restart = async function restart() {
  try {
    await this.stopLogcat();
    await this.restartAdb();
    await this.waitForDevice(60);
    await this.startLogcat(this._logcatStartupParams);
  } catch (e) {
    throw new Error(`Restart failed. Original error: ${e.message}`);
  }
};
methods.startLogcat = async function startLogcat(opts = {}) {
  if (!_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Trying to start logcat capture but it's already started!");
  }
  this.logcat = new _logcat.default({
    adb: this.executable,
    debug: false,
    debugTrace: false,
    clearDeviceLogsOnStart: !!this.clearDeviceLogsOnStart
  });
  await this.logcat.startCapture(opts);
  this._logcatStartupParams = opts;
};
methods.stopLogcat = async function stopLogcat() {
  if (_lodash.default.isEmpty(this.logcat)) {
    return;
  }
  try {
    await this.logcat.stopCapture();
  } finally {
    this.logcat = null;
  }
};
methods.getLogcatLogs = function getLogcatLogs() {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Can't get logcat logs since logcat hasn't started");
  }
  return this.logcat.getLogs();
};
methods.setLogcatListener = function setLogcatListener(listener) {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Logcat process hasn't been started");
  }
  this.logcat.on('output', listener);
};
methods.removeLogcatListener = function removeLogcatListener(listener) {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Logcat process hasn't been started");
  }
  this.logcat.removeListener('output', listener);
};
methods.listProcessStatus = async function listProcessStatus() {
  if (!_lodash.default.isBoolean(this._doesPsSupportAOption)) {
    try {
      this._doesPsSupportAOption = /^-A\b/m.test(await this.shell(['ps', '--help']));
    } catch (e) {
      _logger.default.debug(e.stack);
      this._doesPsSupportAOption = false;
    }
  }
  return await this.shell(this._doesPsSupportAOption ? ['ps', '-A'] : ['ps']);
};
methods.getNameByPid = async function getNameByPid(pid) {
  if (isNaN(pid)) {
    throw new Error(`The PID value must be a valid number. '${pid}' is given instead`);
  }
  pid = parseInt(pid, 10);
  const stdout = await this.listProcessStatus();
  const titleMatch = PS_TITLE_PATTERN.exec(stdout);
  if (!titleMatch) {
    _logger.default.debug(stdout);
    throw new Error(`Could not get the process name for PID '${pid}'`);
  }
  const allTitles = titleMatch[1].trim().split(/\s+/);
  const pidIndex = allTitles.indexOf(PID_COLUMN_TITLE);
  const nameOffset = allTitles.indexOf(PROCESS_NAME_COLUMN_TITLE) - allTitles.length;
  const pidRegex = new RegExp(`^(.*\\b${pid}\\b.*)$`, 'gm');
  let matchedLine;
  while (matchedLine = pidRegex.exec(stdout)) {
    const items = matchedLine[1].trim().split(/\s+/);
    if (parseInt(items[pidIndex], 10) === pid && items[items.length + nameOffset]) {
      return items[items.length + nameOffset];
    }
  }
  _logger.default.debug(stdout);
  throw new Error(`Could not get the process name for PID '${pid}'`);
};
methods.getPIDsByName = async function getPIDsByName(name) {
  _logger.default.debug(`Getting IDs of all '${name}' processes`);
  if (!this.isValidClass(name)) {
    throw new Error(`Invalid process name: '${name}'`);
  }
  if ((await this.getApiLevel()) >= 23) {
    if (!_lodash.default.isBoolean(this._isPgrepAvailable)) {
      const pgrepOutput = _lodash.default.trim(await this.shell(['pgrep --help; echo $?']));
      this._isPgrepAvailable = parseInt(_lodash.default.last(pgrepOutput.split(/\s+/)), 10) === 0;
      if (this._isPgrepAvailable) {
        this._canPgrepUseFullCmdLineSearch = /^-f\b/m.test(pgrepOutput);
      } else {
        this._isPidofAvailable = parseInt(await this.shell(['pidof --help > /dev/null; echo $?']), 10) === 0;
      }
    }
    if (this._isPgrepAvailable || this._isPidofAvailable) {
      const shellCommand = this._isPgrepAvailable ? this._canPgrepUseFullCmdLineSearch ? ['pgrep', '-f', _lodash.default.escapeRegExp(`([[:blank:]]|^)${name}([[:blank:]]|$)`)] : [`pgrep ^${_lodash.default.escapeRegExp(name.slice(-MAX_PGREP_PATTERN_LEN))}$ ` + `|| pgrep ^${_lodash.default.escapeRegExp(name.slice(0, MAX_PGREP_PATTERN_LEN))}$`] : ['pidof', name];
      try {
        return (await this.shell(shellCommand)).split(/\s+/).map(x => parseInt(x, 10)).filter(x => _lodash.default.isInteger(x));
      } catch (e) {
        if (e.code !== 1) {
          throw new Error(`Could not extract process ID of '${name}': ${e.message}`);
        }
        if (_lodash.default.includes(e.stderr || e.stdout, 'syntax error')) {
          _logger.default.warn(`Got an unexpected response from the shell interpreter: ${e.stderr || e.stdout}`);
        } else {
          return [];
        }
      }
    }
  }
  _logger.default.debug('Using ps-based PID detection');
  const stdout = await this.listProcessStatus();
  const titleMatch = PS_TITLE_PATTERN.exec(stdout);
  if (!titleMatch) {
    _logger.default.debug(stdout);
    throw new Error(`Could not extract PID of '${name}' from ps output`);
  }
  const allTitles = titleMatch[1].trim().split(/\s+/);
  const pidIndex = allTitles.indexOf(PID_COLUMN_TITLE);
  const pids = [];
  const processNameRegex = new RegExp(`^(.*\\b\\d+\\b.*\\b${_lodash.default.escapeRegExp(name)}\\b.*)$`, 'gm');
  let matchedLine;
  while (matchedLine = processNameRegex.exec(stdout)) {
    const items = matchedLine[1].trim().split(/\s+/);
    if (pidIndex >= allTitles.length || isNaN(items[pidIndex])) {
      _logger.default.debug(stdout);
      throw new Error(`Could not extract PID of '${name}' from '${matchedLine[1].trim()}'`);
    }
    pids.push(parseInt(items[pidIndex], 10));
  }
  return pids;
};
methods.killProcessesByName = async function killProcessesByName(name) {
  try {
    _logger.default.debug(`Attempting to kill all ${name} processes`);
    const pids = await this.getPIDsByName(name);
    if (_lodash.default.isEmpty(pids)) {
      _logger.default.info(`No '${name}' process has been found`);
    } else {
      await _bluebird.default.all(pids.map(p => this.killProcessByPID(p)));
    }
  } catch (e) {
    throw new Error(`Unable to kill ${name} processes. Original error: ${e.message}`);
  }
};
methods.killProcessByPID = async function killProcessByPID(pid) {
  _logger.default.debug(`Attempting to kill process ${pid}`);
  const noProcessFlag = 'No such process';
  try {
    await this.shell(['kill', pid]);
  } catch (e) {
    if (_lodash.default.includes(e.stderr, noProcessFlag)) {
      return;
    }
    if (!_lodash.default.includes(e.stderr, 'Operation not permitted')) {
      throw e;
    }
    _logger.default.info(`Cannot kill PID ${pid} due to insufficient permissions. Retrying as root`);
    try {
      await this.shell(['kill', pid], {
        privileged: true
      });
    } catch (e1) {
      if (_lodash.default.includes(e1.stderr, noProcessFlag)) {
        return;
      }
      throw e1;
    }
  }
};
methods.broadcastProcessEnd = async function broadcastProcessEnd(intent, processName) {
  this.broadcast(intent);
  let start = Date.now();
  let timeoutMs = 40000;
  try {
    while (Date.now() - start < timeoutMs) {
      if (await this.processExists(processName)) {
        await (0, _asyncbox.sleep)(400);
        continue;
      }
      return;
    }
    throw new Error(`Process never died within ${timeoutMs} ms`);
  } catch (e) {
    throw new Error(`Unable to broadcast process end. Original error: ${e.message}`);
  }
};
methods.broadcast = async function broadcast(intent) {
  if (!this.isValidClass(intent)) {
    throw new Error(`Invalid intent ${intent}`);
  }
  _logger.default.debug(`Broadcasting: ${intent}`);
  await this.shell(['am', 'broadcast', '-a', intent]);
};
methods.endAndroidCoverage = async function endAndroidCoverage() {
  if (this.instrumentProc && this.instrumentProc.isRunning) {
    await this.instrumentProc.stop();
  }
};
methods.instrument = async function instrument(pkg, activity, instrumentWith) {
  if (activity[0] !== '.') {
    pkg = '';
  }
  let pkgActivity = (pkg + activity).replace(/\.+/g, '.');
  let stdout = await this.shell(['am', 'instrument', '-e', 'main_activity', pkgActivity, instrumentWith]);
  if (stdout.indexOf('Exception') !== -1) {
    throw new Error(`Unknown exception during instrumentation. Original error ${stdout.split('\n')[0]}`);
  }
};
methods.androidCoverage = async function androidCoverage(instrumentClass, waitPkg, waitActivity) {
  if (!this.isValidClass(instrumentClass)) {
    throw new Error(`Invalid class ${instrumentClass}`);
  }
  return await new _bluebird.default(async (resolve, reject) => {
    let args = this.executable.defaultArgs.concat(['shell', 'am', 'instrument', '-e', 'coverage', 'true', '-w']).concat([instrumentClass]);
    _logger.default.debug(`Collecting coverage data with: ${[this.executable.path].concat(args).join(' ')}`);
    try {
      this.instrumentProc = new _teen_process.SubProcess(this.executable.path, args);
      await this.instrumentProc.start(0);
      this.instrumentProc.on('output', (stdout, stderr) => {
        if (stderr) {
          reject(new Error(`Failed to run instrumentation. Original error: ${stderr}`));
        }
      });
      await this.waitForActivity(waitPkg, waitActivity);
      resolve();
    } catch (e) {
      reject(new Error(`Android coverage failed. Original error: ${e.message}`));
    }
  });
};
methods.getDeviceProperty = async function getDeviceProperty(property) {
  let stdout = await this.shell(['getprop', property]);
  let val = stdout.trim();
  _logger.default.debug(`Current device property '${property}': ${val}`);
  return val;
};
methods.setDeviceProperty = async function setDeviceProperty(prop, val, opts = {}) {
  const {
    privileged = true
  } = opts;
  _logger.default.debug(`Setting device property '${prop}' to '${val}'`);
  await this.shell(['setprop', prop, val], {
    privileged
  });
};
methods.getDeviceSysLanguage = async function getDeviceSysLanguage() {
  return await this.getDeviceProperty('persist.sys.language');
};
methods.getDeviceSysCountry = async function getDeviceSysCountry() {
  return await this.getDeviceProperty('persist.sys.country');
};
methods.getDeviceSysLocale = async function getDeviceSysLocale() {
  return await this.getDeviceProperty('persist.sys.locale');
};
methods.getDeviceProductLanguage = async function getDeviceProductLanguage() {
  return await this.getDeviceProperty('ro.product.locale.language');
};
methods.getDeviceProductCountry = async function getDeviceProductCountry() {
  return await this.getDeviceProperty('ro.product.locale.region');
};
methods.getDeviceProductLocale = async function getDeviceProductLocale() {
  return await this.getDeviceProperty('ro.product.locale');
};
methods.getModel = async function getModel() {
  return await this.getDeviceProperty('ro.product.model');
};
methods.getManufacturer = async function getManufacturer() {
  return await this.getDeviceProperty('ro.product.manufacturer');
};
methods.getScreenSize = async function getScreenSize() {
  let stdout = await this.shell(['wm', 'size']);
  let size = new RegExp(/Physical size: ([^\r?\n]+)*/g).exec(stdout);
  if (size && size.length >= 2) {
    return size[1].trim();
  }
  return null;
};
methods.getScreenDensity = async function getScreenDensity() {
  let stdout = await this.shell(['wm', 'density']);
  let density = new RegExp(/Physical density: ([^\r?\n]+)*/g).exec(stdout);
  if (density && density.length >= 2) {
    let densityNumber = parseInt(density[1].trim(), 10);
    return isNaN(densityNumber) ? null : densityNumber;
  }
  return null;
};
methods.setHttpProxy = async function setHttpProxy(proxyHost, proxyPort) {
  let proxy = `${proxyHost}:${proxyPort}`;
  if (_lodash.default.isUndefined(proxyHost)) {
    throw new Error(`Call to setHttpProxy method with undefined proxy_host: ${proxy}`);
  }
  if (_lodash.default.isUndefined(proxyPort)) {
    throw new Error(`Call to setHttpProxy method with undefined proxy_port ${proxy}`);
  }
  const httpProxySettins = [['http_proxy', proxy], ['global_http_proxy_host', proxyHost], ['global_http_proxy_port', proxyPort]];
  for (const [settingKey, settingValue] of httpProxySettins) {
    await this.setSetting('global', settingKey, settingValue);
  }
};
methods.deleteHttpProxy = async function deleteHttpProxy() {
  const httpProxySettins = ['http_proxy', 'global_http_proxy_host', 'global_http_proxy_port', 'global_http_proxy_exclusion_list'];
  for (const setting of httpProxySettins) {
    await this.shell(['settings', 'delete', 'global', setting]);
  }
};
methods.setSetting = async function setSetting(namespace, setting, value) {
  return await this.shell(['settings', 'put', namespace, setting, value]);
};
methods.getSetting = async function getSetting(namespace, setting) {
  return await this.shell(['settings', 'get', namespace, setting]);
};
methods.bugreport = async function bugreport(timeout = 120000) {
  return await this.adbExec(['bugreport'], {
    timeout
  });
};
methods.screenrecord = function screenrecord(destination, options = {}) {
  const cmd = ['screenrecord'];
  const {
    videoSize,
    bitRate,
    timeLimit,
    bugReport
  } = options;
  if (_support.util.hasValue(videoSize)) {
    cmd.push('--size', videoSize);
  }
  if (_support.util.hasValue(timeLimit)) {
    cmd.push('--time-limit', timeLimit);
  }
  if (_support.util.hasValue(bitRate)) {
    cmd.push('--bit-rate', bitRate);
  }
  if (bugReport) {
    cmd.push('--bugreport');
  }
  cmd.push(destination);
  const fullCmd = [...this.executable.defaultArgs, 'shell', ...cmd];
  _logger.default.debug(`Building screenrecord process with the command line: adb ${_support.util.quote(fullCmd)}`);
  return new _teen_process.SubProcess(this.executable.path, fullCmd);
};
methods.runInImeContext = async function runInImeContext(ime, fn) {
  const originalIme = await this.defaultIME();
  if (originalIme === ime) {
    _logger.default.debug(`The original IME is the same as '${ime}'. There is no need to reset it`);
  } else {
    await this.enableIME(ime);
    await this.setIME(ime);
    await _bluebird.default.delay(500);
  }
  try {
    return await fn();
  } finally {
    if (originalIme !== ime) {
      await this.setIME(originalIme);
    }
  }
};
methods.getTimeZone = async function getTimeZone() {
  _logger.default.debug('Getting current timezone');
  try {
    return await this.getDeviceProperty('persist.sys.timezone');
  } catch (e) {
    throw new Error(`Error getting timezone. Original error: ${e.message}`);
  }
};
methods.listFeatures = async function listFeatures() {
  this._memoizedFeatures = this._memoizedFeatures || _lodash.default.memoize(async () => await this.adbExec(['features']), () => this.curDeviceId);
  try {
    return (await this._memoizedFeatures()).split(/\s+/).map(x => x.trim()).filter(Boolean);
  } catch (e) {
    if (_lodash.default.includes(e.stderr, 'unknown command')) {
      return [];
    }
    throw e;
  }
};
methods.isStreamedInstallSupported = async function isStreamedInstallSupported() {
  const proto = Object.getPrototypeOf(this);
  proto._helpOutput = proto._helpOutput || (await this.adbExec(['help']));
  return proto._helpOutput.includes('--streaming') && (await this.listFeatures()).includes('cmd');
};
methods.isIncrementalInstallSupported = async function isIncrementalInstallSupported() {
  const {
    binary
  } = await this.getVersion();
  if (!binary) {
    return false;
  }
  return _support.util.compareVersions(binary.version, '>=', '30.0.1') && (await this.listFeatures()).includes('abb_exec');
};
methods.getDeviceIdleWhitelist = async function getDeviceIdleWhitelist() {
  if ((await this.getApiLevel()) < 23) {
    return [];
  }
  _logger.default.info('Listing packages in Doze whitelist');
  const output = await this.shell(['dumpsys', 'deviceidle', 'whitelist']);
  return _lodash.default.trim(output).split(/\n/).map(line => _lodash.default.trim(line)).filter(Boolean);
};
methods.addToDeviceIdleWhitelist = async function addToDeviceIdleWhitelist(...packages) {
  if (_lodash.default.isEmpty(packages) || (await this.getApiLevel()) < 23) {
    return false;
  }
  _logger.default.info(`Adding ${_support.util.pluralize('package', packages.length)} ${JSON.stringify(packages)} to Doze whitelist`);
  await this.shellChunks(pkg => ['dumpsys', 'deviceidle', 'whitelist', `+${pkg}`], packages);
  return true;
};
var _default = methods;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaGVscGVycyIsIl9wYXRoIiwiX2xvZGFzaCIsIl9zdXBwb3J0IiwiX29zIiwiX2xvZ2NhdCIsIl9hc3luY2JveCIsIl90ZWVuX3Byb2Nlc3MiLCJfYmx1ZWJpcmQiLCJNQVhfU0hFTExfQlVGRkVSX0xFTkdUSCIsIk5PVF9DSEFOR0VBQkxFX1BFUk1fRVJST1IiLCJJR05PUkVEX1BFUk1fRVJST1JTIiwiTUFYX1BHUkVQX1BBVFRFUk5fTEVOIiwiSElEREVOX0FQSV9QT0xJQ1lfS0VZUyIsIlBJRF9DT0xVTU5fVElUTEUiLCJQUk9DRVNTX05BTUVfQ09MVU1OX1RJVExFIiwiUFNfVElUTEVfUEFUVEVSTiIsIlJlZ0V4cCIsIk1JTl9BUElfTEVWRUxfV0lUSF9QRVJNU19TVVBQT1JUIiwibWV0aG9kcyIsInNoZWxsQ2h1bmtzIiwiYXJnVHJhbnNmb3JtZXIiLCJhcmdzIiwiY29tbWFuZHMiLCJjbWRDaHVuayIsImFyZyIsIm5leHRDbWQiLCJfIiwiaXNBcnJheSIsIkVycm9yIiwibGFzdCIsInB1c2giLCJqb2luIiwibGVuZ3RoIiwiaXNFbXB0eSIsImxvZyIsImRlYnVnIiwiSlNPTiIsInN0cmluZ2lmeSIsImxhc3RFcnJvciIsImNtZCIsInNoZWxsIiwiZSIsImdldEFkYldpdGhDb3JyZWN0QWRiUGF0aCIsImV4ZWN1dGFibGUiLCJwYXRoIiwiZ2V0U2RrQmluYXJ5UGF0aCIsImFkYiIsImluaXRBYXB0IiwiaW5pdEFhcHQyIiwiaW5pdFppcEFsaWduIiwiaW5pdEJ1bmRsZXRvb2wiLCJiaW5hcmllcyIsImJ1bmRsZXRvb2wiLCJmcyIsIndoaWNoIiwiZXJyIiwiZ2V0QXBpTGV2ZWwiLCJpc0ludGVnZXIiLCJfYXBpTGV2ZWwiLCJzdHJPdXRwdXQiLCJnZXREZXZpY2VQcm9wZXJ0eSIsImFwaUxldmVsIiwicGFyc2VJbnQiLCJ0cmltIiwiY2hhckNvZGVRIiwiY2hhckNvZGVBdCIsImFwaUxldmVsRGlmZiIsImNvZGVuYW1lIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiZ2V0UGxhdGZvcm1WZXJzaW9uIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsImlzTmFOIiwibWVzc2FnZSIsImluZm8iLCJpc0RldmljZUNvbm5lY3RlZCIsImRldmljZXMiLCJnZXRDb25uZWN0ZWREZXZpY2VzIiwibWtkaXIiLCJyZW1vdGVQYXRoIiwiaXNWYWxpZENsYXNzIiwiY2xhc3NTdHJpbmciLCJtYXRjaENvbXBvbmVudE5hbWUiLCJyZXNvbHZlTGF1bmNoYWJsZUFjdGl2aXR5IiwicGtnIiwib3B0cyIsInByZWZlckNtZCIsInN0ZG91dCIsIm5hbWVzIiwicGFyc2VMYXVuY2hhYmxlQWN0aXZpdHlOYW1lcyIsInRtcFJvb3QiLCJ0ZW1wRGlyIiwib3BlbkRpciIsInRtcEFwcCIsInB1bGxBcGsiLCJhcGtBY3Rpdml0eSIsInBhY2thZ2VBbmRMYXVuY2hBY3Rpdml0eUZyb21NYW5pZmVzdCIsInN0YWNrIiwid2FybiIsInJpbXJhZiIsInN0ZGVyciIsIm91dHB1dEZvcm1hdCIsIkVYRUNfT1VUUFVUX0ZPUk1BVCIsIkZVTEwiLCJsaW5lIiwic3BsaXQiLCJtYXAiLCJmb3JjZVN0b3AiLCJraWxsUGFja2FnZSIsImNsZWFyIiwiZ3JhbnRBbGxQZXJtaXNzaW9ucyIsImFwayIsInRhcmdldFNkayIsImR1bXBzeXNPdXRwdXQiLCJ0YXJnZXRTZGtWZXJzaW9uVXNpbmdQS0ciLCJ0YXJnZXRTZGtWZXJzaW9uRnJvbU1hbmlmZXN0IiwicmVxdWVzdGVkUGVybWlzc2lvbnMiLCJnZXRSZXFQZXJtaXNzaW9ucyIsImdyYW50ZWRQZXJtaXNzaW9ucyIsImdldEdyYW50ZWRQZXJtaXNzaW9ucyIsInBlcm1pc3Npb25zVG9HcmFudCIsImRpZmZlcmVuY2UiLCJncmFudFBlcm1pc3Npb25zIiwicGVybWlzc2lvbnMiLCJwZXJtIiwic29tZSIsInBhdHRlcm4iLCJ0ZXN0IiwiZ3JhbnRQZXJtaXNzaW9uIiwicGVybWlzc2lvbiIsInJldm9rZVBlcm1pc3Npb24iLCJjbWRPdXRwdXQiLCJleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyIsImdldERlbmllZFBlcm1pc3Npb25zIiwiZ2V0TG9jYXRpb25Qcm92aWRlcnMiLCJnZXRTZXR0aW5nIiwicCIsImZpbHRlciIsIkJvb2xlYW4iLCJpbmNsdWRlcyIsInRvZ2dsZUdQU0xvY2F0aW9uUHJvdmlkZXIiLCJlbmFibGVkIiwic2V0U2V0dGluZyIsInNldEhpZGRlbkFwaVBvbGljeSIsInZhbHVlIiwiaWdub3JlRXJyb3IiLCJrIiwic2V0RGVmYXVsdEhpZGRlbkFwaVBvbGljeSIsInN0b3BBbmRDbGVhciIsImF2YWlsYWJsZUlNRXMiLCJnZXRJTUVMaXN0RnJvbU91dHB1dCIsImVuYWJsZWRJTUVzIiwiZW5hYmxlSU1FIiwiaW1lSWQiLCJkaXNhYmxlSU1FIiwic2V0SU1FIiwiZGVmYXVsdElNRSIsImVuZ2luZSIsImtleWV2ZW50Iiwia2V5Y29kZSIsImNvZGUiLCJpbnB1dFRleHQiLCJ0ZXh0Iiwib3JpZ2luYWxTdHIiLCJlc2NhcGVkVGV4dCIsInJlcGxhY2UiLCJhZGJJbnB1dEVzY2FwZVBhdHRlcm4iLCJldmVyeSIsImMiLCJxIiwiY2xlYXJUZXh0RmllbGQiLCJpIiwibG9jayIsImlzU2NyZWVuTG9ja2VkIiwidGltZW91dE1zIiwid2FpdEZvckNvbmRpdGlvbiIsIndhaXRNcyIsImludGVydmFsTXMiLCJiYWNrIiwiZ29Ub0hvbWUiLCJnZXRBZGJQYXRoIiwiZ2V0U2NyZWVuT3JpZW50YXRpb24iLCJnZXRTdXJmYWNlT3JpZW50YXRpb24iLCJzZW5kVGVsbmV0Q29tbWFuZCIsImNvbW1hbmQiLCJleGVjRW11Q29uc29sZUNvbW1hbmQiLCJwb3J0IiwiZ2V0RW11bGF0b3JQb3J0IiwiaXNBaXJwbGFuZU1vZGVPbiIsInNldEFpcnBsYW5lTW9kZSIsIm9uIiwiYnJvYWRjYXN0QWlycGxhbmVNb2RlIiwicHJpdmlsZWdlZCIsImlnbiIsImlzV2lmaU9uIiwiaXNEYXRhT24iLCJzZXRXaWZpQW5kRGF0YSIsIndpZmkiLCJkYXRhIiwiaXNFbXVsYXRvciIsInV0aWwiLCJoYXNWYWx1ZSIsInNldFdpZmlTdGF0ZSIsInNldERhdGFTdGF0ZSIsImlzQW5pbWF0aW9uT24iLCJhbmltYXRvcl9kdXJhdGlvbl9zY2FsZSIsInRyYW5zaXRpb25fYW5pbWF0aW9uX3NjYWxlIiwid2luZG93X2FuaW1hdGlvbl9zY2FsZSIsInNldHRpbmciLCJsb2NhbFBhdGgiLCJwb3NpeCIsImRpcm5hbWUiLCJhZGJFeGVjIiwicHVsbCIsInRpbWVvdXQiLCJwcm9jZXNzRXhpc3RzIiwicHJvY2Vzc05hbWUiLCJnZXRQSURzQnlOYW1lIiwiZ2V0Rm9yd2FyZExpc3QiLCJjb25uZWN0aW9ucyIsIkVPTCIsImZvcndhcmRQb3J0Iiwic3lzdGVtUG9ydCIsImRldmljZVBvcnQiLCJyZW1vdmVQb3J0Rm9yd2FyZCIsImdldFJldmVyc2VMaXN0IiwicmV2ZXJzZVBvcnQiLCJyZW1vdmVQb3J0UmV2ZXJzZSIsImZvcndhcmRBYnN0cmFjdFBvcnQiLCJwaW5nIiwiaW5kZXhPZiIsInJlc3RhcnQiLCJzdG9wTG9nY2F0IiwicmVzdGFydEFkYiIsIndhaXRGb3JEZXZpY2UiLCJzdGFydExvZ2NhdCIsIl9sb2djYXRTdGFydHVwUGFyYW1zIiwibG9nY2F0IiwiTG9nY2F0IiwiZGVidWdUcmFjZSIsImNsZWFyRGV2aWNlTG9nc09uU3RhcnQiLCJzdGFydENhcHR1cmUiLCJzdG9wQ2FwdHVyZSIsImdldExvZ2NhdExvZ3MiLCJnZXRMb2dzIiwic2V0TG9nY2F0TGlzdGVuZXIiLCJsaXN0ZW5lciIsInJlbW92ZUxvZ2NhdExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJsaXN0UHJvY2Vzc1N0YXR1cyIsImlzQm9vbGVhbiIsIl9kb2VzUHNTdXBwb3J0QU9wdGlvbiIsImdldE5hbWVCeVBpZCIsInBpZCIsInRpdGxlTWF0Y2giLCJleGVjIiwiYWxsVGl0bGVzIiwicGlkSW5kZXgiLCJuYW1lT2Zmc2V0IiwicGlkUmVnZXgiLCJtYXRjaGVkTGluZSIsIml0ZW1zIiwibmFtZSIsIl9pc1BncmVwQXZhaWxhYmxlIiwicGdyZXBPdXRwdXQiLCJfY2FuUGdyZXBVc2VGdWxsQ21kTGluZVNlYXJjaCIsIl9pc1BpZG9mQXZhaWxhYmxlIiwic2hlbGxDb21tYW5kIiwiZXNjYXBlUmVnRXhwIiwic2xpY2UiLCJ4IiwicGlkcyIsInByb2Nlc3NOYW1lUmVnZXgiLCJraWxsUHJvY2Vzc2VzQnlOYW1lIiwiQiIsImFsbCIsImtpbGxQcm9jZXNzQnlQSUQiLCJub1Byb2Nlc3NGbGFnIiwiZTEiLCJicm9hZGNhc3RQcm9jZXNzRW5kIiwiaW50ZW50IiwiYnJvYWRjYXN0Iiwic3RhcnQiLCJEYXRlIiwibm93Iiwic2xlZXAiLCJlbmRBbmRyb2lkQ292ZXJhZ2UiLCJpbnN0cnVtZW50UHJvYyIsImlzUnVubmluZyIsInN0b3AiLCJpbnN0cnVtZW50IiwiYWN0aXZpdHkiLCJpbnN0cnVtZW50V2l0aCIsInBrZ0FjdGl2aXR5IiwiYW5kcm9pZENvdmVyYWdlIiwiaW5zdHJ1bWVudENsYXNzIiwid2FpdFBrZyIsIndhaXRBY3Rpdml0eSIsInJlc29sdmUiLCJyZWplY3QiLCJkZWZhdWx0QXJncyIsImNvbmNhdCIsIlN1YlByb2Nlc3MiLCJ3YWl0Rm9yQWN0aXZpdHkiLCJwcm9wZXJ0eSIsInZhbCIsInNldERldmljZVByb3BlcnR5IiwicHJvcCIsImdldERldmljZVN5c0xhbmd1YWdlIiwiZ2V0RGV2aWNlU3lzQ291bnRyeSIsImdldERldmljZVN5c0xvY2FsZSIsImdldERldmljZVByb2R1Y3RMYW5ndWFnZSIsImdldERldmljZVByb2R1Y3RDb3VudHJ5IiwiZ2V0RGV2aWNlUHJvZHVjdExvY2FsZSIsImdldE1vZGVsIiwiZ2V0TWFudWZhY3R1cmVyIiwiZ2V0U2NyZWVuU2l6ZSIsInNpemUiLCJnZXRTY3JlZW5EZW5zaXR5IiwiZGVuc2l0eSIsImRlbnNpdHlOdW1iZXIiLCJzZXRIdHRwUHJveHkiLCJwcm94eUhvc3QiLCJwcm94eVBvcnQiLCJwcm94eSIsImlzVW5kZWZpbmVkIiwiaHR0cFByb3h5U2V0dGlucyIsInNldHRpbmdLZXkiLCJzZXR0aW5nVmFsdWUiLCJkZWxldGVIdHRwUHJveHkiLCJuYW1lc3BhY2UiLCJidWdyZXBvcnQiLCJzY3JlZW5yZWNvcmQiLCJkZXN0aW5hdGlvbiIsIm9wdGlvbnMiLCJ2aWRlb1NpemUiLCJiaXRSYXRlIiwidGltZUxpbWl0IiwiYnVnUmVwb3J0IiwiZnVsbENtZCIsInF1b3RlIiwicnVuSW5JbWVDb250ZXh0IiwiaW1lIiwiZm4iLCJvcmlnaW5hbEltZSIsImRlbGF5IiwiZ2V0VGltZVpvbmUiLCJsaXN0RmVhdHVyZXMiLCJfbWVtb2l6ZWRGZWF0dXJlcyIsIm1lbW9pemUiLCJjdXJEZXZpY2VJZCIsImlzU3RyZWFtZWRJbnN0YWxsU3VwcG9ydGVkIiwicHJvdG8iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsIl9oZWxwT3V0cHV0IiwiaXNJbmNyZW1lbnRhbEluc3RhbGxTdXBwb3J0ZWQiLCJiaW5hcnkiLCJnZXRWZXJzaW9uIiwiY29tcGFyZVZlcnNpb25zIiwidmVyc2lvbiIsImdldERldmljZUlkbGVXaGl0ZWxpc3QiLCJvdXRwdXQiLCJhZGRUb0RldmljZUlkbGVXaGl0ZWxpc3QiLCJwYWNrYWdlcyIsInBsdXJhbGl6ZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvdG9vbHMvYWRiLWNvbW1hbmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyLmpzJztcbmltcG9ydCB7XG4gIGdldElNRUxpc3RGcm9tT3V0cHV0LCBnZXRTdXJmYWNlT3JpZW50YXRpb24sIGV4dHJhY3RNYXRjaGluZ1Blcm1pc3Npb25zLFxuICBwYXJzZUxhdW5jaGFibGVBY3Rpdml0eU5hbWVzLCBtYXRjaENvbXBvbmVudE5hbWUsXG59IGZyb20gJy4uL2hlbHBlcnMuanMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgZnMsIHV0aWwsIHRlbXBEaXIgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IHsgRU9MIH0gZnJvbSAnb3MnO1xuaW1wb3J0IExvZ2NhdCBmcm9tICcuLi9sb2djYXQnO1xuaW1wb3J0IHsgc2xlZXAsIHdhaXRGb3JDb25kaXRpb24gfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgeyBTdWJQcm9jZXNzIH0gZnJvbSAndGVlbl9wcm9jZXNzJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcblxuY29uc3QgTUFYX1NIRUxMX0JVRkZFUl9MRU5HVEggPSAxMDAwO1xuY29uc3QgTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUiA9IC9ub3QgYSBjaGFuZ2VhYmxlIHBlcm1pc3Npb24gdHlwZS9pO1xuY29uc3QgSUdOT1JFRF9QRVJNX0VSUk9SUyA9IFtcbiAgTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUixcbiAgL1Vua25vd24gcGVybWlzc2lvbi9pLFxuXTtcbmNvbnN0IE1BWF9QR1JFUF9QQVRURVJOX0xFTiA9IDE1O1xuY29uc3QgSElEREVOX0FQSV9QT0xJQ1lfS0VZUyA9IFtcbiAgJ2hpZGRlbl9hcGlfcG9saWN5X3ByZV9wX2FwcHMnLFxuICAnaGlkZGVuX2FwaV9wb2xpY3lfcF9hcHBzJyxcbiAgJ2hpZGRlbl9hcGlfcG9saWN5J1xuXTtcbmNvbnN0IFBJRF9DT0xVTU5fVElUTEUgPSAnUElEJztcbmNvbnN0IFBST0NFU1NfTkFNRV9DT0xVTU5fVElUTEUgPSAnTkFNRSc7XG5jb25zdCBQU19USVRMRV9QQVRURVJOID0gbmV3IFJlZ0V4cChgXiguKlxcXFxiJHtQSURfQ09MVU1OX1RJVExFfVxcXFxiLipcXFxcYiR7UFJPQ0VTU19OQU1FX0NPTFVNTl9USVRMRX1cXFxcYi4qKSRgLCAnbScpO1xuY29uc3QgTUlOX0FQSV9MRVZFTF9XSVRIX1BFUk1TX1NVUFBPUlQgPSAyMztcblxuY29uc3QgbWV0aG9kcyA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgY2h1bmtzIGZvciB0aGUgZ2l2ZW4gYXJndW1lbnRzIGFuZCBleGVjdXRlcyB0aGVtIGluIGBhZGIgc2hlbGxgLlxuICogVGhpcyBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBhZGIgc2hlbGxgIHNlcGFyYXRlbHkgZm9yIGVhY2ggYXJnLCBob3dldmVyXG4gKiB0aGVyZSBpcyBhIGxpbWl0IGZvciBhIG1heGltdW0gbGVuZ3RoIG9mIGEgc2luZ2xlIGFkYiBjb21tYW5kLiB0aGF0IGlzIHdoeVxuICogd2UgbmVlZCBhbGwgdGhpcyBjb21wbGljYXRlZCBsb2dpYy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhcmdUcmFuc2Zvcm1lciBBIGZ1bmN0aW9uLCB0aGF0IHJlY2VpdmVzIHNpbmdsZSBhcmd1bWVudFxuICogZnJvbSB0aGUgYGFyZ3NgIGFycmF5IGFuZCB0cmFuc2Zvcm1zIGl0IGludG8gYSBzaGVsbCBjb21tYW5kLiBUaGUgcmVzdWx0XG4gKiBvZiB0aGUgZnVuY3Rpb24gbXVzdCBiZSBhbiBhcnJheSwgd2hlcmUgZWFjaCBpdGVtIGlzIGEgcGFydCBvZiBhIHNpbmdsZSBjb21tYW5kLlxuICogVGhlIGxhc3QgaXRlbSBvZiB0aGUgYXJyYXkgY291bGQgYmUgJzsnLiBJZiB0aGlzIGlzIG5vdCBhIHNlbWljb2xvbiB0aGVuIGl0IGlzIGdvaW5nIHRvXG4gKiBiZSBhZGRlZCBhdXRvbWF0aWNhbGx5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXJ8c3RyaW5nPn0gYXJncyBBcnJheSBvZiBhcmd1bWVudCB2YWx1ZXMgdG8gY3JlYXRlIGNodW5rcyBmb3JcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBhbnkgb2YgdGhlIGNodW5rcyByZXR1cm5zIG5vbi16ZXJvIGV4aXQgY29kZSBhZnRlciBiZWluZyBleGVjdXRlZFxuICovXG5tZXRob2RzLnNoZWxsQ2h1bmtzID0gYXN5bmMgZnVuY3Rpb24gc2hlbGxDaHVua3MgKGFyZ1RyYW5zZm9ybWVyLCBhcmdzKSB7XG4gIGNvbnN0IGNvbW1hbmRzID0gW107XG4gIGxldCBjbWRDaHVuayA9IFtdO1xuICBmb3IgKGNvbnN0IGFyZyBvZiBhcmdzKSB7XG4gICAgY29uc3QgbmV4dENtZCA9IGFyZ1RyYW5zZm9ybWVyKGFyZyk7XG4gICAgaWYgKCFfLmlzQXJyYXkobmV4dENtZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQXJndW1lbnQgdHJhbnNmb3JtZXIgbXVzdCByZXN1bHQgaW4gYW4gYXJyYXknKTtcbiAgICB9XG4gICAgaWYgKF8ubGFzdChuZXh0Q21kKSAhPT0gJzsnKSB7XG4gICAgICBuZXh0Q21kLnB1c2goJzsnKTtcbiAgICB9XG4gICAgaWYgKG5leHRDbWQuam9pbignICcpLmxlbmd0aCArIGNtZENodW5rLmpvaW4oJyAnKS5sZW5ndGggPj0gTUFYX1NIRUxMX0JVRkZFUl9MRU5HVEgpIHtcbiAgICAgIGNvbW1hbmRzLnB1c2goY21kQ2h1bmspO1xuICAgICAgY21kQ2h1bmsgPSBbXTtcbiAgICB9XG4gICAgY21kQ2h1bmsgPSBbLi4uY21kQ2h1bmssIC4uLm5leHRDbWRdO1xuICB9XG4gIGlmICghXy5pc0VtcHR5KGNtZENodW5rKSkge1xuICAgIGNvbW1hbmRzLnB1c2goY21kQ2h1bmspO1xuICB9XG4gIGxvZy5kZWJ1ZyhgR290IHRoZSBmb2xsb3dpbmcgY29tbWFuZCBjaHVua3MgdG8gZXhlY3V0ZTogJHtKU09OLnN0cmluZ2lmeShjb21tYW5kcyl9YCk7XG4gIGxldCBsYXN0RXJyb3IgPSBudWxsO1xuICBmb3IgKGNvbnN0IGNtZCBvZiBjb21tYW5kcykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnNoZWxsKGNtZCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbGFzdEVycm9yID0gZTtcbiAgICB9XG4gIH1cbiAgaWYgKGxhc3RFcnJvcikge1xuICAgIHRocm93IGxhc3RFcnJvcjtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIHBhdGggdG8gYWRiIGV4ZWN1dGFibGUgYW1kIGFzc2lnbiBpdFxuICogdG8gdGhpcy5leGVjdXRhYmxlLnBhdGggYW5kIHRoaXMuYmluYXJpZXMuYWRiIHByb3BlcnRpZXMuXG4gKlxuICogQHJldHVybiB7QURCfSBBREIgaW5zdGFuY2UuXG4gKi9cbm1ldGhvZHMuZ2V0QWRiV2l0aENvcnJlY3RBZGJQYXRoID0gYXN5bmMgZnVuY3Rpb24gZ2V0QWRiV2l0aENvcnJlY3RBZGJQYXRoICgpIHtcbiAgdGhpcy5leGVjdXRhYmxlLnBhdGggPSBhd2FpdCB0aGlzLmdldFNka0JpbmFyeVBhdGgoJ2FkYicpO1xuICByZXR1cm4gdGhpcy5hZGI7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIGFhcHQgdG9vbCBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLmFhcHQgcHJvcGVydHlcbiAqL1xubWV0aG9kcy5pbml0QWFwdCA9IGFzeW5jIGZ1bmN0aW9uIGluaXRBYXB0ICgpIHtcbiAgYXdhaXQgdGhpcy5nZXRTZGtCaW5hcnlQYXRoKCdhYXB0Jyk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIGFhcHQyIHRvb2wgYW5kIGFzc2lnbiBpdCB0b1xuICogdGhpcy5iaW5hcmllcy5hYXB0MiBwcm9wZXJ0eVxuICovXG5tZXRob2RzLmluaXRBYXB0MiA9IGFzeW5jIGZ1bmN0aW9uIGluaXRBYXB0MiAoKSB7XG4gIGF3YWl0IHRoaXMuZ2V0U2RrQmluYXJ5UGF0aCgnYWFwdDInKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBmdWxsIHBhdGggdG8gemlwYWxpZ24gdG9vbCBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLnppcGFsaWduIHByb3BlcnR5XG4gKi9cbm1ldGhvZHMuaW5pdFppcEFsaWduID0gYXN5bmMgZnVuY3Rpb24gaW5pdFppcEFsaWduICgpIHtcbiAgYXdhaXQgdGhpcy5nZXRTZGtCaW5hcnlQYXRoKCd6aXBhbGlnbicpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGZ1bGwgcGF0aCB0byBidW5kbGV0b29sIGJpbmFyeSBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLmJ1bmRsZXRvb2wgcHJvcGVydHlcbiAqL1xubWV0aG9kcy5pbml0QnVuZGxldG9vbCA9IGFzeW5jIGZ1bmN0aW9uIGluaXRCdW5kbGV0b29sICgpIHtcbiAgdHJ5IHtcbiAgICB0aGlzLmJpbmFyaWVzLmJ1bmRsZXRvb2wgPSBhd2FpdCBmcy53aGljaCgnYnVuZGxldG9vbC5qYXInKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdidW5kbGV0b29sLmphciBiaW5hcnkgaXMgZXhwZWN0ZWQgdG8gYmUgcHJlc2VudCBpbiBQQVRILiAnICtcbiAgICAgICdWaXNpdCBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2J1bmRsZXRvb2wgZm9yIG1vcmUgZGV0YWlscy4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgQVBJIGxldmVsIG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBBUEkgbGV2ZWwgYXMgaW50ZWdlciBudW1iZXIsIGZvciBleGFtcGxlIDIxIGZvclxuICogICAgICAgICAgICAgICAgICBBbmRyb2lkIExvbGxpcG9wLiBUaGUgcmVzdWx0IG9mIHRoaXMgbWV0aG9kIGlzIGNhY2hlZCwgc28gYWxsIHRoZSBmdXJ0aGVyXG4gKiBjYWxscyByZXR1cm4gdGhlIHNhbWUgdmFsdWUgYXMgdGhlIGZpcnN0IG9uZS5cbiAqL1xubWV0aG9kcy5nZXRBcGlMZXZlbCA9IGFzeW5jIGZ1bmN0aW9uIGdldEFwaUxldmVsICgpIHtcbiAgaWYgKCFfLmlzSW50ZWdlcih0aGlzLl9hcGlMZXZlbCkpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RyT3V0cHV0ID0gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8uYnVpbGQudmVyc2lvbi5zZGsnKTtcbiAgICAgIGxldCBhcGlMZXZlbCA9IHBhcnNlSW50KHN0ck91dHB1dC50cmltKCksIDEwKTtcblxuICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgcHJldmlldy9iZXRhIHBsYXRmb3JtIEFQSSBsZXZlbFxuICAgICAgY29uc3QgY2hhckNvZGVRID0gJ3EnLmNoYXJDb2RlQXQoMCk7XG4gICAgICAvLyAyOCBpcyB0aGUgZmlyc3QgQVBJIExldmVsLCB3aGVyZSBBbmRyb2lkIFNESyBzdGFydGVkIHJldHVybmluZyBsZXR0ZXJzIGluIHJlc3BvbnNlIHRvIGdldFBsYXRmb3JtVmVyc2lvblxuICAgICAgY29uc3QgYXBpTGV2ZWxEaWZmID0gYXBpTGV2ZWwgLSAyODtcbiAgICAgIGNvbnN0IGNvZGVuYW1lID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZVEgKyBhcGlMZXZlbERpZmYpO1xuICAgICAgaWYgKGFwaUxldmVsRGlmZiA+PSAwICYmIChhd2FpdCB0aGlzLmdldFBsYXRmb3JtVmVyc2lvbigpKS50b0xvd2VyQ2FzZSgpID09PSBjb2RlbmFtZSkge1xuICAgICAgICBsb2cuZGVidWcoYFJlbGVhc2UgdmVyc2lvbiBpcyAke2NvZGVuYW1lLnRvVXBwZXJDYXNlKCl9IGJ1dCBmb3VuZCBBUEkgTGV2ZWwgJHthcGlMZXZlbH0uIFNldHRpbmcgQVBJIExldmVsIHRvICR7YXBpTGV2ZWwgKyAxfWApO1xuICAgICAgICBhcGlMZXZlbCsrO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hcGlMZXZlbCA9IGFwaUxldmVsO1xuICAgICAgbG9nLmRlYnVnKGBEZXZpY2UgQVBJIGxldmVsOiAke3RoaXMuX2FwaUxldmVsfWApO1xuICAgICAgaWYgKGlzTmFOKHRoaXMuX2FwaUxldmVsKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBhY3R1YWwgb3V0cHV0ICcke3N0ck91dHB1dH0nIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gYW4gaW50ZWdlcmApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBkZXZpY2UgQVBJIGxldmVsLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzLl9hcGlMZXZlbDtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHBsYXRmb3JtIHZlcnNpb24gb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHBsYXRmb3JtIHZlcnNpb24gYXMgYSBzdHJpbmcsIGZvciBleGFtcGxlICc1LjAnIGZvclxuICogQW5kcm9pZCBMb2xsaXBvcC5cbiAqL1xubWV0aG9kcy5nZXRQbGF0Zm9ybVZlcnNpb24gPSBhc3luYyBmdW5jdGlvbiBnZXRQbGF0Zm9ybVZlcnNpb24gKCkge1xuICBsb2cuaW5mbygnR2V0dGluZyBkZXZpY2UgcGxhdGZvcm0gdmVyc2lvbicpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5idWlsZC52ZXJzaW9uLnJlbGVhc2UnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBkZXZpY2UgcGxhdGZvcm0gdmVyc2lvbi4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFZlcmlmeSB3aGV0aGVyIGEgZGV2aWNlIGlzIGNvbm5lY3RlZC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGF0IGxlYXN0IG9uZSBkZXZpY2UgaXMgdmlzaWJsZSB0byBhZGIuXG4gKi9cbm1ldGhvZHMuaXNEZXZpY2VDb25uZWN0ZWQgPSBhc3luYyBmdW5jdGlvbiBpc0RldmljZUNvbm5lY3RlZCAoKSB7XG4gIGxldCBkZXZpY2VzID0gYXdhaXQgdGhpcy5nZXRDb25uZWN0ZWREZXZpY2VzKCk7XG4gIHJldHVybiBkZXZpY2VzLmxlbmd0aCA+IDA7XG59O1xuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGNyZWF0ZSBhIG5ldyBmb2xkZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZW1vdGVQYXRoIC0gVGhlIG5ldyBwYXRoIHRvIGJlIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IG1rZGlyIGNvbW1hbmQgb3V0cHV0LlxuICovXG5tZXRob2RzLm1rZGlyID0gYXN5bmMgZnVuY3Rpb24gbWtkaXIgKHJlbW90ZVBhdGgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2hlbGwoWydta2RpcicsICctcCcsIHJlbW90ZVBhdGhdKTtcbn07XG5cbi8qKlxuICogVmVyaWZ5IHdoZXRoZXIgdGhlIGdpdmVuIGFyZ3VtZW50IGlzIGFcbiAqIHZhbGlkIGNsYXNzIG5hbWUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzU3RyaW5nIC0gVGhlIGFjdHVhbCBjbGFzcyBuYW1lIHRvIGJlIHZlcmlmaWVkLlxuICogQHJldHVybiB7P0FycmF5LjxNYXRjaD59IFRoZSByZXN1bHQgb2YgUmVnZXhwLmV4ZWMgb3BlcmF0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgX251bGxfIGlmIG5vIG1hdGNoZXMgYXJlIGZvdW5kLlxuICovXG5tZXRob2RzLmlzVmFsaWRDbGFzcyA9IGZ1bmN0aW9uIGlzVmFsaWRDbGFzcyAoY2xhc3NTdHJpbmcpIHtcbiAgLy8gc29tZS5wYWNrYWdlL3NvbWUucGFja2FnZS5BY3Rpdml0eVxuICByZXR1cm4gbWF0Y2hDb21wb25lbnROYW1lKGNsYXNzU3RyaW5nKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVzb2x2ZUFjdGl2aXR5T3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFuP30gcHJlZmVyQ21kIFt0cnVlXSBXaGV0aGVyIHRvIHByZWZlciBgY21kYCB0b29sIHVzYWdlIGZvclxuICogbGF1bmNoYWJsZSBhY3Rpdml0eSBuYW1lIGRldGVjdGlvbi4gSXQgbWlnaHQgYmUgdXNlZnVsIHRvIGRpc2FibGUgaXQgaWZcbiAqIGBjbWQgcGFja2FnZSByZXNvbHZlLWFjdGl2aXR5YCByZXR1cm5zICdhbmRyb2lkL2NvbS5hbmRyb2lkLmludGVybmFsLmFwcC5SZXNvbHZlckFjdGl2aXR5JyxcbiAqIHdoaWNoIG1lYW5zIHRoZSBhcHAgaGFzIG5vIGRlZmF1bHQgaGFuZGxlciBzZXQgaW4gc3lzdGVtIHNldHRpbmdzLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy8xNzEyOCBmb3IgbW9yZSBkZXRhaWxzLlxuICogVGhpcyBvcHRpb24gaGFzIG5vIGVmZmVjdCBpZiB0aGUgdGFyZ2V0IEFuZHJvaWQgdmVyc2lvbiBpcyBiZWxvdyAyNCBhcyB0aGVyZVxuICogdGhlIGNvcnJlc3BvbmRpbmcgYGNtZGAgc3ViY29tbWFuZCBpcyBub3QgaW1wbGVtZW50ZWQgYW5kIGR1bXBzeXMgdXNhZ2UgaXMgdGhlIG9ubHlcbiAqIHBvc3NpYmxlIHdheSB0byBkZXRlY3QgdGhlIGxhdW5jaGFibGUgYWN0aXZpdHkgbmFtZS5cbiAqL1xuXG4vKipcbiAqIEZldGNoZXMgdGhlIGZ1bGx5IHF1YWxpZmllZCBuYW1lIG9mIHRoZSBsYXVuY2hhYmxlIGFjdGl2aXR5IGZvciB0aGVcbiAqIGdpdmVuIHBhY2thZ2UuIEl0IGlzIGV4cGVjdGVkIHRoZSBwYWNrYWdlIGlzIGFscmVhZHkgaW5zdGFsbGVkIG9uXG4gKiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSB0YXJnZXQgcGFja2FnZSBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge1Jlc29sdmVBY3Rpdml0eU9wdGlvbnM/fSBvcHRzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEZ1bGx5IHF1YWxpZmllZCBuYW1lIG9mIHRoZSBsYXVuY2hhYmxlIGFjdGl2aXR5XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHJlc29sdmluZyB0aGUgYWN0aXZpdHkgbmFtZVxuICovXG5tZXRob2RzLnJlc29sdmVMYXVuY2hhYmxlQWN0aXZpdHkgPSBhc3luYyBmdW5jdGlvbiByZXNvbHZlTGF1bmNoYWJsZUFjdGl2aXR5IChwa2csIG9wdHMgPSB7fSkge1xuICBjb25zdCB7IHByZWZlckNtZCA9IHRydWUgfSA9IG9wdHM7XG4gIGlmICghcHJlZmVyQ21kIHx8IGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDI0KSB7XG4gICAgY29uc3Qgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICAgIGNvbnN0IG5hbWVzID0gcGFyc2VMYXVuY2hhYmxlQWN0aXZpdHlOYW1lcyhzdGRvdXQpO1xuICAgIGlmIChfLmlzRW1wdHkobmFtZXMpKSB7XG4gICAgICBsb2cuZGVidWcoc3Rkb3V0KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlc29sdmUgdGhlIGxhdW5jaGFibGUgYWN0aXZpdHkgb2YgJyR7cGtnfScuIElzIGl0IGluc3RhbGxlZCBvbiB0aGUgZGV2aWNlP2ApO1xuICAgIH1cbiAgICBpZiAobmFtZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gbmFtZXNbMF07XG4gICAgfVxuXG4gICAgY29uc3QgdG1wUm9vdCA9IGF3YWl0IHRlbXBEaXIub3BlbkRpcigpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0bXBBcHAgPSBhd2FpdCB0aGlzLnB1bGxBcGsocGtnLCB0bXBSb290KTtcbiAgICAgIGNvbnN0IHthcGtBY3Rpdml0eX0gPSBhd2FpdCB0aGlzLnBhY2thZ2VBbmRMYXVuY2hBY3Rpdml0eUZyb21NYW5pZmVzdCh0bXBBcHApO1xuICAgICAgcmV0dXJuIGFwa0FjdGl2aXR5O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZy5kZWJ1ZyhlLnN0YWNrKTtcbiAgICAgIGxvZy53YXJuKGBVbmFibGUgdG8gcmVzb2x2ZSB0aGUgbGF1bmNoYWJsZSBhY3Rpdml0eSBvZiAnJHtwa2d9Jy4gYCArXG4gICAgICAgIGBUaGUgdmVyeSBmaXJzdCBtYXRjaCBvZiB0aGUgZHVtcHN5cyBvdXRwdXQgaXMgZ29pbmcgdG8gYmUgdXNlZC4gYCArXG4gICAgICAgIGBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gbmFtZXNbMF07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGF3YWl0IGZzLnJpbXJhZih0bXBSb290KTtcbiAgICB9XG4gIH1cbiAgY29uc3Qge3N0ZG91dCwgc3RkZXJyfSA9IGF3YWl0IHRoaXMuc2hlbGwoWydjbWQnLCAncGFja2FnZScsICdyZXNvbHZlLWFjdGl2aXR5JywgJy0tYnJpZWYnLCBwa2ddLCB7XG4gICAgb3V0cHV0Rm9ybWF0OiB0aGlzLkVYRUNfT1VUUFVUX0ZPUk1BVC5GVUxMXG4gIH0pO1xuICBmb3IgKGNvbnN0IGxpbmUgb2YgKHN0ZG91dCB8fCAnJykuc3BsaXQoJ1xcbicpLm1hcChfLnRyaW0pKSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZENsYXNzKGxpbmUpKSB7XG4gICAgICByZXR1cm4gbGluZTtcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcmVzb2x2ZSB0aGUgbGF1bmNoYWJsZSBhY3Rpdml0eSBvZiAnJHtwa2d9Jy4gT3JpZ2luYWwgZXJyb3I6ICR7c3RkZXJyIHx8IHN0ZG91dH1gKTtcbn07XG5cbi8qKlxuICogRm9yY2UgYXBwbGljYXRpb24gdG8gc3RvcCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgc3RvcHBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC5cbiAqL1xubWV0aG9kcy5mb3JjZVN0b3AgPSBhc3luYyBmdW5jdGlvbiBmb3JjZVN0b3AgKHBrZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ2FtJywgJ2ZvcmNlLXN0b3AnLCBwa2ddKTtcbn07XG5cbi8qXG4gKiBLaWxsIGFwcGxpY2F0aW9uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgc3RvcHBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC5cbiAqL1xubWV0aG9kcy5raWxsUGFja2FnZSA9IGFzeW5jIGZ1bmN0aW9uIGtpbGxQYWNrYWdlIChwa2cpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2hlbGwoWydhbScsICdraWxsJywgcGtnXSk7XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSB1c2VyIGRhdGEgb2YgdGhlIHBhcnRpY3VsYXIgYXBwbGljYXRpb24gb24gdGhlIGRldmljZVxuICogdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBjbGVhcmVkLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgb3V0cHV0IG9mIHRoZSBjb3JyZXNwb25kaW5nIGFkYiBjb21tYW5kLlxuICovXG5tZXRob2RzLmNsZWFyID0gYXN5bmMgZnVuY3Rpb24gY2xlYXIgKHBrZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ3BtJywgJ2NsZWFyJywgcGtnXSk7XG59O1xuXG4vKipcbiAqIEdyYW50IGFsbCBwZXJtaXNzaW9ucyByZXF1ZXN0ZWQgYnkgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqIFRoaXMgbWV0aG9kIGlzIG9ubHkgdXNlZnVsIG9uIEFuZHJvaWQgNi4wKyBhbmQgZm9yIGFwcGxpY2F0aW9uc1xuICogdGhhdCBzdXBwb3J0IGNvbXBvbmVudHMtYmFzZWQgcGVybWlzc2lvbnMgc2V0dGluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBrIC0gVGhlIHBhdGggdG8gdGhlIGFjdHVhbCBhcGsgZmlsZS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgZ3JhbnRpbmcgcGVybWlzc2lvbnNcbiAqL1xubWV0aG9kcy5ncmFudEFsbFBlcm1pc3Npb25zID0gYXN5bmMgZnVuY3Rpb24gZ3JhbnRBbGxQZXJtaXNzaW9ucyAocGtnLCBhcGspIHtcbiAgY29uc3QgYXBpTGV2ZWwgPSBhd2FpdCB0aGlzLmdldEFwaUxldmVsKCk7XG4gIGxldCB0YXJnZXRTZGsgPSAwO1xuICBsZXQgZHVtcHN5c091dHB1dCA9IG51bGw7XG4gIHRyeSB7XG4gICAgaWYgKCFhcGspIHtcbiAgICAgIC8qKlxuICAgICAgICogSWYgYXBrIG5vdCBwcm92aWRlZCwgY29uc2lkZXJpbmcgYXBrIGFscmVhZHkgaW5zdGFsbGVkIG9uIHRoZSBkZXZpY2VcbiAgICAgICAqIGFuZCBmZXRjaGluZyB0YXJnZXRTZGsgdXNpbmcgcGFja2FnZSBuYW1lLlxuICAgICAgICovXG4gICAgICBkdW1wc3lzT3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICAgICAgdGFyZ2V0U2RrID0gYXdhaXQgdGhpcy50YXJnZXRTZGtWZXJzaW9uVXNpbmdQS0cocGtnLCBkdW1wc3lzT3V0cHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0U2RrID0gYXdhaXQgdGhpcy50YXJnZXRTZGtWZXJzaW9uRnJvbU1hbmlmZXN0KGFwayk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy9hdm9pZGluZyBsb2dnaW5nIGVycm9yIHN0YWNrLCBhcyBjYWxsaW5nIGxpYnJhcnkgZnVuY3Rpb24gd291bGQgaGF2ZSBsb2dnZWRcbiAgICBsb2cud2FybihgUmFuIGludG8gcHJvYmxlbSBnZXR0aW5nIHRhcmdldCBTREsgdmVyc2lvbjsgaWdub3JpbmcuLi5gKTtcbiAgfVxuICBpZiAoYXBpTGV2ZWwgPj0gTUlOX0FQSV9MRVZFTF9XSVRIX1BFUk1TX1NVUFBPUlQgJiYgdGFyZ2V0U2RrID49IE1JTl9BUElfTEVWRUxfV0lUSF9QRVJNU19TVVBQT1JUKSB7XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGRldmljZSBpcyBydW5uaW5nIEFuZHJvaWQgNi4wKEFQSSAyMykgb3IgaGlnaGVyLCBhbmQgeW91ciBhcHAncyB0YXJnZXQgU0RLIGlzIDIzIG9yIGhpZ2hlcjpcbiAgICAgKiBUaGUgYXBwIGhhcyB0byBsaXN0IHRoZSBwZXJtaXNzaW9ucyBpbiB0aGUgbWFuaWZlc3QuXG4gICAgICogcmVmZXI6IGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3RyYWluaW5nL3Blcm1pc3Npb25zL3JlcXVlc3RpbmcuaHRtbFxuICAgICAqL1xuICAgIGR1bXBzeXNPdXRwdXQgPSBkdW1wc3lzT3V0cHV0IHx8IGF3YWl0IHRoaXMuc2hlbGwoWydkdW1wc3lzJywgJ3BhY2thZ2UnLCBwa2ddKTtcbiAgICBjb25zdCByZXF1ZXN0ZWRQZXJtaXNzaW9ucyA9IGF3YWl0IHRoaXMuZ2V0UmVxUGVybWlzc2lvbnMocGtnLCBkdW1wc3lzT3V0cHV0KTtcbiAgICBjb25zdCBncmFudGVkUGVybWlzc2lvbnMgPSBhd2FpdCB0aGlzLmdldEdyYW50ZWRQZXJtaXNzaW9ucyhwa2csIGR1bXBzeXNPdXRwdXQpO1xuICAgIGNvbnN0IHBlcm1pc3Npb25zVG9HcmFudCA9IF8uZGlmZmVyZW5jZShyZXF1ZXN0ZWRQZXJtaXNzaW9ucywgZ3JhbnRlZFBlcm1pc3Npb25zKTtcbiAgICBpZiAoXy5pc0VtcHR5KHBlcm1pc3Npb25zVG9HcmFudCkpIHtcbiAgICAgIGxvZy5pbmZvKGAke3BrZ30gY29udGFpbnMgbm8gcGVybWlzc2lvbnMgYXZhaWxhYmxlIGZvciBncmFudGluZ2ApO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmdyYW50UGVybWlzc2lvbnMocGtnLCBwZXJtaXNzaW9uc1RvR3JhbnQpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0YXJnZXRTZGsgPCBNSU5fQVBJX0xFVkVMX1dJVEhfUEVSTVNfU1VQUE9SVCkge1xuICAgIGxvZy5pbmZvKGBJdCBpcyBvbmx5IHBvc3NpYmxlIHRvIGdyYW50IHBlcm1pc3Npb25zIGluIHJ1bnRpbWUgZm9yIGAgK1xuICAgICAgYGFwcHMgd2hvc2UgdGFyZ2V0U2RrVmVyc2lvbiBpbiB0aGUgbWFuaWZlc3QgaXMgc2V0IHRvICR7TUlOX0FQSV9MRVZFTF9XSVRIX1BFUk1TX1NVUFBPUlR9IG9yIGFib3ZlLiBgICtcbiAgICAgIGBUaGUgY3VycmVudCAke3BrZ30gdGFyZ2V0U2RrVmVyc2lvbiBpcyAke3RhcmdldFNkayB8fCAndW5zZXQnfS5gKTtcbiAgfSBlbHNlIGlmIChhcGlMZXZlbCA8IE1JTl9BUElfTEVWRUxfV0lUSF9QRVJNU19TVVBQT1JUKSB7XG4gICAgbG9nLmluZm8oYFRoZSBkZXZpY2UncyBPUyBBUEkgbGV2ZWwgaXMgJHthcGlMZXZlbH0uIGAgK1xuICAgICAgYEl0IGlzIG9ubHkgcG9zc2libGUgdG8gZ3JhbnQgcGVybWlzc2lvbnMgb24gZGV2aWNlcyBydW5uaW5nIEFuZHJvaWQgNiBvciBhYm92ZS5gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHcmFudCBtdWx0aXBsZSBwZXJtaXNzaW9ucyBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqIFRoaXMgY2FsbCBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiBgZ3JhbnRQZXJtaXNzaW9uYCBvbmUsIHNpbmNlIGl0IGNvbWJpbmVzXG4gKiBtdWx0aXBsZSBgYWRiIHNoZWxsYCBjYWxscyBpbnRvIGEgc2luZ2xlIGNvbW1hbmQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBwZXJtaXNzaW9ucyAtIFRoZSBsaXN0IG9mIHBlcm1pc3Npb25zIHRvIGJlIGdyYW50ZWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGNoYW5naW5nIHBlcm1pc3Npb25zLlxuICovXG5tZXRob2RzLmdyYW50UGVybWlzc2lvbnMgPSBhc3luYyBmdW5jdGlvbiBncmFudFBlcm1pc3Npb25zIChwa2csIHBlcm1pc3Npb25zKSB7XG4gIC8vIEFzIGl0IGNvbnN1bWVzIG1vcmUgdGltZSBmb3IgZ3JhbnRpbmcgZWFjaCBwZXJtaXNzaW9uLFxuICAvLyB0cnlpbmcgdG8gZ3JhbnQgYWxsIHBlcm1pc3Npb24gYnkgZm9ybWluZyBlcXVpdmFsZW50IGNvbW1hbmQuXG4gIC8vIEFsc28sIGl0IGlzIG5lY2Vzc2FyeSB0byBzcGxpdCBsb25nIGNvbW1hbmRzIGludG8gY2h1bmtzLCBzaW5jZSB0aGUgbWF4aW11bSBsZW5ndGggb2ZcbiAgLy8gYWRiIHNoZWxsIGJ1ZmZlciBpcyBsaW1pdGVkXG4gIGxvZy5kZWJ1ZyhgR3JhbnRpbmcgcGVybWlzc2lvbnMgJHtKU09OLnN0cmluZ2lmeShwZXJtaXNzaW9ucyl9IHRvICcke3BrZ30nYCk7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbENodW5rcygocGVybSkgPT4gWydwbScsICdncmFudCcsIHBrZywgcGVybV0sIHBlcm1pc3Npb25zKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghSUdOT1JFRF9QRVJNX0VSUk9SUy5zb21lKChwYXR0ZXJuKSA9PiBwYXR0ZXJuLnRlc3QoZS5zdGRlcnIgfHwgZS5tZXNzYWdlKSkpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEdyYW50IHNpbmdsZSBwZXJtaXNzaW9uIGZvciB0aGUgcGFydGljdWxhciBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwZXJtaXNzaW9uIC0gVGhlIGZ1bGwgbmFtZSBvZiB0aGUgcGVybWlzc2lvbiB0byBiZSBncmFudGVkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBjaGFuZ2luZyBwZXJtaXNzaW9ucy5cbiAqL1xubWV0aG9kcy5ncmFudFBlcm1pc3Npb24gPSBhc3luYyBmdW5jdGlvbiBncmFudFBlcm1pc3Npb24gKHBrZywgcGVybWlzc2lvbikge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoWydwbScsICdncmFudCcsIHBrZywgcGVybWlzc2lvbl0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKCFOT1RfQ0hBTkdFQUJMRV9QRVJNX0VSUk9SLnRlc3QoZS5zdGRlcnIgfHwgZS5tZXNzYWdlKSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogUmV2b2tlIHNpbmdsZSBwZXJtaXNzaW9uIGZyb20gdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gcGVybWlzc2lvbiAtIFRoZSBmdWxsIG5hbWUgb2YgdGhlIHBlcm1pc3Npb24gdG8gYmUgcmV2b2tlZC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgY2hhbmdpbmcgcGVybWlzc2lvbnMuXG4gKi9cbm1ldGhvZHMucmV2b2tlUGVybWlzc2lvbiA9IGFzeW5jIGZ1bmN0aW9uIHJldm9rZVBlcm1pc3Npb24gKHBrZywgcGVybWlzc2lvbikge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoWydwbScsICdyZXZva2UnLCBwa2csIHBlcm1pc3Npb25dKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUi50ZXN0KGUuc3RkZXJyIHx8IGUubWVzc2FnZSkpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIGdyYW50ZWQgcGVybWlzc2lvbnMgZm9yIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtzdHJpbmd9IGNtZE91dHB1dCBbbnVsbF0gLSBPcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBjb21tYW5kIG91dHB1dCBvZlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZHVtcHN5cyBwYWNrYWdlXyBjb21tYW5kLiBJdCBtYXkgc3BlZWQgdXAgdGhlIG1ldGhvZCBleGVjdXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSBUaGUgbGlzdCBvZiBncmFudGVkIHBlcm1pc3Npb25zIG9yIGFuIGVtcHR5IGxpc3QuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGNoYW5naW5nIHBlcm1pc3Npb25zLlxuICovXG5tZXRob2RzLmdldEdyYW50ZWRQZXJtaXNzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGdldEdyYW50ZWRQZXJtaXNzaW9ucyAocGtnLCBjbWRPdXRwdXQgPSBudWxsKSB7XG4gIGxvZy5kZWJ1ZygnUmV0cmlldmluZyBncmFudGVkIHBlcm1pc3Npb25zJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGNtZE91dHB1dCB8fCBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdwYWNrYWdlJywgcGtnXSk7XG4gIHJldHVybiBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyhzdGRvdXQsIFsnaW5zdGFsbCcsICdydW50aW1lJ10sIHRydWUpO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBkZW5pZWQgcGVybWlzc2lvbnMgZm9yIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtzdHJpbmd9IGNtZE91dHB1dCBbbnVsbF0gLSBPcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBjb21tYW5kIG91dHB1dCBvZlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZHVtcHN5cyBwYWNrYWdlXyBjb21tYW5kLiBJdCBtYXkgc3BlZWQgdXAgdGhlIG1ldGhvZCBleGVjdXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSBUaGUgbGlzdCBvZiBkZW5pZWQgcGVybWlzc2lvbnMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqL1xubWV0aG9kcy5nZXREZW5pZWRQZXJtaXNzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGdldERlbmllZFBlcm1pc3Npb25zIChwa2csIGNtZE91dHB1dCA9IG51bGwpIHtcbiAgbG9nLmRlYnVnKCdSZXRyaWV2aW5nIGRlbmllZCBwZXJtaXNzaW9ucycpO1xuICBjb25zdCBzdGRvdXQgPSBjbWRPdXRwdXQgfHwgYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICByZXR1cm4gZXh0cmFjdE1hdGNoaW5nUGVybWlzc2lvbnMoc3Rkb3V0LCBbJ2luc3RhbGwnLCAncnVudGltZSddLCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIHJlcXVlc3RlZCBwZXJtaXNzaW9ucyBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gY21kT3V0cHV0IFtudWxsXSAtIE9wdGlvbmFsIHBhcmFtZXRlciBjb250YWluaW5nIGNvbW1hbmQgb3V0cHV0IG9mXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kdW1wc3lzIHBhY2thZ2VfIGNvbW1hbmQuIEl0IG1heSBzcGVlZCB1cCB0aGUgbWV0aG9kIGV4ZWN1dGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59IFRoZSBsaXN0IG9mIHJlcXVlc3RlZCBwZXJtaXNzaW9ucyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmdldFJlcVBlcm1pc3Npb25zID0gYXN5bmMgZnVuY3Rpb24gZ2V0UmVxUGVybWlzc2lvbnMgKHBrZywgY21kT3V0cHV0ID0gbnVsbCkge1xuICBsb2cuZGVidWcoJ1JldHJpZXZpbmcgcmVxdWVzdGVkIHBlcm1pc3Npb25zJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGNtZE91dHB1dCB8fCBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdwYWNrYWdlJywgcGtnXSk7XG4gIHJldHVybiBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyhzdGRvdXQsIFsncmVxdWVzdGVkJ10pO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBsb2NhdGlvbiBwcm92aWRlcnMgZm9yIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlPHN0cmluZ1tdPn0gVGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxvY2F0aW9uIHByb3ZpZGVycyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmdldExvY2F0aW9uUHJvdmlkZXJzID0gYXN5bmMgZnVuY3Rpb24gZ2V0TG9jYXRpb25Qcm92aWRlcnMgKCkge1xuICBpZiAoYXdhaXQgdGhpcy5nZXRBcGlMZXZlbCgpIDwgMzEpIHtcbiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83MDkzOTUwMy9zZXR0aW5ncy1zZWN1cmUtbG9jYXRpb24tcHJvdmlkZXJzLWFsbG93ZWQtcmV0dXJucy1udWxsLWluLWFuZHJvaWQtMTJcbiAgICBjb25zdCBzdGRvdXQgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ3NlY3VyZScsICdsb2NhdGlvbl9wcm92aWRlcnNfYWxsb3dlZCcpO1xuICAgIHJldHVybiBzdGRvdXQudHJpbSgpLnNwbGl0KCcsJylcbiAgICAgIC5tYXAoKHApID0+IHAudHJpbSgpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgfVxuXG4gIC8vIFRvIGVtdWxhdGUgdGhlIGxlZ2FjeSBiZWhhdmlvclxuICByZXR1cm4gXy5pbmNsdWRlcyhhd2FpdCB0aGlzLnNoZWxsKFsnY21kJywgJ2xvY2F0aW9uJywgJ2lzLWxvY2F0aW9uLWVuYWJsZWQnXSksICd0cnVlJylcbiAgICA/IFsnZ3BzJ11cbiAgICA6IFtdO1xufTtcblxuLyoqXG4gKiBUb2dnbGUgdGhlIHN0YXRlIG9mIEdQUyBsb2NhdGlvbiBwcm92aWRlci5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgLSBXaGV0aGVyIHRvIGVuYWJsZSAodHJ1ZSkgb3IgZGlzYWJsZSAoZmFsc2UpIHRoZSBHUFMgcHJvdmlkZXIuXG4gKi9cbm1ldGhvZHMudG9nZ2xlR1BTTG9jYXRpb25Qcm92aWRlciA9IGFzeW5jIGZ1bmN0aW9uIHRvZ2dsZUdQU0xvY2F0aW9uUHJvdmlkZXIgKGVuYWJsZWQpIHtcbiAgaWYgKGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDMxKSB7XG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzA5Mzk1MDMvc2V0dGluZ3Mtc2VjdXJlLWxvY2F0aW9uLXByb3ZpZGVycy1hbGxvd2VkLXJldHVybnMtbnVsbC1pbi1hbmRyb2lkLTEyXG4gICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdzZWN1cmUnLCAnbG9jYXRpb25fcHJvdmlkZXJzX2FsbG93ZWQnLCBgJHtlbmFibGVkID8gJysnIDogJy0nfWdwc2ApO1xuICAgIHJldHVybjtcbiAgfVxuICBhd2FpdCB0aGlzLnNoZWxsKFsnY21kJywgJ2xvY2F0aW9uJywgJ3NldC1sb2NhdGlvbi1lbmFibGVkJywgZW5hYmxlZCA/ICd0cnVlJyA6ICdmYWxzZSddKTtcbn07XG5cbi8qKlxuICogU2V0IGhpZGRlbiBhcGkgcG9saWN5IHRvIG1hbmFnZSBhY2Nlc3MgdG8gbm9uLVNESyBBUElzLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcHJldmlldy9yZXN0cmljdGlvbnMtbm9uLXNkay1pbnRlcmZhY2VzXG4gKlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZSAtIFRoZSBBUEkgZW5mb3JjZW1lbnQgcG9saWN5LlxuICogICAgIEZvciBBbmRyb2lkIFBcbiAqICAgICAwOiBEaXNhYmxlIG5vbi1TREsgQVBJIHVzYWdlIGRldGVjdGlvbi4gVGhpcyB3aWxsIGFsc28gZGlzYWJsZSBsb2dnaW5nLCBhbmQgYWxzbyBicmVhayB0aGUgc3RyaWN0IG1vZGUgQVBJLFxuICogICAgICAgIGRldGVjdE5vblNka0FwaVVzYWdlKCkuIE5vdCByZWNvbW1lbmRlZC5cbiAqICAgICAxOiBcIkp1c3Qgd2FyblwiIC0gcGVybWl0IGFjY2VzcyB0byBhbGwgbm9uLVNESyBBUElzLCBidXQga2VlcCB3YXJuaW5ncyBpbiB0aGUgbG9nLlxuICogICAgICAgIFRoZSBzdHJpY3QgbW9kZSBBUEkgd2lsbCBrZWVwIHdvcmtpbmcuXG4gKiAgICAgMjogRGlzYWxsb3cgdXNhZ2Ugb2YgZGFyayBncmV5IGFuZCBibGFjayBsaXN0ZWQgQVBJcy5cbiAqICAgICAzOiBEaXNhbGxvdyB1c2FnZSBvZiBibGFja2xpc3RlZCBBUElzLCBidXQgYWxsb3cgdXNhZ2Ugb2YgZGFyayBncmV5IGxpc3RlZCBBUElzLlxuICpcbiAqICAgICBGb3IgQW5kcm9pZCBRXG4gKiAgICAgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcHJldmlldy9ub24tc2RrLXEjZW5hYmxlLW5vbi1zZGstYWNjZXNzXG4gKiAgICAgMDogRGlzYWJsZSBhbGwgZGV0ZWN0aW9uIG9mIG5vbi1TREsgaW50ZXJmYWNlcy4gVXNpbmcgdGhpcyBzZXR0aW5nIGRpc2FibGVzIGFsbCBsb2cgbWVzc2FnZXMgZm9yIG5vbi1TREsgaW50ZXJmYWNlIHVzYWdlXG4gKiAgICAgICAgYW5kIHByZXZlbnRzIHlvdSBmcm9tIHRlc3RpbmcgeW91ciBhcHAgdXNpbmcgdGhlIFN0cmljdE1vZGUgQVBJLiBUaGlzIHNldHRpbmcgaXMgbm90IHJlY29tbWVuZGVkLlxuICogICAgIDE6IEVuYWJsZSBhY2Nlc3MgdG8gYWxsIG5vbi1TREsgaW50ZXJmYWNlcywgYnV0IHByaW50IGxvZyBtZXNzYWdlcyB3aXRoIHdhcm5pbmdzIGZvciBhbnkgbm9uLVNESyBpbnRlcmZhY2UgdXNhZ2UuXG4gKiAgICAgICAgVXNpbmcgdGhpcyBzZXR0aW5nIGFsc28gYWxsb3dzIHlvdSB0byB0ZXN0IHlvdXIgYXBwIHVzaW5nIHRoZSBTdHJpY3RNb2RlIEFQSS5cbiAqICAgICAyOiBEaXNhbGxvdyB1c2FnZSBvZiBub24tU0RLIGludGVyZmFjZXMgdGhhdCBiZWxvbmcgdG8gZWl0aGVyIHRoZSBibGFjayBsaXN0XG4gKiAgICAgICAgb3IgdG8gYSByZXN0cmljdGVkIGdyZXlsaXN0IGZvciB5b3VyIHRhcmdldCBBUEkgbGV2ZWwuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSBpZ25vcmVFcnJvciBbZmFsc2VdIFdoZXRoZXIgdG8gaWdub3JlIGFuIGV4Y2VwdGlvbiBpbiAnYWRiIHNoZWxsIHNldHRpbmdzIHB1dCBnbG9iYWwnIGNvbW1hbmRcbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3IgYW5kIGlnbm9yZUVycm9yIHdhcyB0cnVlIHdoaWxlIGV4ZWN1dGluZyAnYWRiIHNoZWxsIHNldHRpbmdzIHB1dCBnbG9iYWwnXG4gKiAgICAgICAgICAgICAgICAgY29tbWFuZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuc2V0SGlkZGVuQXBpUG9saWN5ID0gYXN5bmMgZnVuY3Rpb24gc2V0SGlkZGVuQXBpUG9saWN5ICh2YWx1ZSwgaWdub3JlRXJyb3IgPSBmYWxzZSkge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoSElEREVOX0FQSV9QT0xJQ1lfS0VZUy5tYXAoKGspID0+IGBzZXR0aW5ncyBwdXQgZ2xvYmFsICR7a30gJHt2YWx1ZX1gKS5qb2luKCc7JykpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKCFpZ25vcmVFcnJvcikge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgbG9nLmluZm8oYEZhaWxlZCB0byBzZXQgc2V0dGluZyBrZXlzICcke0hJRERFTl9BUElfUE9MSUNZX0tFWVN9JyB0byAnJHt2YWx1ZX0nLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmVzZXQgYWNjZXNzIHRvIG5vbi1TREsgQVBJcyB0byBpdHMgZGVmYXVsdCBzZXR0aW5nLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcHJldmlldy9yZXN0cmljdGlvbnMtbm9uLXNkay1pbnRlcmZhY2VzXG4gKlxuICogQHBhcmFtIHtib29sZWFufSBpZ25vcmVFcnJvciBbZmFsc2VdIFdoZXRoZXIgdG8gaWdub3JlIGFuIGV4Y2VwdGlvbiBpbiAnYWRiIHNoZWxsIHNldHRpbmdzIGRlbGV0ZSBnbG9iYWwnIGNvbW1hbmRcbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3IgYW5kIGlnbm9yZUVycm9yIHdhcyB0cnVlIHdoaWxlIGV4ZWN1dGluZyAnYWRiIHNoZWxsIHNldHRpbmdzIGRlbGV0ZSBnbG9iYWwnXG4gKiAgICAgICAgICAgICAgICAgY29tbWFuZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuc2V0RGVmYXVsdEhpZGRlbkFwaVBvbGljeSA9IGFzeW5jIGZ1bmN0aW9uIHNldERlZmF1bHRIaWRkZW5BcGlQb2xpY3kgKGlnbm9yZUVycm9yID0gZmFsc2UpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKEhJRERFTl9BUElfUE9MSUNZX0tFWVMubWFwKChrKSA9PiBgc2V0dGluZ3MgZGVsZXRlIGdsb2JhbCAke2t9YCkuam9pbignOycpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghaWdub3JlRXJyb3IpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGxvZy5pbmZvKGBGYWlsZWQgdG8gZGVsZXRlIGtleXMgJyR7SElEREVOX0FQSV9QT0xJQ1lfS0VZU30nLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogU3RvcCB0aGUgcGFydGljdWxhciBwYWNrYWdlIGlmIGl0IGlzIHJ1bm5pbmcgYW5kIGNsZWFycyBpdHMgYXBwbGljYXRpb24gZGF0YS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKi9cbm1ldGhvZHMuc3RvcEFuZENsZWFyID0gYXN5bmMgZnVuY3Rpb24gc3RvcEFuZENsZWFyIChwa2cpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLmZvcmNlU3RvcChwa2cpO1xuICAgIGF3YWl0IHRoaXMuY2xlYXIocGtnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHN0b3AgYW5kIGNsZWFyICR7cGtnfS4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBpbnB1dCBtZXRob2RzIChJTUVzKSBmb3IgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge0FycmF5LjxTdHJpbmc+fSBUaGUgbGlzdCBvZiBJTUUgbmFtZXMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqL1xubWV0aG9kcy5hdmFpbGFibGVJTUVzID0gYXN5bmMgZnVuY3Rpb24gYXZhaWxhYmxlSU1FcyAoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGdldElNRUxpc3RGcm9tT3V0cHV0KGF3YWl0IHRoaXMuc2hlbGwoWydpbWUnLCAnbGlzdCcsICctYSddKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgYXZhaWxhYmxlIElNRSdzLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIGxpc3Qgb2YgZW5hYmxlZCBpbnB1dCBtZXRob2RzIChJTUVzKSBmb3IgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge0FycmF5LjxTdHJpbmc+fSBUaGUgbGlzdCBvZiBlbmFibGVkIElNRSBuYW1lcyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmVuYWJsZWRJTUVzID0gYXN5bmMgZnVuY3Rpb24gZW5hYmxlZElNRXMgKCkge1xuICB0cnkge1xuICAgIHJldHVybiBnZXRJTUVMaXN0RnJvbU91dHB1dChhd2FpdCB0aGlzLnNoZWxsKFsnaW1lJywgJ2xpc3QnXSkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBnZXR0aW5nIGVuYWJsZWQgSU1FJ3MuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFbmFibGUgdGhlIHBhcnRpY3VsYXIgaW5wdXQgbWV0aG9kIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW1lSWQgLSBPbmUgb2YgZXhpc3RpbmcgSU1FIGlkcy5cbiAqL1xubWV0aG9kcy5lbmFibGVJTUUgPSBhc3luYyBmdW5jdGlvbiBlbmFibGVJTUUgKGltZUlkKSB7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydpbWUnLCAnZW5hYmxlJywgaW1lSWRdKTtcbn07XG5cbi8qKlxuICogRGlzYWJsZSB0aGUgcGFydGljdWxhciBpbnB1dCBtZXRob2Qgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbWVJZCAtIE9uZSBvZiBleGlzdGluZyBJTUUgaWRzLlxuICovXG5tZXRob2RzLmRpc2FibGVJTUUgPSBhc3luYyBmdW5jdGlvbiBkaXNhYmxlSU1FIChpbWVJZCkge1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnaW1lJywgJ2Rpc2FibGUnLCBpbWVJZF0pO1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIHBhcnRpY3VsYXIgaW5wdXQgbWV0aG9kIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW1lSWQgLSBPbmUgb2YgZXhpc3RpbmcgSU1FIGlkcy5cbiAqL1xubWV0aG9kcy5zZXRJTUUgPSBhc3luYyBmdW5jdGlvbiBzZXRJTUUgKGltZUlkKSB7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydpbWUnLCAnc2V0JywgaW1lSWRdKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IGlucHV0IG1ldGhvZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7P3N0cmluZ30gVGhlIG5hbWUgb2YgdGhlIGRlZmF1bHQgaW5wdXQgbWV0aG9kXG4gKi9cbm1ldGhvZHMuZGVmYXVsdElNRSA9IGFzeW5jIGZ1bmN0aW9uIGRlZmF1bHRJTUUgKCkge1xuICB0cnkge1xuICAgIGxldCBlbmdpbmUgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ3NlY3VyZScsICdkZWZhdWx0X2lucHV0X21ldGhvZCcpO1xuICAgIGlmIChlbmdpbmUgPT09ICdudWxsJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBlbmdpbmUudHJpbSgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBnZXR0aW5nIGRlZmF1bHQgSU1FLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogU2VuZCB0aGUgcGFydGljdWxhciBrZXljb2RlIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGtleWNvZGUgLSBUaGUgYWN0dWFsIGtleSBjb2RlIHRvIGJlIHNlbnQuXG4gKi9cbm1ldGhvZHMua2V5ZXZlbnQgPSBhc3luYyBmdW5jdGlvbiBrZXlldmVudCAoa2V5Y29kZSkge1xuICAvLyBrZXljb2RlIG11c3QgYmUgYW4gaW50LlxuICBsZXQgY29kZSA9IHBhcnNlSW50KGtleWNvZGUsIDEwKTtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ2lucHV0JywgJ2tleWV2ZW50JywgY29kZV0pO1xufTtcblxuLyoqXG4gKiBTZW5kIHRoZSBwYXJ0aWN1bGFyIHRleHQgb3IgYSBudW1iZXIgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogVGhlIHRleHQgZ2V0cyBwcm9wZXJseSBlc2NhcGVkIGJlZm9yZSBiZWluZyBwYXNzZWQgdG8gQURCLlxuICogTm9vcCBpZiB0aGUgdGV4dCBpcyBlbXB0eS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHRleHQgLSBUaGUgYWN0dWFsIHRleHQgdG8gYmUgc2VudC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBpdCBpcyBpbXBvc3NpYmxlIHRvIGVzY2FwZSB0aGUgZ2l2ZW4gc3RyaW5nXG4gKi9cbm1ldGhvZHMuaW5wdXRUZXh0ID0gYXN5bmMgZnVuY3Rpb24gaW5wdXRUZXh0ICh0ZXh0KSB7XG4gIGlmICh0ZXh0ID09PSAnJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IG9yaWdpbmFsU3RyID0gYCR7dGV4dH1gO1xuICBjb25zdCBlc2NhcGVkVGV4dCA9IG9yaWdpbmFsU3RyLnJlcGxhY2UoL1xcJC9nLCAnXFxcXCQnKS5yZXBsYWNlKC8gL2csICclcycpO1xuICBsZXQgYXJncyA9IFsnaW5wdXQnLCAndGV4dCcsIG9yaWdpbmFsU3RyXTtcbiAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjU3OTE0MjMvYWRiLXNoZWxsLWlucHV0LXRleHQtZG9lcy1ub3QtdGFrZS1hbXBlcnNhbmQtY2hhcmFjdGVyLzI1NzkxNDk4XG4gIGNvbnN0IGFkYklucHV0RXNjYXBlUGF0dGVybiA9IC9bKCk8Pnw7JipcXFxcfl5cIiddL2c7XG4gIGlmIChlc2NhcGVkVGV4dCAhPT0gb3JpZ2luYWxTdHIgfHwgYWRiSW5wdXRFc2NhcGVQYXR0ZXJuLnRlc3Qob3JpZ2luYWxTdHIpKSB7XG4gICAgaWYgKF8uZXZlcnkoWydcIicsIGAnYF0sIChjKSA9PiBvcmlnaW5hbFN0ci5pbmNsdWRlcyhjKSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYERpZCBub3Qga25vdyBob3cgdG8gZXNjYXBlIGEgc3RyaW5nIHRoYXQgY29udGFpbnMgYm90aCB0eXBlcyBvZiBxdW90ZXMgKFwiIGFuZCAnKWBcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHEgPSBvcmlnaW5hbFN0ci5pbmNsdWRlcygnXCInKSA/IGAnYCA6ICdcIic7XG4gICAgYXJncyA9IFtgaW5wdXQgdGV4dCAke3F9JHtlc2NhcGVkVGV4dH0ke3F9YF07XG4gIH1cbiAgYXdhaXQgdGhpcy5zaGVsbChhcmdzKTtcbn07XG5cbi8qKlxuICogQ2xlYXIgdGhlIGFjdGl2ZSB0ZXh0IGZpZWxkIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdCBieSBzZW5kaW5nXG4gKiBzcGVjaWFsIGtleWV2ZW50cyB0byBpdC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIFsxMDBdIC0gVGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSB0ZXh0IGluIHRoZSBmaWVsZCB0byBiZSBjbGVhcmVkLlxuICovXG5tZXRob2RzLmNsZWFyVGV4dEZpZWxkID0gYXN5bmMgZnVuY3Rpb24gY2xlYXJUZXh0RmllbGQgKGxlbmd0aCA9IDEwMCkge1xuICAvLyBhc3N1bWVzIHRoYXQgdGhlIEVkaXRUZXh0IGZpZWxkIGFscmVhZHkgaGFzIGZvY3VzXG4gIGxvZy5kZWJ1ZyhgQ2xlYXJpbmcgdXAgdG8gJHtsZW5ndGh9IGNoYXJhY3RlcnNgKTtcbiAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgYXJncyA9IFsnaW5wdXQnLCAna2V5ZXZlbnQnXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIC8vIHdlIGNhbm5vdCBrbm93IHdoZXJlIHRoZSBjdXJzb3IgaXMgaW4gdGhlIHRleHQgZmllbGQsIHNvIGRlbGV0ZSBib3RoIGJlZm9yZVxuICAgIC8vIGFuZCBhZnRlciBzbyB0aGF0IHdlIGdldCByaWQgb2YgZXZlcnl0aGluZ1xuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3ZpZXcvS2V5RXZlbnQuaHRtbCNLRVlDT0RFX0RFTFxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3ZpZXcvS2V5RXZlbnQuaHRtbCNLRVlDT0RFX0ZPUldBUkRfREVMXG4gICAgYXJncy5wdXNoKCc2NycsICcxMTInKTtcbiAgfVxuICBhd2FpdCB0aGlzLnNoZWxsKGFyZ3MpO1xufTtcblxuLyoqXG4gKiBTZW5kIHRoZSBzcGVjaWFsIGtleWNvZGUgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0IGluIG9yZGVyIHRvIGxvY2sgaXQuXG4gKi9cbm1ldGhvZHMubG9jayA9IGFzeW5jIGZ1bmN0aW9uIGxvY2sgKCkge1xuICBpZiAoYXdhaXQgdGhpcy5pc1NjcmVlbkxvY2tlZCgpKSB7XG4gICAgbG9nLmRlYnVnKCdTY3JlZW4gaXMgYWxyZWFkeSBsb2NrZWQuIERvaW5nIG5vdGhpbmcuJyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxvZy5kZWJ1ZygnUHJlc3NpbmcgdGhlIEtFWUNPREVfUE9XRVIgYnV0dG9uIHRvIGxvY2sgc2NyZWVuJyk7XG4gIGF3YWl0IHRoaXMua2V5ZXZlbnQoMjYpO1xuXG4gIGNvbnN0IHRpbWVvdXRNcyA9IDUwMDA7XG4gIHRyeSB7XG4gICAgYXdhaXQgd2FpdEZvckNvbmRpdGlvbihhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmlzU2NyZWVuTG9ja2VkKCksIHtcbiAgICAgIHdhaXRNczogdGltZW91dE1zLFxuICAgICAgaW50ZXJ2YWxNczogNTAwLFxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZGV2aWNlIHNjcmVlbiBpcyBzdGlsbCBsb2NrZWQgYWZ0ZXIgJHt0aW1lb3V0TXN9bXMgdGltZW91dGApO1xuICB9XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIHNwZWNpYWwga2V5Y29kZSB0byB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgaW4gb3JkZXIgdG8gZW11bGF0ZVxuICogQmFjayBidXR0b24gdGFwLlxuICovXG5tZXRob2RzLmJhY2sgPSBhc3luYyBmdW5jdGlvbiBiYWNrICgpIHtcbiAgbG9nLmRlYnVnKCdQcmVzc2luZyB0aGUgQkFDSyBidXR0b24nKTtcbiAgYXdhaXQgdGhpcy5rZXlldmVudCg0KTtcbn07XG5cbi8qKlxuICogU2VuZCB0aGUgc3BlY2lhbCBrZXljb2RlIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdCBpbiBvcmRlciB0byBlbXVsYXRlXG4gKiBIb21lIGJ1dHRvbiB0YXAuXG4gKi9cbm1ldGhvZHMuZ29Ub0hvbWUgPSBhc3luYyBmdW5jdGlvbiBnb1RvSG9tZSAoKSB7XG4gIGxvZy5kZWJ1ZygnUHJlc3NpbmcgdGhlIEhPTUUgYnV0dG9uJyk7XG4gIGF3YWl0IHRoaXMua2V5ZXZlbnQoMyk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIGFjdHVhbCBwYXRoIHRvIGFkYiBleGVjdXRhYmxlLlxuICovXG5tZXRob2RzLmdldEFkYlBhdGggPSBmdW5jdGlvbiBnZXRBZGJQYXRoICgpIHtcbiAgcmV0dXJuIHRoaXMuZXhlY3V0YWJsZS5wYXRoO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSBjdXJyZW50IHNjcmVlbiBvcmllbnRhdGlvbiBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgY3VycmVudCBvcmllbnRhdGlvbiBlbmNvZGVkIGFzIGFuIGludGVnZXIgbnVtYmVyLlxuICovXG5tZXRob2RzLmdldFNjcmVlbk9yaWVudGF0aW9uID0gYXN5bmMgZnVuY3Rpb24gZ2V0U2NyZWVuT3JpZW50YXRpb24gKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAnaW5wdXQnXSk7XG4gIHJldHVybiBnZXRTdXJmYWNlT3JpZW50YXRpb24oc3Rkb3V0KTtcbn07XG5cbi8qKlxuICogU2VuZCBhbiBhcmJpdHJhcnkgVGVsbmV0IGNvbW1hbmQgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21tYW5kIC0gVGhlIGNvbW1hbmQgdG8gYmUgc2VudC5cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBhY3R1YWwgb3V0cHV0IG9mIHRoZSBnaXZlbiBjb21tYW5kLlxuICovXG5tZXRob2RzLnNlbmRUZWxuZXRDb21tYW5kID0gYXN5bmMgZnVuY3Rpb24gc2VuZFRlbG5ldENvbW1hbmQgKGNvbW1hbmQpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY0VtdUNvbnNvbGVDb21tYW5kKGNvbW1hbmQsIHtwb3J0OiBhd2FpdCB0aGlzLmdldEVtdWxhdG9yUG9ydCgpfSk7XG59O1xuXG4vKipcbiAqIENoZWNrIHRoZSBzdGF0ZSBvZiBBaXJwbGFuZSBtb2RlIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIEFpcnBsYW5lIG1vZGUgaXMgZW5hYmxlZC5cbiAqL1xubWV0aG9kcy5pc0FpcnBsYW5lTW9kZU9uID0gYXN5bmMgZnVuY3Rpb24gaXNBaXJwbGFuZU1vZGVPbiAoKSB7XG4gIGNvbnN0IHN0ZG91dCA9IGF3YWl0IHRoaXMuZ2V0U2V0dGluZygnZ2xvYmFsJywgJ2FpcnBsYW5lX21vZGVfb24nKTtcbiAgcmV0dXJuIHBhcnNlSW50KHN0ZG91dCwgMTApICE9PSAwO1xuICAvLyBBbHRlcm5hdGl2ZWx5IGZvciBBbmRyb2lkIDExKzpcbiAgLy8gcmV0dXJuIChhd2FpdCB0aGlzLnNoZWxsKFsnY21kJywgJ2Nvbm5lY3Rpdml0eScsICdhaXJwbGFuZS1tb2RlJ10pKS5zdGRvdXQudHJpbSgpID09PSAnZW5hYmxlZCc7XG59O1xuXG4vKipcbiAqIENoYW5nZSB0aGUgc3RhdGUgb2YgQWlycGxhbmUgbW9kZSBpbiBTZXR0aW5ncyBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSBvbiAtIFRydWUgdG8gZW5hYmxlIHRoZSBBaXJwbGFuZSBtb2RlIGluIFNldHRpbmdzIGFuZCBmYWxzZSB0byBkaXNhYmxlIGl0LlxuICovXG5tZXRob2RzLnNldEFpcnBsYW5lTW9kZSA9IGFzeW5jIGZ1bmN0aW9uIHNldEFpcnBsYW5lTW9kZSAob24pIHtcbiAgaWYgKGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDMwKSB7XG4gICAgLy8gVGhpcyByZXF1aXJlcyB0byBjYWxsIGJyb2FkY2FzdEFpcnBsYW5lTW9kZSBhZnRlcndhcmRzIHRvIGFwcGx5XG4gICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdnbG9iYWwnLCAnYWlycGxhbmVfbW9kZV9vbicsIG9uID8gMSA6IDApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGF3YWl0IHRoaXMuc2hlbGwoWydjbWQnLCAnY29ubmVjdGl2aXR5JywgJ2FpcnBsYW5lLW1vZGUnLCBvbiA/ICdlbmFibGUnIDogJ2Rpc2FibGUnXSk7XG59O1xuXG4vKipcbiAqIEJyb2FkY2FzdCB0aGUgc3RhdGUgb2YgQWlycGxhbmUgbW9kZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHtAbGluayAjc2V0QWlycGxhbmVNb2RlfSwgb3RoZXJ3aXNlXG4gKiB0aGUgbW9kZSBjaGFuZ2UgaXMgbm90IGdvaW5nIHRvIGJlIGFwcGxpZWQgZm9yIHRoZSBkZXZpY2UuXG4gKiAhIFRoaXMgQVBJIHJlcXVpcmVzIHJvb3Qgc2luY2UgQW5kcm9pZCBBUEkgMjQuIFNpbmNlIEFQSSAzMFxuICogdGhlcmUgaXMgYSBkZWRpY2F0ZWQgYWRiIGNvbW1hbmQgdG8gY2hhbmdlIGFpcnBsYW5lIG1vZGUgc3RhdGUsIHdoaWNoXG4gKiBkb2VzIG5vdCByZXF1aXJlIHRvIGNhbGwgdGhpcyBvbmUgYWZ0ZXJ3YXJkcy5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uIC0gVHJ1ZSB0byBicm9hZGNhc3QgZW5hYmxlIGFuZCBmYWxzZSB0byBicm9hZGNhc3QgZGlzYWJsZS5cbiAqL1xubWV0aG9kcy5icm9hZGNhc3RBaXJwbGFuZU1vZGUgPSBhc3luYyBmdW5jdGlvbiBicm9hZGNhc3RBaXJwbGFuZU1vZGUgKG9uKSB7XG4gIGNvbnN0IGFyZ3MgPSBbXG4gICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgJy1hJywgJ2FuZHJvaWQuaW50ZW50LmFjdGlvbi5BSVJQTEFORV9NT0RFJyxcbiAgICAnLS1leicsICdzdGF0ZScsIG9uID8gJ3RydWUnIDogJ2ZhbHNlJyxcbiAgXTtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKGFyZ3MpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0vaXNzdWVzLzE3NDIyXG4gICAgaWYgKF8uaW5jbHVkZXMoZS5zdGRlcnIsICdTZWN1cml0eUV4Y2VwdGlvbicpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnNoZWxsKGFyZ3MsIHtwcml2aWxlZ2VkOiB0cnVlfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gY2F0Y2ggKGlnbikge31cbiAgICB9XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGVjayB0aGUgc3RhdGUgb2YgV2lGaSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBXaUZpIGlzIGVuYWJsZWQuXG4gKi9cbm1ldGhvZHMuaXNXaWZpT24gPSBhc3luYyBmdW5jdGlvbiBpc1dpZmlPbiAoKSB7XG4gIGNvbnN0IHN0ZG91dCA9IGF3YWl0IHRoaXMuZ2V0U2V0dGluZygnZ2xvYmFsJywgJ3dpZmlfb24nKTtcbiAgcmV0dXJuIChwYXJzZUludChzdGRvdXQsIDEwKSAhPT0gMCk7XG4gIC8vIEFsdGVybmF0aXZlIGZvciBBbmRyb2lkIDExKzpcbiAgLy8gcmV0dXJuIChhd2FpdCB0aGlzLnNoZWxsKFsnY21kJywgJ3dpZmknLCAnc3RhdHVzJ10pLnN0ZG91dC5pbmNsdWRlcygnV2lmaSBpcyBlbmFibGVkJykpO1xufTtcblxuLyoqXG4gKiBDaGVjayB0aGUgc3RhdGUgb2YgRGF0YSB0cmFuc2ZlciBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBEYXRhIHRyYW5zZmVyIGlzIGVuYWJsZWQuXG4gKi9cbm1ldGhvZHMuaXNEYXRhT24gPSBhc3luYyBmdW5jdGlvbiBpc0RhdGFPbiAoKSB7XG4gIGNvbnN0IHN0ZG91dCA9IGF3YWl0IHRoaXMuZ2V0U2V0dGluZygnZ2xvYmFsJywgJ21vYmlsZV9kYXRhJyk7XG4gIHJldHVybiAocGFyc2VJbnQoc3Rkb3V0LCAxMCkgIT09IDApO1xufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIFdpRmkgYW5kL29yIERhdGEgdHJhbnNmZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gd2lmaSAtIFRydWUgdG8gZW5hYmxlIGFuZCBmYWxzZSB0byBkaXNhYmxlIFdpRmkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGRhdGEgLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBEYXRhIHRyYW5zZmVyLlxuICogQHBhcmFtIHtib29sZWFufSBpc0VtdWxhdG9yIFtmYWxzZV0gLSBTZXQgaXQgdG8gdHJ1ZSBpZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgYW4gZW11bGF0b3IgcmF0aGVyIHRoYW4gYSByZWFsIGRldmljZS5cbiAqL1xubWV0aG9kcy5zZXRXaWZpQW5kRGF0YSA9IGFzeW5jIGZ1bmN0aW9uIHNldFdpZmlBbmREYXRhICh7d2lmaSwgZGF0YX0sIGlzRW11bGF0b3IgPSBmYWxzZSkge1xuICBpZiAodXRpbC5oYXNWYWx1ZSh3aWZpKSkge1xuICAgIGF3YWl0IHRoaXMuc2V0V2lmaVN0YXRlKHdpZmksIGlzRW11bGF0b3IpO1xuICB9XG4gIGlmICh1dGlsLmhhc1ZhbHVlKGRhdGEpKSB7XG4gICAgYXdhaXQgdGhpcy5zZXREYXRhU3RhdGUoZGF0YSwgaXNFbXVsYXRvcik7XG4gIH1cbn07XG5cbi8qKlxuICogQ2hlY2sgdGhlIHN0YXRlIG9mIGFuaW1hdGlvbiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhdCBsZWFzdCBvbmUgb2YgYW5pbWF0aW9uIHNjYWxlIHNldHRpbmdzXG4gKiAgICAgICAgICAgICAgICAgICBpcyBub3QgZXF1YWwgdG8gJzAuMCcuXG4gKi9cbm1ldGhvZHMuaXNBbmltYXRpb25PbiA9IGFzeW5jIGZ1bmN0aW9uIGlzQW5pbWF0aW9uT24gKCkge1xuICBsZXQgYW5pbWF0b3JfZHVyYXRpb25fc2NhbGUgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICdhbmltYXRvcl9kdXJhdGlvbl9zY2FsZScpO1xuICBsZXQgdHJhbnNpdGlvbl9hbmltYXRpb25fc2NhbGUgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICd0cmFuc2l0aW9uX2FuaW1hdGlvbl9zY2FsZScpO1xuICBsZXQgd2luZG93X2FuaW1hdGlvbl9zY2FsZSA9IGF3YWl0IHRoaXMuZ2V0U2V0dGluZygnZ2xvYmFsJywgJ3dpbmRvd19hbmltYXRpb25fc2NhbGUnKTtcbiAgcmV0dXJuIF8uc29tZShbYW5pbWF0b3JfZHVyYXRpb25fc2NhbGUsIHRyYW5zaXRpb25fYW5pbWF0aW9uX3NjYWxlLCB3aW5kb3dfYW5pbWF0aW9uX3NjYWxlXSxcbiAgICAgICAgICAgICAgICAoc2V0dGluZykgPT4gc2V0dGluZyAhPT0gJzAuMCcpO1xufTtcblxuLyoqXG4gKiBGb3JjZWZ1bGx5IHJlY3Vyc2l2ZWx5IHJlbW92ZSBhIHBhdGggb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogQmUgY2FyZWZ1bCB3aGlsZSBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGggdG8gYmUgcmVtb3ZlZCByZWN1cnNpdmVseS5cbiAqL1xubWV0aG9kcy5yaW1yYWYgPSBhc3luYyBmdW5jdGlvbiByaW1yYWYgKHBhdGgpIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ3JtJywgJy1yZicsIHBhdGhdKTtcbn07XG5cbi8qKlxuICogU2VuZCBhIGZpbGUgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbFBhdGggLSBUaGUgcGF0aCB0byB0aGUgZmlsZSBvbiB0aGUgbG9jYWwgZmlsZSBzeXN0ZW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVtb3RlUGF0aCAtIFRoZSBkZXN0aW5hdGlvbiBwYXRoIG9uIHRoZSByZW1vdGUgZGV2aWNlLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdHMgLSBBZGRpdGlvbmFsIG9wdGlvbnMgbWFwcGluZy4gU2VlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vbm9kZS10ZWVuX3Byb2Nlc3MsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIF9leGVjXyBtZXRob2Qgb3B0aW9ucywgZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgYXZhaWxhYmxlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuXG4gKi9cbm1ldGhvZHMucHVzaCA9IGFzeW5jIGZ1bmN0aW9uIHB1c2ggKGxvY2FsUGF0aCwgcmVtb3RlUGF0aCwgb3B0cykge1xuICBhd2FpdCB0aGlzLm1rZGlyKHBhdGgucG9zaXguZGlybmFtZShyZW1vdGVQYXRoKSk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ3B1c2gnLCBsb2NhbFBhdGgsIHJlbW90ZVBhdGhdLCBvcHRzKTtcbn07XG5cbi8qKlxuICogUmVjZWl2ZSBhIGZpbGUgZnJvbSB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHJlbW90ZVBhdGggLSBUaGUgc291cmNlIHBhdGggb24gdGhlIHJlbW90ZSBkZXZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxQYXRoIC0gVGhlIGRlc3RpbmF0aW9uIHBhdGggdG8gdGhlIGZpbGUgb24gdGhlIGxvY2FsIGZpbGUgc3lzdGVtLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdHMgLSBBZGRpdGlvbmFsIG9wdGlvbnMgbWFwcGluZy4gU2VlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vbm9kZS10ZWVuX3Byb2Nlc3MsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIF9leGVjXyBtZXRob2Qgb3B0aW9ucywgZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgYXZhaWxhYmxlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuXG4gKi9cbm1ldGhvZHMucHVsbCA9IGFzeW5jIGZ1bmN0aW9uIHB1bGwgKHJlbW90ZVBhdGgsIGxvY2FsUGF0aCwgb3B0cyA9IHt9KSB7XG4gIC8vIHB1bGwgZm9sZGVyIGNhbiB0YWtlIG1vcmUgdGltZSwgaW5jcmVhc2luZyB0aW1lIG91dCB0byA2MCBzZWNzXG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ3B1bGwnLCByZW1vdGVQYXRoLCBsb2NhbFBhdGhdLCB7Li4ub3B0cywgdGltZW91dDogb3B0cy50aW1lb3V0ID8/IDYwMDAwfSk7XG59O1xuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIHByb2Nlc3Mgd2l0aCB0aGUgcGFydGljdWxhciBuYW1lIGlzIHJ1bm5pbmcgb24gdGhlIGRldmljZVxuICogdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvY2Vzc05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcHJvY2VzcyB0byBiZSBjaGVja2VkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2l2ZW4gcHJvY2VzcyBpcyBydW5uaW5nLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBnaXZlbiBwcm9jZXNzIG5hbWUgaXMgbm90IGEgdmFsaWQgY2xhc3MgbmFtZS5cbiAqL1xubWV0aG9kcy5wcm9jZXNzRXhpc3RzID0gYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0V4aXN0cyAocHJvY2Vzc05hbWUpIHtcbiAgcmV0dXJuICFfLmlzRW1wdHkoYXdhaXQgdGhpcy5nZXRQSURzQnlOYW1lKHByb2Nlc3NOYW1lKSk7XG59O1xuXG4vKipcbiAqIEdldCBUQ1AgcG9ydCBmb3J3YXJkaW5nIHdpdGggYWRiIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIEByZXR1cm4ge0FycmF5LjxTdHJpbmc+fSBUaGUgb3V0cHV0IG9mIHRoZSBjb3JyZXNwb25kaW5nIGFkYiBjb21tYW5kLiBBbiBhcnJheSBjb250YWlucyBlYWNoIGZvcndhcmRpbmcgbGluZSBvZiBvdXRwdXRcbiAqL1xubWV0aG9kcy5nZXRGb3J3YXJkTGlzdCA9IGFzeW5jIGZ1bmN0aW9uIGdldEZvcndhcmRMaXN0ICgpIHtcbiAgbG9nLmRlYnVnKGBMaXN0IGZvcndhcmRpbmcgcG9ydHNgKTtcbiAgY29uc3QgY29ubmVjdGlvbnMgPSBhd2FpdCB0aGlzLmFkYkV4ZWMoWydmb3J3YXJkJywgJy0tbGlzdCddKTtcbiAgcmV0dXJuIGNvbm5lY3Rpb25zLnNwbGl0KEVPTCkuZmlsdGVyKChsaW5lKSA9PiBCb29sZWFuKGxpbmUudHJpbSgpKSk7XG59O1xuXG4vKipcbiAqIFNldHVwIFRDUCBwb3J0IGZvcndhcmRpbmcgd2l0aCBhZGIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gc3lzdGVtUG9ydCAtIFRoZSBudW1iZXIgb2YgdGhlIGxvY2FsIHN5c3RlbSBwb3J0LlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBkZXZpY2VQb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgcmVtb3RlIGRldmljZSBwb3J0LlxuICovXG5tZXRob2RzLmZvcndhcmRQb3J0ID0gYXN5bmMgZnVuY3Rpb24gZm9yd2FyZFBvcnQgKHN5c3RlbVBvcnQsIGRldmljZVBvcnQpIHtcbiAgbG9nLmRlYnVnKGBGb3J3YXJkaW5nIHN5c3RlbTogJHtzeXN0ZW1Qb3J0fSB0byBkZXZpY2U6ICR7ZGV2aWNlUG9ydH1gKTtcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsnZm9yd2FyZCcsIGB0Y3A6JHtzeXN0ZW1Qb3J0fWAsIGB0Y3A6JHtkZXZpY2VQb3J0fWBdKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIFRDUCBwb3J0IGZvcndhcmRpbmcgd2l0aCBhZGIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LiBUaGUgZm9yd2FyZGluZ1xuICogZm9yIHRoZSBnaXZlbiBwb3J0IHNob3VsZCBiZSBzZXR1cCB3aXRoIHtAbGluayAjZm9yd2FyZFBvcnR9IGZpcnN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gc3lzdGVtUG9ydCAtIFRoZSBudW1iZXIgb2YgdGhlIGxvY2FsIHN5c3RlbSBwb3J0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byByZW1vdmUgZm9yd2FyZGluZyBvbi5cbiAqL1xubWV0aG9kcy5yZW1vdmVQb3J0Rm9yd2FyZCA9IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZVBvcnRGb3J3YXJkIChzeXN0ZW1Qb3J0KSB7XG4gIGxvZy5kZWJ1ZyhgUmVtb3ZpbmcgZm9yd2FyZGVkIHBvcnQgc29ja2V0IGNvbm5lY3Rpb246ICR7c3lzdGVtUG9ydH0gYCk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2ZvcndhcmQnLCBgLS1yZW1vdmVgLCBgdGNwOiR7c3lzdGVtUG9ydH1gXSk7XG59O1xuXG4vKipcbiAqIEdldCBUQ1AgcG9ydCBmb3J3YXJkaW5nIHdpdGggYWRiIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIEByZXR1cm4ge0FycmF5LjxTdHJpbmc+fSBUaGUgb3V0cHV0IG9mIHRoZSBjb3JyZXNwb25kaW5nIGFkYiBjb21tYW5kLiBBbiBhcnJheSBjb250YWlucyBlYWNoIGZvcndhcmRpbmcgbGluZSBvZiBvdXRwdXRcbiAqL1xubWV0aG9kcy5nZXRSZXZlcnNlTGlzdCA9IGFzeW5jIGZ1bmN0aW9uIGdldFJldmVyc2VMaXN0ICgpIHtcbiAgbG9nLmRlYnVnKGBMaXN0IHJldmVyc2UgZm9yd2FyZGluZyBwb3J0c2ApO1xuICBjb25zdCBjb25uZWN0aW9ucyA9IGF3YWl0IHRoaXMuYWRiRXhlYyhbJ3JldmVyc2UnLCAnLS1saXN0J10pO1xuICByZXR1cm4gY29ubmVjdGlvbnMuc3BsaXQoRU9MKS5maWx0ZXIoKGxpbmUpID0+IEJvb2xlYW4obGluZS50cmltKCkpKTtcbn07XG5cbi8qKlxuICogU2V0dXAgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKiBPbmx5IGF2YWlsYWJsZSBmb3IgQVBJIDIxKy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRldmljZVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSByZW1vdGUgZGV2aWNlIHBvcnQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHN5c3RlbVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSBsb2NhbCBzeXN0ZW0gcG9ydC5cbiAqL1xubWV0aG9kcy5yZXZlcnNlUG9ydCA9IGFzeW5jIGZ1bmN0aW9uIHJldmVyc2VQb3J0IChkZXZpY2VQb3J0LCBzeXN0ZW1Qb3J0KSB7XG4gIGxvZy5kZWJ1ZyhgRm9yd2FyZGluZyBkZXZpY2U6ICR7ZGV2aWNlUG9ydH0gdG8gc3lzdGVtOiAke3N5c3RlbVBvcnR9YCk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ3JldmVyc2UnLCBgdGNwOiR7ZGV2aWNlUG9ydH1gLCBgdGNwOiR7c3lzdGVtUG9ydH1gXSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBUQ1AgcG9ydCBmb3J3YXJkaW5nIHdpdGggYWRiIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC4gVGhlIGZvcndhcmRpbmdcbiAqIGZvciB0aGUgZ2l2ZW4gcG9ydCBzaG91bGQgYmUgc2V0dXAgd2l0aCB7QGxpbmsgI2ZvcndhcmRQb3J0fSBmaXJzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRldmljZVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSByZW1vdGUgZGV2aWNlIHBvcnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIHJlbW92ZSBmb3J3YXJkaW5nIG9uLlxuICovXG5tZXRob2RzLnJlbW92ZVBvcnRSZXZlcnNlID0gYXN5bmMgZnVuY3Rpb24gcmVtb3ZlUG9ydFJldmVyc2UgKGRldmljZVBvcnQpIHtcbiAgbG9nLmRlYnVnKGBSZW1vdmluZyByZXZlcnNlIGZvcndhcmRlZCBwb3J0IHNvY2tldCBjb25uZWN0aW9uOiAke2RldmljZVBvcnR9IGApO1xuICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydyZXZlcnNlJywgYC0tcmVtb3ZlYCwgYHRjcDoke2RldmljZVBvcnR9YF0pO1xufTtcblxuLyoqXG4gKiBTZXR1cCBUQ1AgcG9ydCBmb3J3YXJkaW5nIHdpdGggYWRiIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC4gVGhlIGRpZmZlcmVuY2VcbiAqIGJldHdlZW4ge0BsaW5rICNmb3J3YXJkUG9ydH0gaXMgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIHNldHVwIGZvciBhbiBhYnN0cmFjdFxuICogbG9jYWwgcG9ydC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHN5c3RlbVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSBsb2NhbCBzeXN0ZW0gcG9ydC5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gZGV2aWNlUG9ydCAtIFRoZSBudW1iZXIgb2YgdGhlIHJlbW90ZSBkZXZpY2UgcG9ydC5cbiAqL1xubWV0aG9kcy5mb3J3YXJkQWJzdHJhY3RQb3J0ID0gYXN5bmMgZnVuY3Rpb24gZm9yd2FyZEFic3RyYWN0UG9ydCAoc3lzdGVtUG9ydCwgZGV2aWNlUG9ydCkge1xuICBsb2cuZGVidWcoYEZvcndhcmRpbmcgc3lzdGVtOiAke3N5c3RlbVBvcnR9IHRvIGFic3RyYWN0IGRldmljZTogJHtkZXZpY2VQb3J0fWApO1xuICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydmb3J3YXJkJywgYHRjcDoke3N5c3RlbVBvcnR9YCwgYGxvY2FsYWJzdHJhY3Q6JHtkZXZpY2VQb3J0fWBdKTtcbn07XG5cbi8qKlxuICogRXhlY3V0ZSBwaW5nIHNoZWxsIGNvbW1hbmQgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGNvbW1hbmQgb3V0cHV0IGNvbnRhaW5zICdwaW5nJyBzdWJzdHJpbmcuXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGV4ZWN1dGluZyAncGluZycgY29tbWFuZCBvbiB0aGVcbiAqICAgICAgICAgICAgICAgICBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5waW5nID0gYXN5bmMgZnVuY3Rpb24gcGluZyAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnZWNobycsICdwaW5nJ10pO1xuICBpZiAoc3Rkb3V0LmluZGV4T2YoJ3BpbmcnKSA9PT0gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgQURCIHBpbmcgZmFpbGVkLCByZXR1cm5lZCAke3N0ZG91dH1gKTtcbn07XG5cbi8qKlxuICogUmVzdGFydCB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgdXNpbmcgYWRiIGNvbW1hbmRzLlxuICpcbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiBzdGFydCBmYWlscy5cbiAqL1xubWV0aG9kcy5yZXN0YXJ0ID0gYXN5bmMgZnVuY3Rpb24gcmVzdGFydCAoKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5zdG9wTG9nY2F0KCk7XG4gICAgYXdhaXQgdGhpcy5yZXN0YXJ0QWRiKCk7XG4gICAgYXdhaXQgdGhpcy53YWl0Rm9yRGV2aWNlKDYwKTtcbiAgICBhd2FpdCB0aGlzLnN0YXJ0TG9nY2F0KHRoaXMuX2xvZ2NhdFN0YXJ0dXBQYXJhbXMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBSZXN0YXJ0IGZhaWxlZC4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExvZ2NhdE9wdHNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmb3JtYXQgVGhlIGxvZyBwcmludCBmb3JtYXQsIHdoZXJlIDxmb3JtYXQ+IGlzIG9uZSBvZjpcbiAqICAgYnJpZWYgcHJvY2VzcyB0YWcgdGhyZWFkIHJhdyB0aW1lIHRocmVhZHRpbWUgbG9uZ1xuICogYHRocmVhZHRpbWVgIGlzIHRoZSBkZWZhdWx0IHZhbHVlLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBmaWx0ZXJTcGVjcyBTZXJpZXMgb2YgPHRhZz5bOnByaW9yaXR5XVxuICogd2hlcmUgPHRhZz4gaXMgYSBsb2cgY29tcG9uZW50IHRhZyAob3IgKiBmb3IgYWxsKSBhbmQgcHJpb3JpdHkgaXM6XG4gKiAgViAgICBWZXJib3NlXG4gKiAgRCAgICBEZWJ1Z1xuICogIEkgICAgSW5mb1xuICogIFcgICAgV2FyblxuICogIEUgICAgRXJyb3JcbiAqICBGICAgIEZhdGFsXG4gKiAgUyAgICBTaWxlbnQgKHN1cHJlc3MgYWxsIG91dHB1dClcbiAqXG4gKiAnKicgbWVhbnMgJyo6ZCcgYW5kIDx0YWc+IGJ5IGl0c2VsZiBtZWFucyA8dGFnPjp2XG4gKlxuICogSWYgbm90IHNwZWNpZmllZCBvbiB0aGUgY29tbWFuZGxpbmUsIGZpbHRlcnNwZWMgaXMgc2V0IGZyb20gQU5EUk9JRF9MT0dfVEFHUy5cbiAqIElmIG5vIGZpbHRlcnNwZWMgaXMgZm91bmQsIGZpbHRlciBkZWZhdWx0cyB0byAnKjpJJ1xuICovXG5cbi8qKlxuICogU3RhcnQgdGhlIGxvZ2NhdCBwcm9jZXNzIHRvIGdhdGhlciBsb2dzLlxuICpcbiAqIEBwYXJhbSB7P0xvZ2NhdE9wdHN9IG9wdHNcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiByZXN0YXJ0IGZhaWxzLlxuICovXG5tZXRob2RzLnN0YXJ0TG9nY2F0ID0gYXN5bmMgZnVuY3Rpb24gc3RhcnRMb2djYXQgKG9wdHMgPSB7fSkge1xuICBpZiAoIV8uaXNFbXB0eSh0aGlzLmxvZ2NhdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gc3RhcnQgbG9nY2F0IGNhcHR1cmUgYnV0IGl0J3MgYWxyZWFkeSBzdGFydGVkIVwiKTtcbiAgfVxuXG4gIHRoaXMubG9nY2F0ID0gbmV3IExvZ2NhdCh7XG4gICAgYWRiOiB0aGlzLmV4ZWN1dGFibGUsXG4gICAgZGVidWc6IGZhbHNlLFxuICAgIGRlYnVnVHJhY2U6IGZhbHNlLFxuICAgIGNsZWFyRGV2aWNlTG9nc09uU3RhcnQ6ICEhdGhpcy5jbGVhckRldmljZUxvZ3NPblN0YXJ0LFxuICB9KTtcbiAgYXdhaXQgdGhpcy5sb2djYXQuc3RhcnRDYXB0dXJlKG9wdHMpO1xuICB0aGlzLl9sb2djYXRTdGFydHVwUGFyYW1zID0gb3B0cztcbn07XG5cbi8qKlxuICogU3RvcCB0aGUgYWN0aXZlIGxvZ2NhdCBwcm9jZXNzIHdoaWNoIGdhdGhlcnMgbG9ncy5cbiAqIFRoZSBjYWxsIHdpbGwgYmUgaWdub3JlZCBpZiBubyBsb2djYXQgcHJvY2VzcyBpcyBydW5uaW5nLlxuICovXG5tZXRob2RzLnN0b3BMb2djYXQgPSBhc3luYyBmdW5jdGlvbiBzdG9wTG9nY2F0ICgpIHtcbiAgaWYgKF8uaXNFbXB0eSh0aGlzLmxvZ2NhdCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLmxvZ2NhdC5zdG9wQ2FwdHVyZSgpO1xuICB9IGZpbmFsbHkge1xuICAgIHRoaXMubG9nY2F0ID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgb3V0cHV0IGZyb20gdGhlIGN1cnJlbnRseSBydW5uaW5nIGxvZ2NhdCBwcm9jZXNzLlxuICogVGhlIGxvZ2NhdCBwcm9jZXNzIHNob3VsZCBiZSBleGVjdXRlZCBieSB7MmxpbmsgI3N0YXJ0TG9nY2F0fSBtZXRob2QuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY29sbGVjdGVkIGxvZ2NhdCBvdXRwdXQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgbG9nY2F0IHByb2Nlc3MgaXMgbm90IHJ1bm5pbmcuXG4gKi9cbm1ldGhvZHMuZ2V0TG9nY2F0TG9ncyA9IGZ1bmN0aW9uIGdldExvZ2NhdExvZ3MgKCkge1xuICBpZiAoXy5pc0VtcHR5KHRoaXMubG9nY2F0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGdldCBsb2djYXQgbG9ncyBzaW5jZSBsb2djYXQgaGFzbid0IHN0YXJ0ZWRcIik7XG4gIH1cbiAgcmV0dXJuIHRoaXMubG9nY2F0LmdldExvZ3MoKTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBjYWxsYmFjayBmb3IgdGhlIGxvZ2NhdCBvdXRwdXQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgLSBUaGUgbGlzdGVuZXIgZnVuY3Rpb24sIHdoaWNoIGFjY2VwdHMgb25lIGFyZ3VtZW50LiBUaGUgYXJndW1lbnQgaXNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSBsb2cgcmVjb3JkIG9iamVjdCB3aXRoIGB0aW1lc3RhbXBgLCBgbGV2ZWxgIGFuZCBgbWVzc2FnZWAgcHJvcGVydGllcy5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBsb2djYXQgcHJvY2VzcyBpcyBub3QgcnVubmluZy5cbiAqL1xubWV0aG9kcy5zZXRMb2djYXRMaXN0ZW5lciA9IGZ1bmN0aW9uIHNldExvZ2NhdExpc3RlbmVyIChsaXN0ZW5lcikge1xuICBpZiAoXy5pc0VtcHR5KHRoaXMubG9nY2F0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkxvZ2NhdCBwcm9jZXNzIGhhc24ndCBiZWVuIHN0YXJ0ZWRcIik7XG4gIH1cbiAgdGhpcy5sb2djYXQub24oJ291dHB1dCcsIGxpc3RlbmVyKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgcHJldmlvdXNseSBzZXQgY2FsbGJhY2sgZm9yIHRoZSBsb2djYXQgb3V0cHV0IGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIC0gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLCB3aGljaCBoYXMgYmVlbiBwcmV2aW91c2x5XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NlZCB0byBgc2V0TG9nY2F0TGlzdGVuZXJgXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgbG9nY2F0IHByb2Nlc3MgaXMgbm90IHJ1bm5pbmcuXG4gKi9cbm1ldGhvZHMucmVtb3ZlTG9nY2F0TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMb2djYXRMaXN0ZW5lciAobGlzdGVuZXIpIHtcbiAgaWYgKF8uaXNFbXB0eSh0aGlzLmxvZ2NhdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2djYXQgcHJvY2VzcyBoYXNuJ3QgYmVlbiBzdGFydGVkXCIpO1xuICB9XG4gIHRoaXMubG9nY2F0LnJlbW92ZUxpc3RlbmVyKCdvdXRwdXQnLCBsaXN0ZW5lcik7XG59O1xuXG4vKipcbiAqIEF0IHNvbWUgcG9pbnQgb2YgdGltZSBHb29nbGUgaGFzIGNoYW5nZWQgdGhlIGRlZmF1bHQgYHBzYCBiZWhhdmlvdXIsIHNvIGl0IG9ubHlcbiAqIGxpc3RzIHByb2Nlc3NlcyB0aGF0IGJlbG9uZyB0byB0aGUgY3VycmVudCBzaGVsbCB1c2VyIHJhdGhlciB0byBhbGxcbiAqIHVzZXJzLiBJdCBpcyBuZWNlc3NhcnkgdG8gZXhlY3V0ZSBwcyB3aXRoIC1BIGNvbW1hbmQgbGluZSBhcmd1bWVudFxuICogdG8gbWltaWMgdGhlIHByZXZpb3VzIGJlaGF2aW91ci5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgb3V0cHV0IG9mIGBwc2AgY29tbWFuZCB3aGVyZSBhbGwgcHJvY2Vzc2VzIGFyZSBpbmNsdWRlZFxuICovXG5tZXRob2RzLmxpc3RQcm9jZXNzU3RhdHVzID0gYXN5bmMgZnVuY3Rpb24gbGlzdFByb2Nlc3NTdGF0dXMgKCkge1xuICBpZiAoIV8uaXNCb29sZWFuKHRoaXMuX2RvZXNQc1N1cHBvcnRBT3B0aW9uKSkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLl9kb2VzUHNTdXBwb3J0QU9wdGlvbiA9IC9eLUFcXGIvbS50ZXN0KGF3YWl0IHRoaXMuc2hlbGwoWydwcycsICctLWhlbHAnXSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZy5kZWJ1ZyhlLnN0YWNrKTtcbiAgICAgIHRoaXMuX2RvZXNQc1N1cHBvcnRBT3B0aW9uID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBhd2FpdCB0aGlzLnNoZWxsKHRoaXMuX2RvZXNQc1N1cHBvcnRBT3B0aW9uID8gWydwcycsICctQSddIDogWydwcyddKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBwcm9jZXNzIG5hbWUgZm9yIHRoZSBnaXZlbiBwcm9jZXNzIGlkZW50aWZpZXJcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHBpZCAtIFRoZSB2YWxpZCBwcm9jZXNzIGlkZW50aWZpZXJcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgZ2l2ZW4gUElEIGlzIGVpdGhlciBpbnZhbGlkIG9yIGlzIG5vdCBwcmVzZW50XG4gKiBpbiB0aGUgYWN0aXZlIHByb2Nlc3NlcyBsaXN0XG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcHJvY2VzcyBuYW1lXG4gKi9cbm1ldGhvZHMuZ2V0TmFtZUJ5UGlkID0gYXN5bmMgZnVuY3Rpb24gZ2V0TmFtZUJ5UGlkIChwaWQpIHtcbiAgaWYgKGlzTmFOKHBpZCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBQSUQgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIG51bWJlci4gJyR7cGlkfScgaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICB9XG4gIHBpZCA9IHBhcnNlSW50KHBpZCwgMTApO1xuXG4gIGNvbnN0IHN0ZG91dCA9IGF3YWl0IHRoaXMubGlzdFByb2Nlc3NTdGF0dXMoKTtcbiAgY29uc3QgdGl0bGVNYXRjaCA9IFBTX1RJVExFX1BBVFRFUk4uZXhlYyhzdGRvdXQpO1xuICBpZiAoIXRpdGxlTWF0Y2gpIHtcbiAgICBsb2cuZGVidWcoc3Rkb3V0KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBnZXQgdGhlIHByb2Nlc3MgbmFtZSBmb3IgUElEICcke3BpZH0nYCk7XG4gIH1cbiAgY29uc3QgYWxsVGl0bGVzID0gdGl0bGVNYXRjaFsxXS50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgY29uc3QgcGlkSW5kZXggPSBhbGxUaXRsZXMuaW5kZXhPZihQSURfQ09MVU1OX1RJVExFKTtcbiAgLy8gaXQgbWlnaHQgbm90IGJlIHN0YWJsZSB0byB0YWtlIE5BTUUgYnkgaW5kZXgsIGJlY2F1c2UgZGVwZW5kaW5nIG9uIHRoZVxuICAvLyBhY3R1YWwgU0RLIHRoZSBwcyBvdXRwdXQgbWlnaHQgbm90IGNvbnRhaW4gYW4gYWJicmV2aWF0aW9uIGZvciB0aGUgUyBmbGFnOlxuICAvLyBVU0VSICAgICBQSUQgICBQUElEICBWU0laRSAgUlNTICAgICBXQ0hBTiAgICBQQyAgICAgICAgTkFNRVxuICAvLyBVU0VSICAgICBQSUQgICBQUElEICBWU0laRSAgUlNTICAgICBXQ0hBTiAgICBQQyAgIFMgICAgTkFNRVxuICBjb25zdCBuYW1lT2Zmc2V0ID0gYWxsVGl0bGVzLmluZGV4T2YoUFJPQ0VTU19OQU1FX0NPTFVNTl9USVRMRSkgLSBhbGxUaXRsZXMubGVuZ3RoO1xuICBjb25zdCBwaWRSZWdleCA9IG5ldyBSZWdFeHAoYF4oLipcXFxcYiR7cGlkfVxcXFxiLiopJGAsICdnbScpO1xuICBsZXQgbWF0Y2hlZExpbmU7XG4gIHdoaWxlICgobWF0Y2hlZExpbmUgPSBwaWRSZWdleC5leGVjKHN0ZG91dCkpKSB7XG4gICAgY29uc3QgaXRlbXMgPSBtYXRjaGVkTGluZVsxXS50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgICBpZiAocGFyc2VJbnQoaXRlbXNbcGlkSW5kZXhdLCAxMCkgPT09IHBpZCAmJiBpdGVtc1tpdGVtcy5sZW5ndGggKyBuYW1lT2Zmc2V0XSkge1xuICAgICAgcmV0dXJuIGl0ZW1zW2l0ZW1zLmxlbmd0aCArIG5hbWVPZmZzZXRdO1xuICAgIH1cbiAgfVxuICBsb2cuZGVidWcoc3Rkb3V0KTtcbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZ2V0IHRoZSBwcm9jZXNzIG5hbWUgZm9yIFBJRCAnJHtwaWR9J2ApO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGxpc3Qgb2YgcHJvY2VzcyBpZHMgZm9yIHRoZSBwYXJ0aWN1bGFyIHByb2Nlc3Mgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIHBhcnQgb2YgcHJvY2VzcyBuYW1lLlxuICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59IFRoZSBsaXN0IG9mIG1hdGNoZWQgcHJvY2VzcyBJRHMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcGFzc2VkIHByb2Nlc3MgbmFtZSBpcyBub3QgYSB2YWxpZCBvbmVcbiAqL1xubWV0aG9kcy5nZXRQSURzQnlOYW1lID0gYXN5bmMgZnVuY3Rpb24gZ2V0UElEc0J5TmFtZSAobmFtZSkge1xuICBsb2cuZGVidWcoYEdldHRpbmcgSURzIG9mIGFsbCAnJHtuYW1lfScgcHJvY2Vzc2VzYCk7XG4gIGlmICghdGhpcy5pc1ZhbGlkQ2xhc3MobmFtZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcHJvY2VzcyBuYW1lOiAnJHtuYW1lfSdgKTtcbiAgfVxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL2FwcGl1bS9pc3N1ZXMvMTM1NjdcbiAgaWYgKGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA+PSAyMykge1xuICAgIGlmICghXy5pc0Jvb2xlYW4odGhpcy5faXNQZ3JlcEF2YWlsYWJsZSkpIHtcbiAgICAgIC8vIHBncmVwIGlzIGluIHByaW9yaXR5LCBzaW5jZSBwaWRvZiBoYXMgYmVlbiByZXBvcnRlZCBvZiBoYXZpbmcgYnVncyBvbiBzb21lIHBsYXRmb3Jtc1xuICAgICAgY29uc3QgcGdyZXBPdXRwdXQgPSBfLnRyaW0oYXdhaXQgdGhpcy5zaGVsbChbJ3BncmVwIC0taGVscDsgZWNobyAkPyddKSk7XG4gICAgICB0aGlzLl9pc1BncmVwQXZhaWxhYmxlID0gcGFyc2VJbnQoXy5sYXN0KHBncmVwT3V0cHV0LnNwbGl0KC9cXHMrLykpLCAxMCkgPT09IDA7XG4gICAgICBpZiAodGhpcy5faXNQZ3JlcEF2YWlsYWJsZSkge1xuICAgICAgICB0aGlzLl9jYW5QZ3JlcFVzZUZ1bGxDbWRMaW5lU2VhcmNoID0gL14tZlxcYi9tLnRlc3QocGdyZXBPdXRwdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faXNQaWRvZkF2YWlsYWJsZSA9IHBhcnNlSW50KGF3YWl0IHRoaXMuc2hlbGwoWydwaWRvZiAtLWhlbHAgPiAvZGV2L251bGw7IGVjaG8gJD8nXSksIDEwKSA9PT0gMDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuX2lzUGdyZXBBdmFpbGFibGUgfHwgdGhpcy5faXNQaWRvZkF2YWlsYWJsZSkge1xuICAgICAgY29uc3Qgc2hlbGxDb21tYW5kID0gdGhpcy5faXNQZ3JlcEF2YWlsYWJsZVxuICAgICAgICA/ICh0aGlzLl9jYW5QZ3JlcFVzZUZ1bGxDbWRMaW5lU2VhcmNoXG4gICAgICAgICAgPyBbJ3BncmVwJywgJy1mJywgXy5lc2NhcGVSZWdFeHAoYChbWzpibGFuazpdXXxeKSR7bmFtZX0oW1s6Ymxhbms6XV18JClgKV1cbiAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL2FwcGl1bS9pc3N1ZXMvMTM4NzJcbiAgICAgICAgICA6IFtgcGdyZXAgXiR7Xy5lc2NhcGVSZWdFeHAobmFtZS5zbGljZSgtTUFYX1BHUkVQX1BBVFRFUk5fTEVOKSl9JCBgICtcbiAgICAgICAgICAgICAgYHx8IHBncmVwIF4ke18uZXNjYXBlUmVnRXhwKG5hbWUuc2xpY2UoMCwgTUFYX1BHUkVQX1BBVFRFUk5fTEVOKSl9JGBdKVxuICAgICAgICA6IFsncGlkb2YnLCBuYW1lXTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5zaGVsbChzaGVsbENvbW1hbmQpKVxuICAgICAgICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgICAgICAgLm1hcCgoeCkgPT4gcGFyc2VJbnQoeCwgMTApKVxuICAgICAgICAgIC5maWx0ZXIoKHgpID0+IF8uaXNJbnRlZ2VyKHgpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZXJyb3IgY29kZSAxIGlzIHJldHVybmVkIGlmIHRoZSB1dGlsaXR5IGRpZCBub3QgZmluZCBhbnkgcHJvY2Vzc2VzXG4gICAgICAgIC8vIHdpdGggdGhlIGdpdmVuIG5hbWVcbiAgICAgICAgaWYgKGUuY29kZSAhPT0gMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGV4dHJhY3QgcHJvY2VzcyBJRCBvZiAnJHtuYW1lfSc6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfLmluY2x1ZGVzKGUuc3RkZXJyIHx8IGUuc3Rkb3V0LCAnc3ludGF4IGVycm9yJykpIHtcbiAgICAgICAgICBsb2cud2FybihgR290IGFuIHVuZXhwZWN0ZWQgcmVzcG9uc2UgZnJvbSB0aGUgc2hlbGwgaW50ZXJwcmV0ZXI6ICR7ZS5zdGRlcnIgfHwgZS5zdGRvdXR9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbG9nLmRlYnVnKCdVc2luZyBwcy1iYXNlZCBQSUQgZGV0ZWN0aW9uJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGF3YWl0IHRoaXMubGlzdFByb2Nlc3NTdGF0dXMoKTtcbiAgY29uc3QgdGl0bGVNYXRjaCA9IFBTX1RJVExFX1BBVFRFUk4uZXhlYyhzdGRvdXQpO1xuICBpZiAoIXRpdGxlTWF0Y2gpIHtcbiAgICBsb2cuZGVidWcoc3Rkb3V0KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBleHRyYWN0IFBJRCBvZiAnJHtuYW1lfScgZnJvbSBwcyBvdXRwdXRgKTtcbiAgfVxuICBjb25zdCBhbGxUaXRsZXMgPSB0aXRsZU1hdGNoWzFdLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICBjb25zdCBwaWRJbmRleCA9IGFsbFRpdGxlcy5pbmRleE9mKFBJRF9DT0xVTU5fVElUTEUpO1xuICBjb25zdCBwaWRzID0gW107XG4gIGNvbnN0IHByb2Nlc3NOYW1lUmVnZXggPSBuZXcgUmVnRXhwKGBeKC4qXFxcXGJcXFxcZCtcXFxcYi4qXFxcXGIke18uZXNjYXBlUmVnRXhwKG5hbWUpfVxcXFxiLiopJGAsICdnbScpO1xuICBsZXQgbWF0Y2hlZExpbmU7XG4gIHdoaWxlICgobWF0Y2hlZExpbmUgPSBwcm9jZXNzTmFtZVJlZ2V4LmV4ZWMoc3Rkb3V0KSkpIHtcbiAgICBjb25zdCBpdGVtcyA9IG1hdGNoZWRMaW5lWzFdLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICAgIGlmIChwaWRJbmRleCA+PSBhbGxUaXRsZXMubGVuZ3RoIHx8IGlzTmFOKGl0ZW1zW3BpZEluZGV4XSkpIHtcbiAgICAgIGxvZy5kZWJ1ZyhzdGRvdXQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZXh0cmFjdCBQSUQgb2YgJyR7bmFtZX0nIGZyb20gJyR7bWF0Y2hlZExpbmVbMV0udHJpbSgpfSdgKTtcbiAgICB9XG4gICAgcGlkcy5wdXNoKHBhcnNlSW50KGl0ZW1zW3BpZEluZGV4XSwgMTApKTtcbiAgfVxuICByZXR1cm4gcGlkcztcbn07XG5cbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIHByb2Nlc3MgaWRzIGZvciB0aGUgcGFydGljdWxhciBwcm9jZXNzIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBwYXJ0IG9mIHByb2Nlc3MgbmFtZS5cbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSBUaGUgbGlzdCBvZiBtYXRjaGVkIHByb2Nlc3MgSURzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKi9cbm1ldGhvZHMua2lsbFByb2Nlc3Nlc0J5TmFtZSA9IGFzeW5jIGZ1bmN0aW9uIGtpbGxQcm9jZXNzZXNCeU5hbWUgKG5hbWUpIHtcbiAgdHJ5IHtcbiAgICBsb2cuZGVidWcoYEF0dGVtcHRpbmcgdG8ga2lsbCBhbGwgJHtuYW1lfSBwcm9jZXNzZXNgKTtcbiAgICBjb25zdCBwaWRzID0gYXdhaXQgdGhpcy5nZXRQSURzQnlOYW1lKG5hbWUpO1xuICAgIGlmIChfLmlzRW1wdHkocGlkcykpIHtcbiAgICAgIGxvZy5pbmZvKGBObyAnJHtuYW1lfScgcHJvY2VzcyBoYXMgYmVlbiBmb3VuZGApO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBCLmFsbChwaWRzLm1hcCgocCkgPT4gdGhpcy5raWxsUHJvY2Vzc0J5UElEKHApKSk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8ga2lsbCAke25hbWV9IHByb2Nlc3Nlcy4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIEtpbGwgdGhlIHBhcnRpY3VsYXIgcHJvY2VzcyBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKiBUaGUgY3VycmVudCB1c2VyIGlzIGF1dG9tYXRpY2FsbHkgc3dpdGNoZWQgdG8gcm9vdCBpZiBuZWNlc3NhcnkgaW4gb3JkZXJcbiAqIHRvIHByb3Blcmx5IGtpbGwgdGhlIHByb2Nlc3MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBwaWQgLSBUaGUgSUQgb2YgdGhlIHByb2Nlc3MgdG8gYmUga2lsbGVkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBwcm9jZXNzIGNhbm5vdCBiZSBraWxsZWQuXG4gKi9cbm1ldGhvZHMua2lsbFByb2Nlc3NCeVBJRCA9IGFzeW5jIGZ1bmN0aW9uIGtpbGxQcm9jZXNzQnlQSUQgKHBpZCkge1xuICBsb2cuZGVidWcoYEF0dGVtcHRpbmcgdG8ga2lsbCBwcm9jZXNzICR7cGlkfWApO1xuICBjb25zdCBub1Byb2Nlc3NGbGFnID0gJ05vIHN1Y2ggcHJvY2Vzcyc7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIHByb2Nlc3MgZXhpc3RzIGFuZCB0aHJvdyBhbiBleGNlcHRpb24gb3RoZXJ3aXNlXG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ2tpbGwnLCBwaWRdKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChfLmluY2x1ZGVzKGUuc3RkZXJyLCBub1Byb2Nlc3NGbGFnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIV8uaW5jbHVkZXMoZS5zdGRlcnIsICdPcGVyYXRpb24gbm90IHBlcm1pdHRlZCcpKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICBsb2cuaW5mbyhgQ2Fubm90IGtpbGwgUElEICR7cGlkfSBkdWUgdG8gaW5zdWZmaWNpZW50IHBlcm1pc3Npb25zLiBSZXRyeWluZyBhcyByb290YCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuc2hlbGwoWydraWxsJywgcGlkXSwge1xuICAgICAgICBwcml2aWxlZ2VkOiB0cnVlXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlMSkge1xuICAgICAgaWYgKF8uaW5jbHVkZXMoZTEuc3RkZXJyLCBub1Byb2Nlc3NGbGFnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aHJvdyBlMTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQnJvYWRjYXN0IHByb2Nlc3Mga2lsbGluZyBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGludGVudCAtIFRoZSBuYW1lIG9mIHRoZSBpbnRlbnQgdG8gYnJvYWRjYXN0IHRvLlxuICogQHBhcmFtIHtzdHJpbmd9IHByb2Nlc3NOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGtpbGxlZCBwcm9jZXNzLlxuICogQHRocm93cyB7ZXJyb3J9IElmIHRoZSBwcm9jZXNzIHdhcyBub3Qga2lsbGVkLlxuICovXG5tZXRob2RzLmJyb2FkY2FzdFByb2Nlc3NFbmQgPSBhc3luYyBmdW5jdGlvbiBicm9hZGNhc3RQcm9jZXNzRW5kIChpbnRlbnQsIHByb2Nlc3NOYW1lKSB7XG4gIC8vIHN0YXJ0IHRoZSBicm9hZGNhc3Qgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBmaW5pc2guXG4gIHRoaXMuYnJvYWRjYXN0KGludGVudCk7XG4gIC8vIHdhaXQgZm9yIHRoZSBwcm9jZXNzIHRvIGVuZFxuICBsZXQgc3RhcnQgPSBEYXRlLm5vdygpO1xuICBsZXQgdGltZW91dE1zID0gNDAwMDA7XG4gIHRyeSB7XG4gICAgd2hpbGUgKChEYXRlLm5vdygpIC0gc3RhcnQpIDwgdGltZW91dE1zKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5wcm9jZXNzRXhpc3RzKHByb2Nlc3NOYW1lKSkge1xuICAgICAgICAvLyBjb29sIGRvd25cbiAgICAgICAgYXdhaXQgc2xlZXAoNDAwKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgUHJvY2VzcyBuZXZlciBkaWVkIHdpdGhpbiAke3RpbWVvdXRNc30gbXNgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGJyb2FkY2FzdCBwcm9jZXNzIGVuZC4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIEJyb2FkY2FzdCBhIG1lc3NhZ2UgdG8gdGhlIGdpdmVuIGludGVudC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW50ZW50IC0gVGhlIG5hbWUgb2YgdGhlIGludGVudCB0byBicm9hZGNhc3QgdG8uXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgaW50ZW50IG5hbWUgaXMgbm90IGEgdmFsaWQgY2xhc3MgbmFtZS5cbiAqL1xubWV0aG9kcy5icm9hZGNhc3QgPSBhc3luYyBmdW5jdGlvbiBicm9hZGNhc3QgKGludGVudCkge1xuICBpZiAoIXRoaXMuaXNWYWxpZENsYXNzKGludGVudCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaW50ZW50ICR7aW50ZW50fWApO1xuICB9XG4gIGxvZy5kZWJ1ZyhgQnJvYWRjYXN0aW5nOiAke2ludGVudH1gKTtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ2FtJywgJ2Jyb2FkY2FzdCcsICctYScsIGludGVudF0pO1xufTtcblxuLyoqXG4gKiBLaWxsIEFuZHJvaWQgaW5zdHJ1bWVudHMgaWYgdGhleSBhcmUgY3VycmVudGx5IHJ1bm5pbmcuXG4gKi9cbm1ldGhvZHMuZW5kQW5kcm9pZENvdmVyYWdlID0gYXN5bmMgZnVuY3Rpb24gZW5kQW5kcm9pZENvdmVyYWdlICgpIHtcbiAgaWYgKHRoaXMuaW5zdHJ1bWVudFByb2MgJiYgdGhpcy5pbnN0cnVtZW50UHJvYy5pc1J1bm5pbmcpIHtcbiAgICBhd2FpdCB0aGlzLmluc3RydW1lbnRQcm9jLnN0b3AoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBJbnN0cnVtZW50IHRoZSBwYXJ0aWN1bGFyIGFjdGl2aXR5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgbmFtZSBvZiB0aGUgcGFja2FnZSB0byBiZSBpbnN0cnVtZW50ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gYWN0aXZpdHkgLSBUaGUgbmFtZSBvZiB0aGUgbWFpbiBhY3Rpdml0eSBpbiB0aGlzIHBhY2thZ2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5zdHJ1bWVudFdpdGggLSBUaGUgbmFtZSBvZiB0aGUgcGFja2FnZSB0byBpbnN0cnVtZW50XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgYWN0aXZpdHkgd2l0aC5cbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiBhbnkgZXhjZXB0aW9uIGlzIHJlcG9ydGVkIGJ5IGFkYiBzaGVsbC5cbiAqL1xubWV0aG9kcy5pbnN0cnVtZW50ID0gYXN5bmMgZnVuY3Rpb24gaW5zdHJ1bWVudCAocGtnLCBhY3Rpdml0eSwgaW5zdHJ1bWVudFdpdGgpIHtcbiAgaWYgKGFjdGl2aXR5WzBdICE9PSAnLicpIHtcbiAgICBwa2cgPSAnJztcbiAgfVxuICBsZXQgcGtnQWN0aXZpdHkgPSAocGtnICsgYWN0aXZpdHkpLnJlcGxhY2UoL1xcLisvZywgJy4nKTsgLy8gRml4IHBrZy4uYWN0aXZpdHkgZXJyb3JcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICdhbScsICdpbnN0cnVtZW50JyxcbiAgICAnLWUnLCAnbWFpbl9hY3Rpdml0eScsXG4gICAgcGtnQWN0aXZpdHksXG4gICAgaW5zdHJ1bWVudFdpdGgsXG4gIF0pO1xuICBpZiAoc3Rkb3V0LmluZGV4T2YoJ0V4Y2VwdGlvbicpICE9PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBleGNlcHRpb24gZHVyaW5nIGluc3RydW1lbnRhdGlvbi4gT3JpZ2luYWwgZXJyb3IgJHtzdGRvdXQuc3BsaXQoJ1xcbicpWzBdfWApO1xuICB9XG59O1xuXG4vKipcbiAqIENvbGxlY3QgQW5kcm9pZCBjb3ZlcmFnZSBieSBpbnN0cnVtZW50aW5nIHRoZSBwYXJ0aWN1bGFyIGFjdGl2aXR5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnN0cnVtZW50Q2xhc3MgLSBUaGUgbmFtZSBvZiB0aGUgaW5zdHJ1bWVudGF0aW9uIGNsYXNzLlxuICogQHBhcmFtIHtzdHJpbmd9IHdhaXRQa2cgLSBUaGUgbmFtZSBvZiB0aGUgcGFja2FnZSB0byBiZSBpbnN0cnVtZW50ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gd2FpdEFjdGl2aXR5IC0gVGhlIG5hbWUgb2YgdGhlIG1haW4gYWN0aXZpdHkgaW4gdGhpcyBwYWNrYWdlLlxuICpcbiAqIEByZXR1cm4ge3Byb21pc2V9IFRoZSBwcm9taXNlIGlzIHN1Y2Nlc3NmdWxseSByZXNvbHZlZCBpZiB0aGUgaW5zdHJ1bWVudGF0aW9uIHN0YXJ0c1xuICogICAgICAgICAgICAgICAgICAgd2l0aG91dCBlcnJvcnMuXG4gKi9cbm1ldGhvZHMuYW5kcm9pZENvdmVyYWdlID0gYXN5bmMgZnVuY3Rpb24gYW5kcm9pZENvdmVyYWdlIChpbnN0cnVtZW50Q2xhc3MsIHdhaXRQa2csIHdhaXRBY3Rpdml0eSkge1xuICBpZiAoIXRoaXMuaXNWYWxpZENsYXNzKGluc3RydW1lbnRDbGFzcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY2xhc3MgJHtpbnN0cnVtZW50Q2xhc3N9YCk7XG4gIH1cbiAgcmV0dXJuIGF3YWl0IG5ldyBCKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBsZXQgYXJncyA9IHRoaXMuZXhlY3V0YWJsZS5kZWZhdWx0QXJnc1xuICAgICAgLmNvbmNhdChbJ3NoZWxsJywgJ2FtJywgJ2luc3RydW1lbnQnLCAnLWUnLCAnY292ZXJhZ2UnLCAndHJ1ZScsICctdyddKVxuICAgICAgLmNvbmNhdChbaW5zdHJ1bWVudENsYXNzXSk7XG4gICAgbG9nLmRlYnVnKGBDb2xsZWN0aW5nIGNvdmVyYWdlIGRhdGEgd2l0aDogJHtbdGhpcy5leGVjdXRhYmxlLnBhdGhdLmNvbmNhdChhcmdzKS5qb2luKCcgJyl9YCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGFtIGluc3RydW1lbnQgcnVucyBmb3IgdGhlIGxpZmUgb2YgdGhlIGFwcCBwcm9jZXNzLlxuICAgICAgdGhpcy5pbnN0cnVtZW50UHJvYyA9IG5ldyBTdWJQcm9jZXNzKHRoaXMuZXhlY3V0YWJsZS5wYXRoLCBhcmdzKTtcbiAgICAgIGF3YWl0IHRoaXMuaW5zdHJ1bWVudFByb2Muc3RhcnQoMCk7XG4gICAgICB0aGlzLmluc3RydW1lbnRQcm9jLm9uKCdvdXRwdXQnLCAoc3Rkb3V0LCBzdGRlcnIpID0+IHtcbiAgICAgICAgaWYgKHN0ZGVycikge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBydW4gaW5zdHJ1bWVudGF0aW9uLiBPcmlnaW5hbCBlcnJvcjogJHtzdGRlcnJ9YCkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckFjdGl2aXR5KHdhaXRQa2csIHdhaXRBY3Rpdml0eSk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcihgQW5kcm9pZCBjb3ZlcmFnZSBmYWlsZWQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKSk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBwYXJ0aWN1bGFyIHByb3BlcnR5IG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkuIFRoaXMgbmFtZSBzaG91bGRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGtub3duIHRvIF9hZGIgc2hlbGwgZ2V0cHJvcF8gdG9vbC5cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlUHJvcGVydHkgPSBhc3luYyBmdW5jdGlvbiBnZXREZXZpY2VQcm9wZXJ0eSAocHJvcGVydHkpIHtcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoWydnZXRwcm9wJywgcHJvcGVydHldKTtcbiAgbGV0IHZhbCA9IHN0ZG91dC50cmltKCk7XG4gIGxvZy5kZWJ1ZyhgQ3VycmVudCBkZXZpY2UgcHJvcGVydHkgJyR7cHJvcGVydHl9JzogJHt2YWx9YCk7XG4gIHJldHVybiB2YWw7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IHNldFByb3BPcHRzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHByaXZpbGVnZWQgLSBEbyB3ZSBydW4gc2V0UHJvcCBhcyBhIHByaXZpbGVnZWQgY29tbWFuZD8gRGVmYXVsdCB0cnVlLlxuICovXG5cbi8qKlxuICogU2V0IHRoZSBwYXJ0aWN1bGFyIHByb3BlcnR5IG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkuIFRoaXMgbmFtZSBzaG91bGRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGtub3duIHRvIF9hZGIgc2hlbGwgc2V0cHJvcF8gdG9vbC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgLSBUaGUgbmV3IHByb3BlcnR5IHZhbHVlLlxuICogQHBhcmFtIHtzZXRQcm9wT3B0c30gb3B0c1xuICpcbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiBfc2V0cHJvcF8gdXRpbGl0eSBmYWlscyB0byBjaGFuZ2UgcHJvcGVydHkgdmFsdWUuXG4gKi9cbm1ldGhvZHMuc2V0RGV2aWNlUHJvcGVydHkgPSBhc3luYyBmdW5jdGlvbiBzZXREZXZpY2VQcm9wZXJ0eSAocHJvcCwgdmFsLCBvcHRzID0ge30pIHtcbiAgY29uc3Qge3ByaXZpbGVnZWQgPSB0cnVlfSA9IG9wdHM7XG4gIGxvZy5kZWJ1ZyhgU2V0dGluZyBkZXZpY2UgcHJvcGVydHkgJyR7cHJvcH0nIHRvICcke3ZhbH0nYCk7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydzZXRwcm9wJywgcHJvcCwgdmFsXSwge1xuICAgIHByaXZpbGVnZWQsXG4gIH0pO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgc3lzdGVtIGxhbmd1YWdlIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VTeXNMYW5ndWFnZSA9IGFzeW5jIGZ1bmN0aW9uIGdldERldmljZVN5c0xhbmd1YWdlICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3BlcnNpc3Quc3lzLmxhbmd1YWdlJyk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBjb3VudHJ5IG5hbWUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldERldmljZVN5c0NvdW50cnkgPSBhc3luYyBmdW5jdGlvbiBnZXREZXZpY2VTeXNDb3VudHJ5ICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3BlcnNpc3Quc3lzLmNvdW50cnknKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IHN5c3RlbSBsb2NhbGUgbmFtZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlU3lzTG9jYWxlID0gYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlU3lzTG9jYWxlICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3BlcnNpc3Quc3lzLmxvY2FsZScpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgcHJvZHVjdCBsYW5ndWFnZSBuYW1lIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VQcm9kdWN0TGFuZ3VhZ2UgPSBhc3luYyBmdW5jdGlvbiBnZXREZXZpY2VQcm9kdWN0TGFuZ3VhZ2UgKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8ucHJvZHVjdC5sb2NhbGUubGFuZ3VhZ2UnKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IHByb2R1Y3QgY291bnRyeSBuYW1lIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VQcm9kdWN0Q291bnRyeSA9IGFzeW5jIGZ1bmN0aW9uIGdldERldmljZVByb2R1Y3RDb3VudHJ5ICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3JvLnByb2R1Y3QubG9jYWxlLnJlZ2lvbicpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgcHJvZHVjdCBsb2NhbGUgbmFtZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlUHJvZHVjdExvY2FsZSA9IGFzeW5jIGZ1bmN0aW9uIGdldERldmljZVByb2R1Y3RMb2NhbGUgKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8ucHJvZHVjdC5sb2NhbGUnKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgbW9kZWwgbmFtZSBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0TW9kZWwgPSBhc3luYyBmdW5jdGlvbiBnZXRNb2RlbCAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5wcm9kdWN0Lm1vZGVsJyk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG1hbnVmYWN0dXJlciBuYW1lIG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXRNYW51ZmFjdHVyZXIgPSBhc3luYyBmdW5jdGlvbiBnZXRNYW51ZmFjdHVyZXIgKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8ucHJvZHVjdC5tYW51ZmFjdHVyZXInKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHNjcmVlbiBzaXplLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gRGV2aWNlIHNjcmVlbiBzaXplIGFzIHN0cmluZyBpbiBmb3JtYXQgJ1d4SCcgb3JcbiAqICAgICAgICAgICAgICAgICAgX251bGxfIGlmIGl0IGNhbm5vdCBiZSBkZXRlcm1pbmVkLlxuICovXG5tZXRob2RzLmdldFNjcmVlblNpemUgPSBhc3luYyBmdW5jdGlvbiBnZXRTY3JlZW5TaXplICgpIHtcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoWyd3bScsICdzaXplJ10pO1xuICBsZXQgc2l6ZSA9IG5ldyBSZWdFeHAoL1BoeXNpY2FsIHNpemU6IChbXlxccj9cXG5dKykqL2cpLmV4ZWMoc3Rkb3V0KTtcbiAgaWYgKHNpemUgJiYgc2l6ZS5sZW5ndGggPj0gMikge1xuICAgIHJldHVybiBzaXplWzFdLnRyaW0oKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHNjcmVlbiBkZW5zaXR5IGluIGRwaVxuICpcbiAqIEByZXR1cm4gez9udW1iZXJ9IERldmljZSBzY3JlZW4gZGVuc2l0eSBhcyBhIG51bWJlciBvciBfbnVsbF8gaWYgaXRcbiAqICAgICAgICAgICAgICAgICAgY2Fubm90IGJlIGRldGVybWluZWRcbiAqL1xubWV0aG9kcy5nZXRTY3JlZW5EZW5zaXR5ID0gYXN5bmMgZnVuY3Rpb24gZ2V0U2NyZWVuRGVuc2l0eSAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnd20nLCAnZGVuc2l0eSddKTtcbiAgbGV0IGRlbnNpdHkgPSBuZXcgUmVnRXhwKC9QaHlzaWNhbCBkZW5zaXR5OiAoW15cXHI/XFxuXSspKi9nKS5leGVjKHN0ZG91dCk7XG4gIGlmIChkZW5zaXR5ICYmIGRlbnNpdHkubGVuZ3RoID49IDIpIHtcbiAgICBsZXQgZGVuc2l0eU51bWJlciA9IHBhcnNlSW50KGRlbnNpdHlbMV0udHJpbSgpLCAxMCk7XG4gICAgcmV0dXJuIGlzTmFOKGRlbnNpdHlOdW1iZXIpID8gbnVsbCA6IGRlbnNpdHlOdW1iZXI7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIFNldHVwIEhUVFAgcHJveHkgaW4gZGV2aWNlIGdsb2JhbCBzZXR0aW5ncy5cbiAqIFJlYWQgaHR0cHM6Ly9hbmRyb2lkLmdvb2dsZXNvdXJjZS5jb20vcGxhdGZvcm0vZnJhbWV3b3Jrcy9iYXNlLysvYW5kcm9pZC05LjAuMF9yMjEvY29yZS9qYXZhL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuamF2YSBmb3IgZWFjaCBwcm9wZXJ0eVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm94eUhvc3QgLSBUaGUgaG9zdCBuYW1lIG9mIHRoZSBwcm94eS5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gcHJveHlQb3J0IC0gVGhlIHBvcnQgbnVtYmVyIHRvIGJlIHNldC5cbiAqL1xubWV0aG9kcy5zZXRIdHRwUHJveHkgPSBhc3luYyBmdW5jdGlvbiBzZXRIdHRwUHJveHkgKHByb3h5SG9zdCwgcHJveHlQb3J0KSB7XG4gIGxldCBwcm94eSA9IGAke3Byb3h5SG9zdH06JHtwcm94eVBvcnR9YDtcbiAgaWYgKF8uaXNVbmRlZmluZWQocHJveHlIb3N0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2FsbCB0byBzZXRIdHRwUHJveHkgbWV0aG9kIHdpdGggdW5kZWZpbmVkIHByb3h5X2hvc3Q6ICR7cHJveHl9YCk7XG4gIH1cbiAgaWYgKF8uaXNVbmRlZmluZWQocHJveHlQb3J0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2FsbCB0byBzZXRIdHRwUHJveHkgbWV0aG9kIHdpdGggdW5kZWZpbmVkIHByb3h5X3BvcnQgJHtwcm94eX1gKTtcbiAgfVxuXG4gIGNvbnN0IGh0dHBQcm94eVNldHRpbnMgPSBbXG4gICAgWydodHRwX3Byb3h5JywgcHJveHldLFxuICAgIFsnZ2xvYmFsX2h0dHBfcHJveHlfaG9zdCcsIHByb3h5SG9zdF0sXG4gICAgWydnbG9iYWxfaHR0cF9wcm94eV9wb3J0JywgcHJveHlQb3J0XVxuICBdO1xuICBmb3IgKGNvbnN0IFtzZXR0aW5nS2V5LCBzZXR0aW5nVmFsdWVdIG9mIGh0dHBQcm94eVNldHRpbnMpIHtcbiAgICBhd2FpdCB0aGlzLnNldFNldHRpbmcoJ2dsb2JhbCcsIHNldHRpbmdLZXksIHNldHRpbmdWYWx1ZSk7XG4gIH1cbn07XG5cbi8qKlxuICogRGVsZXRlIEhUVFAgcHJveHkgaW4gZGV2aWNlIGdsb2JhbCBzZXR0aW5ncy5cbiAqIFJlYm9vdGluZyB0aGUgdGVzdCBkZXZpY2UgaXMgbmVjZXNzYXJ5IHRvIGFwcGx5IHRoZSBjaGFuZ2UuXG4gKi9cbm1ldGhvZHMuZGVsZXRlSHR0cFByb3h5ID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlSHR0cFByb3h5ICgpIHtcbiAgY29uc3QgaHR0cFByb3h5U2V0dGlucyA9IFtcbiAgICAnaHR0cF9wcm94eScsXG4gICAgJ2dsb2JhbF9odHRwX3Byb3h5X2hvc3QnLFxuICAgICdnbG9iYWxfaHR0cF9wcm94eV9wb3J0JyxcbiAgICAnZ2xvYmFsX2h0dHBfcHJveHlfZXhjbHVzaW9uX2xpc3QnIC8vIGBnbG9iYWxfaHR0cF9wcm94eV9leGNsdXNpb25fbGlzdD1gIHdhcyBnZW5lcmF0ZWQgYnkgYHNldHRpbmdzIGdsb2JhbCBodHRvX3Byb3h5IHh4eHhgXG4gIF07XG4gIGZvciAoY29uc3Qgc2V0dGluZyBvZiBodHRwUHJveHlTZXR0aW5zKSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3NldHRpbmdzJywgJ2RlbGV0ZScsICdnbG9iYWwnLCBzZXR0aW5nXSk7XG4gIH1cbn07XG5cbi8qKlxuICogU2V0IGRldmljZSBwcm9wZXJ0eS5cbiAqIFthbmRyb2lkLnByb3ZpZGVyLlNldHRpbmdzXXtAbGluayBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC9wcm92aWRlci9TZXR0aW5ncy5odG1sfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lc3BhY2UgLSBvbmUgb2Yge3N5c3RlbSwgc2VjdXJlLCBnbG9iYWx9LCBjYXNlLWluc2Vuc2l0aXZlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmcgLSBwcm9wZXJ0eSBuYW1lLlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB2YWx1ZSAtIHByb3BlcnR5IHZhbHVlLlxuICogQHJldHVybiB7c3RyaW5nfSBjb21tYW5kIG91dHB1dC5cbiAqL1xubWV0aG9kcy5zZXRTZXR0aW5nID0gYXN5bmMgZnVuY3Rpb24gc2V0U2V0dGluZyAobmFtZXNwYWNlLCBzZXR0aW5nLCB2YWx1ZSkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ3NldHRpbmdzJywgJ3B1dCcsIG5hbWVzcGFjZSwgc2V0dGluZywgdmFsdWVdKTtcbn07XG5cbi8qKlxuICogR2V0IGRldmljZSBwcm9wZXJ0eS5cbiAqIFthbmRyb2lkLnByb3ZpZGVyLlNldHRpbmdzXXtAbGluayBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC9wcm92aWRlci9TZXR0aW5ncy5odG1sfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lc3BhY2UgLSBvbmUgb2Yge3N5c3RlbSwgc2VjdXJlLCBnbG9iYWx9LCBjYXNlLWluc2Vuc2l0aXZlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNldHRpbmcgLSBwcm9wZXJ0eSBuYW1lLlxuICogQHJldHVybiB7c3RyaW5nfSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xubWV0aG9kcy5nZXRTZXR0aW5nID0gYXN5bmMgZnVuY3Rpb24gZ2V0U2V0dGluZyAobmFtZXNwYWNlLCBzZXR0aW5nKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLnNoZWxsKFsnc2V0dGluZ3MnLCAnZ2V0JywgbmFtZXNwYWNlLCBzZXR0aW5nXSk7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBgYWRiIGJ1Z3JlcG9ydGAgY29tbWFuZCBvdXRwdXQuIFRoaXNcbiAqIG9wZXJhdGlvbiBtYXkgdGFrZSB1cCB0byBzZXZlcmFsIG1pbnV0ZXMuXG4gKlxuICogQHBhcmFtIHs/bnVtYmVyfSB0aW1lb3V0IFsxMjAwMDBdIC0gQ29tbWFuZCB0aW1lb3V0IGluIG1pbGxpc2Vjb25kc1xuICogQHJldHVybnMge3N0cmluZ30gQ29tbWFuZCBzdGRvdXRcbiAqL1xubWV0aG9kcy5idWdyZXBvcnQgPSBhc3luYyBmdW5jdGlvbiBidWdyZXBvcnQgKHRpbWVvdXQgPSAxMjAwMDApIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2J1Z3JlcG9ydCddLCB7dGltZW91dH0pO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTY3JlZW5yZWNvcmRPcHRpb25zXG4gKiBAcHJvcGVydHkgez9zdHJpbmd9IHZpZGVvU2l6ZSAtIFRoZSBmb3JtYXQgaXMgd2lkdGh4aGVpZ2h0LlxuICogICAgICAgICAgICAgICAgICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB0aGUgZGV2aWNlJ3MgbmF0aXZlIGRpc3BsYXkgcmVzb2x1dGlvbiAoaWYgc3VwcG9ydGVkKSxcbiAqICAgICAgICAgICAgICAgICAgMTI4MHg3MjAgaWYgbm90LiBGb3IgYmVzdCByZXN1bHRzLFxuICogICAgICAgICAgICAgICAgICB1c2UgYSBzaXplIHN1cHBvcnRlZCBieSB5b3VyIGRldmljZSdzIEFkdmFuY2VkIFZpZGVvIENvZGluZyAoQVZDKSBlbmNvZGVyLlxuICogICAgICAgICAgICAgICAgICBGb3IgZXhhbXBsZSwgXCIxMjgweDcyMFwiXG4gKiBAcHJvcGVydHkgez9ib29sZWFufSBidWdSZXBvcnQgLSBTZXQgaXQgdG8gYHRydWVgIGluIG9yZGVyIHRvIGRpc3BsYXkgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBvbiB0aGUgdmlkZW8gb3ZlcmxheSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2ggYXMgYSB0aW1lc3RhbXAsIHRoYXQgaXMgaGVscGZ1bCBpbiB2aWRlb3MgY2FwdHVyZWQgdG8gaWxsdXN0cmF0ZSBidWdzLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgc2luY2UgQVBJIGxldmVsIDI3IChBbmRyb2lkIFApLlxuICogQHByb3BlcnR5IHs/c3RyaW5nfG51bWJlcn0gdGltZUxpbWl0IC0gVGhlIG1heGltdW0gcmVjb3JkaW5nIHRpbWUsIGluIHNlY29uZHMuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgZGVmYXVsdCAoYW5kIG1heGltdW0pIHZhbHVlIGlzIDE4MCAoMyBtaW51dGVzKS5cbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ3xudW1iZXJ9IGJpdFJhdGUgLSBUaGUgdmlkZW8gYml0IHJhdGUgZm9yIHRoZSB2aWRlbywgaW4gbWVnYWJpdHMgcGVyIHNlY29uZC5cbiAqICAgICAgICAgICAgICAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIDQuIFlvdSBjYW4gaW5jcmVhc2UgdGhlIGJpdCByYXRlIHRvIGltcHJvdmUgdmlkZW8gcXVhbGl0eSxcbiAqICAgICAgICAgICAgICAgIGJ1dCBkb2luZyBzbyByZXN1bHRzIGluIGxhcmdlciBtb3ZpZSBmaWxlcy5cbiAqL1xuXG4vKipcbiAqIEluaXRpYXRlIHNjcmVlbnJlY29yZCB1dGlsaXR5IG9uIHRoZSBkZXZpY2VcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb24gLSBGdWxsIHBhdGggdG8gdGhlIHdyaXRhYmxlIG1lZGlhIGZpbGUgZGVzdGluYXRpb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uIHRoZSBkZXZpY2UgZmlsZSBzeXN0ZW0uXG4gKiBAcGFyYW0gez9TY3JlZW5yZWNvcmRPcHRpb25zfSBvcHRpb25zIFt7fV1cbiAqIEByZXR1cm5zIHtTdWJQcm9jZXNzfSBzY3JlZW5yZWNvcmQgcHJvY2Vzcywgd2hpY2ggY2FuIGJlIHRoZW4gY29udHJvbGxlZCBieSB0aGUgY2xpZW50IGNvZGVcbiAqL1xubWV0aG9kcy5zY3JlZW5yZWNvcmQgPSBmdW5jdGlvbiBzY3JlZW5yZWNvcmQgKGRlc3RpbmF0aW9uLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgY21kID0gWydzY3JlZW5yZWNvcmQnXTtcbiAgY29uc3Qge1xuICAgIHZpZGVvU2l6ZSxcbiAgICBiaXRSYXRlLFxuICAgIHRpbWVMaW1pdCxcbiAgICBidWdSZXBvcnQsXG4gIH0gPSBvcHRpb25zO1xuICBpZiAodXRpbC5oYXNWYWx1ZSh2aWRlb1NpemUpKSB7XG4gICAgY21kLnB1c2goJy0tc2l6ZScsIHZpZGVvU2l6ZSk7XG4gIH1cbiAgaWYgKHV0aWwuaGFzVmFsdWUodGltZUxpbWl0KSkge1xuICAgIGNtZC5wdXNoKCctLXRpbWUtbGltaXQnLCB0aW1lTGltaXQpO1xuICB9XG4gIGlmICh1dGlsLmhhc1ZhbHVlKGJpdFJhdGUpKSB7XG4gICAgY21kLnB1c2goJy0tYml0LXJhdGUnLCBiaXRSYXRlKTtcbiAgfVxuICBpZiAoYnVnUmVwb3J0KSB7XG4gICAgY21kLnB1c2goJy0tYnVncmVwb3J0Jyk7XG4gIH1cbiAgY21kLnB1c2goZGVzdGluYXRpb24pO1xuXG4gIGNvbnN0IGZ1bGxDbWQgPSBbXG4gICAgLi4udGhpcy5leGVjdXRhYmxlLmRlZmF1bHRBcmdzLFxuICAgICdzaGVsbCcsXG4gICAgLi4uY21kXG4gIF07XG4gIGxvZy5kZWJ1ZyhgQnVpbGRpbmcgc2NyZWVucmVjb3JkIHByb2Nlc3Mgd2l0aCB0aGUgY29tbWFuZCBsaW5lOiBhZGIgJHt1dGlsLnF1b3RlKGZ1bGxDbWQpfWApO1xuICByZXR1cm4gbmV3IFN1YlByb2Nlc3ModGhpcy5leGVjdXRhYmxlLnBhdGgsIGZ1bGxDbWQpO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gaW5wdXQgbWV0aG9kIGNvbnRleHRcbiAqIGFuZCB0aGVuIHJlc3RvcmVzIHRoZSBJTUUgdG8gdGhlIG9yaWdpbmFsIHZhbHVlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGltZSAtIFZhbGlkIElNRSBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIEZ1bmN0aW9uIHRvIGV4ZWN1dGVcbiAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0IG9mIHRoZSBnaXZlbiBmdW5jdGlvblxuICovXG5tZXRob2RzLnJ1bkluSW1lQ29udGV4dCA9IGFzeW5jIGZ1bmN0aW9uIHJ1bkluSW1lQ29udGV4dCAoaW1lLCBmbikge1xuICBjb25zdCBvcmlnaW5hbEltZSA9IGF3YWl0IHRoaXMuZGVmYXVsdElNRSgpO1xuICBpZiAob3JpZ2luYWxJbWUgPT09IGltZSkge1xuICAgIGxvZy5kZWJ1ZyhgVGhlIG9yaWdpbmFsIElNRSBpcyB0aGUgc2FtZSBhcyAnJHtpbWV9Jy4gVGhlcmUgaXMgbm8gbmVlZCB0byByZXNldCBpdGApO1xuICB9IGVsc2Uge1xuICAgIGF3YWl0IHRoaXMuZW5hYmxlSU1FKGltZSk7XG4gICAgYXdhaXQgdGhpcy5zZXRJTUUoaW1lKTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL2FwcGl1bS9pc3N1ZXMvMTU5NDNcbiAgICBhd2FpdCBCLmRlbGF5KDUwMCk7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAob3JpZ2luYWxJbWUgIT09IGltZSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRJTUUob3JpZ2luYWxJbWUpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdHogZGF0YWJhc2UgdGltZSB6b25lIGZvcm1hdHRlZCB0aW1lem9uZVxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRaIGRhdGFiYXNlIFRpbWUgWm9uZXMgZm9ybWF0XG4gKlxuICogQHRocm93cyB7ZXJyb3J9IElmIGFueSBleGNlcHRpb24gaXMgcmVwb3J0ZWQgYnkgYWRiIHNoZWxsLlxuICovXG5tZXRob2RzLmdldFRpbWVab25lID0gYXN5bmMgZnVuY3Rpb24gZ2V0VGltZVpvbmUgKCkge1xuICBsb2cuZGVidWcoJ0dldHRpbmcgY3VycmVudCB0aW1lem9uZScpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdwZXJzaXN0LnN5cy50aW1lem9uZScpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBnZXR0aW5nIHRpbWV6b25lLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBsaXN0IG9mIGZlYXR1cmVzIHN1cHBvcnRlZCBieSB0aGUgZGV2aWNlIHVuZGVyIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIGZlYXR1cmUgbmFtZXMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqIEFuIGV4YW1wbGUgYWRiIGNvbW1hbmQgb3V0cHV0OlxuICogYGBgXG4gKiBjbWRcbiAqIGxzX3YyXG4gKiBmaXhlZF9wdXNoX21rZGlyXG4gKiBzaGVsbF92MlxuICogYWJiXG4gKiBzdGF0X3YyXG4gKiBhcGV4XG4gKiBhYmJfZXhlY1xuICogcmVtb3VudF9zaGVsbFxuICogZml4ZWRfcHVzaF9zeW1saW5rX3RpbWVzdGFtcFxuICogYGBgXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHJldHJpZXZpbmcgdGhlIGxpc3RcbiAqL1xubWV0aG9kcy5saXN0RmVhdHVyZXMgPSBhc3luYyBmdW5jdGlvbiBsaXN0RmVhdHVyZXMgKCkge1xuICB0aGlzLl9tZW1vaXplZEZlYXR1cmVzID0gdGhpcy5fbWVtb2l6ZWRGZWF0dXJlc1xuICAgIHx8IF8ubWVtb2l6ZShhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFkYkV4ZWMoWydmZWF0dXJlcyddKSwgKCkgPT4gdGhpcy5jdXJEZXZpY2VJZCk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIChhd2FpdCB0aGlzLl9tZW1vaXplZEZlYXR1cmVzKCkpXG4gICAgICAuc3BsaXQoL1xccysvKVxuICAgICAgLm1hcCgoeCkgPT4geC50cmltKCkpXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKF8uaW5jbHVkZXMoZS5zdGRlcnIsICd1bmtub3duIGNvbW1hbmQnKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB0aHJvdyBlO1xuICB9XG59O1xuXG4vKipcbiAqIENoZWNrcyB0aGUgc3RhdGUgb2Ygc3RyZWFtZWQgaW5zdGFsbCBmZWF0dXJlLlxuICogVGhpcyBmZWF0dXJlIGFsbG93cyB0byBzcGVlZCB1cCBhcGsgaW5zdGFsbGF0aW9uXG4gKiBzaW5jZSBpdCBkb2VzIG5vdCByZXF1aXJlIHRoZSBvcmlnaW5hbCBhcGsgdG8gYmUgcHVzaGVkIHRvXG4gKiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgZmlyc3QsIHdoaWNoIGFsc28gc2F2ZXMgc3BhY2UuXG4gKiBBbHRob3VnaCwgaXQgaXMgcmVxdWlyZWQgdGhhdCBib3RoIHRoZSBkZXZpY2UgdW5kZXIgdGVzdFxuICogYW5kIHRoZSBhZGIgc2VydmVyIGhhdmUgdGhlIG1lbnRpb25lZCBmdW5jdGlvbmFsaXR5LlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hb3NwLW1pcnJvci9wbGF0Zm9ybV9zeXN0ZW1fY29yZS9ibG9iL21hc3Rlci9hZGIvY2xpZW50L2FkYl9pbnN0YWxsLmNwcFxuICogZm9yIG1vcmUgZGV0YWlsc1xuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGZlYXR1cmUgaXMgc3VwcG9ydGVkIGJ5IGJvdGggYWRiIGFuZCB0aGVcbiAqIGRldmljZSB1bmRlciB0ZXN0XG4gKi9cbm1ldGhvZHMuaXNTdHJlYW1lZEluc3RhbGxTdXBwb3J0ZWQgPSBhc3luYyBmdW5jdGlvbiBpc1N0cmVhbWVkSW5zdGFsbFN1cHBvcnRlZCAoKSB7XG4gIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpO1xuICBwcm90by5faGVscE91dHB1dCA9IHByb3RvLl9oZWxwT3V0cHV0IHx8IGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2hlbHAnXSk7XG4gIHJldHVybiBwcm90by5faGVscE91dHB1dC5pbmNsdWRlcygnLS1zdHJlYW1pbmcnKVxuICAgICYmIChhd2FpdCB0aGlzLmxpc3RGZWF0dXJlcygpKS5pbmNsdWRlcygnY21kJyk7XG59O1xuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGluY3JlbWVudGFsIGluc3RhbGwgZmVhdHVyZSBpcyBzdXBwb3J0ZWQgYnkgQURCLlxuICogUmVhZCBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9wcmV2aWV3L2ZlYXR1cmVzI2luY3JlbWVudGFsXG4gKiBmb3IgbW9yZSBkZXRhaWxzIG9uIGl0LlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGZlYXR1cmUgaXMgc3VwcG9ydGVkIGJ5IGJvdGggYWRiIGFuZCB0aGVcbiAqIGRldmljZSB1bmRlciB0ZXN0XG4gKi9cbm1ldGhvZHMuaXNJbmNyZW1lbnRhbEluc3RhbGxTdXBwb3J0ZWQgPSBhc3luYyBmdW5jdGlvbiBpc0luY3JlbWVudGFsSW5zdGFsbFN1cHBvcnRlZCAoKSB7XG4gIGNvbnN0IHtiaW5hcnl9ID0gYXdhaXQgdGhpcy5nZXRWZXJzaW9uKCk7XG4gIGlmICghYmluYXJ5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB1dGlsLmNvbXBhcmVWZXJzaW9ucyhiaW5hcnkudmVyc2lvbiwgJz49JywgJzMwLjAuMScpXG4gICAgJiYgKGF3YWl0IHRoaXMubGlzdEZlYXR1cmVzKCkpLmluY2x1ZGVzKCdhYmJfZXhlYycpO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGxpc3Qgb2YgcGFja2FnZXMgZnJvbSBEb3plIHdoaXRlbGlzdCBvbiBBbmRyb2lkIDgrXG4gKlxuICogQHJldHVybnMge0FycmF5PHN0cmluZz59IFRoZSBsaXN0IG9mIHdoaXRlbGlzdGVkIHBhY2thZ2VzLiBBbiBleGFtcGxlIG91dHB1dDpcbiAqIHN5c3RlbSxjb20uYW5kcm9pZC5zaGVsbCwyMDAwXG4gKiBzeXN0ZW0sY29tLmdvb2dsZS5hbmRyb2lkLmNlbGxicm9hZGNhc3RyZWNlaXZlciwxMDE0M1xuICogdXNlcixpby5hcHBpdW0uc2V0dGluZ3MsMTAxNTdcbiAqL1xubWV0aG9kcy5nZXREZXZpY2VJZGxlV2hpdGVsaXN0ID0gYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlSWRsZVdoaXRlbGlzdCAoKSB7XG4gIGlmIChhd2FpdCB0aGlzLmdldEFwaUxldmVsKCkgPCAyMykge1xuICAgIC8vIERvemUgbW9kZSBoYXMgb25seSBiZWVuIGFkZGVkIHNpbmNlIEFuZHJvaWQgNlxuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGxvZy5pbmZvKCdMaXN0aW5nIHBhY2thZ2VzIGluIERvemUgd2hpdGVsaXN0Jyk7XG4gIGNvbnN0IG91dHB1dCA9IGF3YWl0IHRoaXMuc2hlbGwoWydkdW1wc3lzJywgJ2RldmljZWlkbGUnLCAnd2hpdGVsaXN0J10pO1xuICByZXR1cm4gXy50cmltKG91dHB1dCkuc3BsaXQoL1xcbi8pXG4gICAgLm1hcCgobGluZSkgPT4gXy50cmltKGxpbmUpKVxuICAgIC5maWx0ZXIoQm9vbGVhbik7XG59O1xuXG4vKipcbiAqIEFkZHMgYW4gZXhpc3RpbmcgcGFja2FnZShzKSBpbnRvIHRoZSBEb3plIHdoaXRlbGlzdCBvbiBBbmRyb2lkIDgrXG4gKlxuICogQHBhcmFtICB7Li4uc3RyaW5nfSBwYWNrYWdlcyBPbmUgb3IgbW9yZSBwYWNrYWdlcyB0byBhZGQuIElmIHRoZSBwYWNrYWdlXG4gKiBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgd2hpdGVsaXN0IHRoZW4gaXQgaXMgb25seSBnb2luZyB0byBiZSBhZGRlZCBvbmNlLlxuICogSWYgdGhlIHBhY2thZ2Ugd2l0aCB0aGUgZ2l2ZW4gbmFtZSBpcyBub3QgaW5zdGFsbGVkL25vdCBrbm93biB0aGVuIGFuIGVycm9yXG4gKiB3aWxsIGJlIHRocm93bi5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGNvbW1hbmQgdG8gYWRkIHBhY2thZ2UocykgaGFzIGJlZW4gZXhlY3V0ZWRcbiAqL1xubWV0aG9kcy5hZGRUb0RldmljZUlkbGVXaGl0ZWxpc3QgPSBhc3luYyBmdW5jdGlvbiBhZGRUb0RldmljZUlkbGVXaGl0ZWxpc3QgKC4uLnBhY2thZ2VzKSB7XG4gIGlmIChfLmlzRW1wdHkocGFja2FnZXMpIHx8IGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDIzKSB7XG4gICAgLy8gRG96ZSBtb2RlIGhhcyBvbmx5IGJlZW4gYWRkZWQgc2luY2UgQW5kcm9pZCA2XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbG9nLmluZm8oYEFkZGluZyAke3V0aWwucGx1cmFsaXplKCdwYWNrYWdlJywgcGFja2FnZXMubGVuZ3RoKX0gJHtKU09OLnN0cmluZ2lmeShwYWNrYWdlcyl9IHRvIERvemUgd2hpdGVsaXN0YCk7XG4gIGF3YWl0IHRoaXMuc2hlbGxDaHVua3MoKHBrZykgPT4gWydkdW1wc3lzJywgJ2RldmljZWlkbGUnLCAnd2hpdGVsaXN0JywgYCske3BrZ31gXSwgcGFja2FnZXMpO1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1ldGhvZHM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBSUEsSUFBQUUsS0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFB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