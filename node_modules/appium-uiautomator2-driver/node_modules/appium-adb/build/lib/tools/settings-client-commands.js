"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("../logger.js"));
var _helpers = require("../helpers.js");
var _lodash = _interopRequireDefault(require("lodash"));
var _support = require("@appium/support");
var _asyncbox = require("asyncbox");
var _utf = require("utf7");
var _teen_process = require("teen_process");
var _bluebird = _interopRequireDefault(require("bluebird"));
const SETTINGS_HELPER_ID = 'io.appium.settings';
const SETTINGS_HELPER_MAIN_ACTIVITY = '.Settings';
const WIFI_CONNECTION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.WiFiConnectionSettingReceiver`;
const WIFI_CONNECTION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.wifi`;
const DATA_CONNECTION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.DataConnectionSettingReceiver`;
const DATA_CONNECTION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.data_connection`;
const ANIMATION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.AnimationSettingReceiver`;
const ANIMATION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.animation`;
const LOCALE_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.LocaleSettingReceiver`;
const LOCALE_SETTING_ACTION = `${SETTINGS_HELPER_ID}.locale`;
const LOCATION_SERVICE = `${SETTINGS_HELPER_ID}/.LocationService`;
const LOCATION_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.LocationInfoReceiver`;
const LOCATION_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.location`;
const CLIPBOARD_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.ClipboardReceiver`;
const CLIPBOARD_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.clipboard.get`;
const NOTIFICATIONS_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.notifications`;
const SMS_LIST_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.SmsReader`;
const SMS_LIST_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.sms.read`;
const MEDIA_SCAN_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.MediaScannerReceiver`;
const MEDIA_SCAN_ACTION = `${SETTINGS_HELPER_ID}.scan_media`;
const APPIUM_IME = `${SETTINGS_HELPER_ID}/.AppiumIME`;
const UNICODE_IME = `${SETTINGS_HELPER_ID}/.UnicodeIME`;
const DEFAULT_SATELLITES_COUNT = 12;
const DEFAULT_ALTITUDE = 0.0;
const LOCATION_TRACKER_TAG = 'LocationTracker';
const GPS_CACHE_REFRESHED_LOGS = ['The current location has been successfully retrieved from Play Services', 'The current location has been successfully retrieved from Location Manager'];
const GPS_COORDINATES_PATTERN = /data="(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)"/;
const commands = {};
commands.requireRunningSettingsApp = async function requireRunningSettingsApp(opts = {}) {
  if (await this.processExists(SETTINGS_HELPER_ID)) {
    return this;
  }
  _logger.default.debug('Starting Appium Settings app');
  const {
    timeout = 5000,
    shouldRestoreCurrentApp = false
  } = opts;
  let appPackage;
  if (shouldRestoreCurrentApp) {
    try {
      ({
        appPackage
      } = await this.getFocusedPackageAndActivity());
    } catch (e) {
      _logger.default.warn(`The current application can not be restored: ${e.message}`);
    }
  }
  await this.startApp({
    pkg: SETTINGS_HELPER_ID,
    activity: SETTINGS_HELPER_MAIN_ACTIVITY,
    action: 'android.intent.action.MAIN',
    category: 'android.intent.category.LAUNCHER',
    stopApp: false,
    waitForLaunch: false
  });
  try {
    await (0, _asyncbox.waitForCondition)(async () => await this.processExists(SETTINGS_HELPER_ID), {
      waitMs: timeout,
      intervalMs: 300
    });
    if (shouldRestoreCurrentApp && appPackage) {
      try {
        await this.activateApp(appPackage);
      } catch (e) {
        _logger.default.warn(`The current application can not be restored: ${e.message}`);
      }
    }
    return this;
  } catch (err) {
    throw new Error(`Appium Settings app is not running after ${timeout}ms`);
  }
};
commands.setWifiState = async function setWifiState(on, isEmulator = false) {
  if (isEmulator) {
    await this.shell(['svc', 'wifi', on ? 'enable' : 'disable'], {
      privileged: (await this.getApiLevel()) < 26
    });
    return;
  }
  if ((await this.getApiLevel()) < 30) {
    await this.requireRunningSettingsApp({
      shouldRestoreCurrentApp: true
    });
    await this.shell(['am', 'broadcast', '-a', WIFI_CONNECTION_SETTING_ACTION, '-n', WIFI_CONNECTION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
    return;
  }
  await this.shell(['cmd', '-w', 'wifi', 'set-wifi-enabled', on ? 'enabled' : 'disabled']);
};
commands.setDataState = async function setDataState(on, isEmulator = false) {
  if (isEmulator) {
    await this.shell(['svc', 'data', on ? 'enable' : 'disable'], {
      privileged: (await this.getApiLevel()) < 26
    });
    return;
  }
  if ((await this.getApiLevel()) < 30) {
    await this.requireRunningSettingsApp({
      shouldRestoreCurrentApp: true
    });
    await this.shell(['am', 'broadcast', '-a', DATA_CONNECTION_SETTING_ACTION, '-n', DATA_CONNECTION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
    return;
  }
  await this.shell(['cmd', 'phone', 'data', on ? 'enable' : 'disable']);
};
commands.setAnimationState = async function setAnimationState(on) {
  await this.shell(['am', 'broadcast', '-a', ANIMATION_SETTING_ACTION, '-n', ANIMATION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
};
commands.setDeviceSysLocaleViaSettingApp = async function setDeviceSysLocaleViaSettingApp(language, country, script = null) {
  const params = ['am', 'broadcast', '-a', LOCALE_SETTING_ACTION, '-n', LOCALE_SETTING_RECEIVER, '--es', 'lang', language.toLowerCase(), '--es', 'country', country.toUpperCase()];
  if (script) {
    params.push('--es', 'script', script);
  }
  await this.shell(params);
};
commands.setGeoLocation = async function setGeoLocation(location, isEmulator = false) {
  const formatLocationValue = (valueName, isRequired = true) => {
    if (!_support.util.hasValue(location[valueName])) {
      if (isRequired) {
        throw new Error(`${valueName} must be provided`);
      }
      return null;
    }
    const floatValue = parseFloat(location[valueName]);
    if (!isNaN(floatValue)) {
      return `${_lodash.default.ceil(floatValue, 5)}`;
    }
    if (isRequired) {
      throw new Error(`${valueName} is expected to be a valid float number. ` + `'${location[valueName]}' is given instead`);
    }
    return null;
  };
  const longitude = formatLocationValue('longitude');
  const latitude = formatLocationValue('latitude');
  const altitude = formatLocationValue('altitude', false);
  const speed = formatLocationValue('speed', false);
  if (isEmulator) {
    const args = [longitude, latitude];
    if (!_lodash.default.isNil(altitude)) {
      args.push(altitude);
    }
    const satellites = parseInt(location.satellites, 10);
    if (!Number.isNaN(satellites) && satellites > 0 && satellites <= 12) {
      if (args.length < 3) {
        args.push(`${DEFAULT_ALTITUDE}`);
      }
      args.push(`${satellites}`);
    }
    if (!_lodash.default.isNil(speed)) {
      if (args.length < 3) {
        args.push(`${DEFAULT_ALTITUDE}`);
      }
      if (args.length < 4) {
        args.push(`${DEFAULT_SATELLITES_COUNT}`);
      }
      args.push(speed);
    }
    await this.resetTelnetAuthToken();
    await this.adbExec(['emu', 'geo', 'fix', ...args]);
    await this.adbExec(['emu', 'geo', 'fix', ...args.map(arg => arg.replace('.', ','))]);
  } else {
    const args = ['am', (await this.getApiLevel()) >= 26 ? 'start-foreground-service' : 'startservice', '-e', 'longitude', longitude, '-e', 'latitude', latitude];
    if (_support.util.hasValue(altitude)) {
      args.push('-e', 'altitude', altitude);
    }
    if (_support.util.hasValue(speed)) {
      args.push('-e', 'speed', speed);
    }
    args.push(LOCATION_SERVICE);
    await this.shell(args);
  }
};
commands.getGeoLocation = async function getGeoLocation() {
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  let output;
  try {
    output = await this.shell(['am', 'broadcast', '-n', LOCATION_RECEIVER, '-a', LOCATION_RETRIEVAL_ACTION]);
  } catch (err) {
    throw new Error(`Cannot retrieve the current geo coordinates from the device. ` + `Make sure the Appium Settings application is up to date and has location permissions. Also the location ` + `services must be enabled on the device. Original error: ${err.stderr || err.stdout || err.message}`);
  }
  const match = GPS_COORDINATES_PATTERN.exec(output);
  if (!match) {
    throw new Error(`Cannot parse the actual location values from the command output: ${output}`);
  }
  const location = {
    latitude: match[1],
    longitude: match[2],
    altitude: match[3]
  };
  _logger.default.debug(`Got geo coordinates: ${JSON.stringify(location)}`);
  return location;
};
commands.refreshGeoLocationCache = async function refreshGeoLocationCache(timeoutMs = 20000) {
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  let logcatMonitor;
  let monitoringPromise;
  if (timeoutMs > 0) {
    const cmd = [...this.executable.defaultArgs, 'logcat', '-s', LOCATION_TRACKER_TAG];
    logcatMonitor = new _teen_process.SubProcess(this.executable.path, cmd);
    const timeoutErrorMsg = `The GPS cache has not been refreshed within ${timeoutMs}ms timeout. ` + `Please make sure the device under test has Appium Settings app installed and running. ` + `Also, it is required that the device has Google Play Services installed or is running ` + `Android 10+ otherwise.`;
    monitoringPromise = new _bluebird.default((resolve, reject) => {
      setTimeout(() => reject(new Error(timeoutErrorMsg)), timeoutMs);
      logcatMonitor.on('exit', () => reject(new Error(timeoutErrorMsg)));
      ['lines-stderr', 'lines-stdout'].map(evt => logcatMonitor.on(evt, lines => {
        if (lines.some(line => GPS_CACHE_REFRESHED_LOGS.some(x => line.includes(x)))) {
          resolve();
        }
      }));
    });
    await logcatMonitor.start(0);
  }
  try {
    await this.shell(['am', 'broadcast', '-n', LOCATION_RECEIVER, '-a', LOCATION_RETRIEVAL_ACTION, '--ez', 'forceUpdate', 'true']);
  } catch (err) {
    throw new Error(`Cannot refresh the GPS cache on the device. ` + `Make sure the Appium Settings application is up to date and has location permissions. Also the location ` + `services must be enabled on the device. Original error: ${err.stderr || err.stdout || err.message}`);
  }
  if (logcatMonitor && monitoringPromise) {
    const timer = new _support.timing.Timer().start();
    _logger.default.debug(`Waiting up to ${timeoutMs}ms for the GPS cache to be refreshed`);
    try {
      await monitoringPromise;
      _logger.default.info(`The GPS cache has been successfully refreshed after ` + `${timer.getDuration().asMilliSeconds.toFixed(0)}ms`);
    } finally {
      if (logcatMonitor.isRunning) {
        await logcatMonitor.stop();
      }
    }
  } else {
    _logger.default.info('The request to refresh the GPS cache has been sent. Skipping waiting for its result.');
  }
};
commands.performEditorAction = async function performEditorAction(action) {
  _logger.default.debug(`Performing editor action: ${action}`);
  await this.runInImeContext(APPIUM_IME, async () => await this.shell(['input', 'text', `/${action}/`]));
};
commands.getClipboard = async function getClipboard() {
  _logger.default.debug('Getting the clipboard content');
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  const retrieveClipboard = async () => await this.shell(['am', 'broadcast', '-n', CLIPBOARD_RECEIVER, '-a', CLIPBOARD_RETRIEVAL_ACTION]);
  let output;
  try {
    output = (await this.getApiLevel()) >= 29 ? await this.runInImeContext(APPIUM_IME, retrieveClipboard) : await retrieveClipboard();
  } catch (err) {
    throw new Error(`Cannot retrieve the current clipboard content from the device. ` + `Make sure the Appium Settings application is up to date. ` + `Original error: ${err.message}`);
  }
  const match = /data="([^"]*)"/.exec(output);
  if (!match) {
    throw new Error(`Cannot parse the actual cliboard content from the command output: ${output}`);
  }
  return _lodash.default.trim(match[1]);
};
commands.getNotifications = async function getNotifications() {
  _logger.default.debug('Retrieving notifications');
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  let output;
  try {
    output = await this.shell(['am', 'broadcast', '-a', NOTIFICATIONS_RETRIEVAL_ACTION]);
  } catch (err) {
    throw new Error(`Cannot retrieve notifications from the device. ` + `Make sure the Appium Settings application is installed and is up to date. ` + `Original error: ${err.message}`);
  }
  return (0, _helpers.parseJsonData)(output, 'notifications');
};
commands.getSmsList = async function getSmsList(opts = {}) {
  _logger.default.debug('Retrieving the recent SMS messages');
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  const args = ['am', 'broadcast', '-n', SMS_LIST_RECEIVER, '-a', SMS_LIST_RETRIEVAL_ACTION];
  if (opts.max) {
    args.push('--es', 'max', opts.max);
  }
  let output;
  try {
    output = await this.shell(args);
  } catch (err) {
    throw new Error(`Cannot retrieve SMS list from the device. ` + `Make sure the Appium Settings application is installed and is up to date. ` + `Original error: ${err.message}`);
  }
  return (0, _helpers.parseJsonData)(output, 'SMS list');
};
commands.typeUnicode = async function typeUnicode(text) {
  if (_lodash.default.isNil(text)) {
    return false;
  }
  text = `${text}`;
  _logger.default.debug(`Typing ${_support.util.pluralize('character', text.length, true)}`);
  if (!text) {
    return false;
  }
  await this.runInImeContext(UNICODE_IME, async () => await this.inputText(_utf.imap.encode(text)));
  return true;
};
commands.scanMedia = async function scanMedia(destination) {
  _logger.default.debug(`Scanning '${destination}' for media files`);
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  const output = await this.shell(['am', 'broadcast', '-n', MEDIA_SCAN_RECEIVER, '-a', MEDIA_SCAN_ACTION, '--es', 'path', destination]);
  if (!_lodash.default.includes(output, 'result=-1')) {
    throw new Error(`No media could be scanned at '${destination}'. ` + `Check the device logcat output for more details.`);
  }
};
var _default = commands;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaGVscGVycyIsIl9sb2Rhc2giLCJfc3VwcG9ydCIsIl9hc3luY2JveCIsIl91dGYiLCJfdGVlbl9wcm9jZXNzIiwiX2JsdWViaXJkIiwiU0VUVElOR1NfSEVMUEVSX0lEIiwiU0VUVElOR1NfSEVMUEVSX01BSU5fQUNUSVZJVFkiLCJXSUZJX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUiIsIldJRklfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTiIsIkRBVEFfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSIiwiREFUQV9DT05ORUNUSU9OX1NFVFRJTkdfQUNUSU9OIiwiQU5JTUFUSU9OX1NFVFRJTkdfUkVDRUlWRVIiLCJBTklNQVRJT05fU0VUVElOR19BQ1RJT04iLCJMT0NBTEVfU0VUVElOR19SRUNFSVZFUiIsIkxPQ0FMRV9TRVRUSU5HX0FDVElPTiIsIkxPQ0FUSU9OX1NFUlZJQ0UiLCJMT0NBVElPTl9SRUNFSVZFUiIsIkxPQ0FUSU9OX1JFVFJJRVZBTF9BQ1RJT04iLCJDTElQQk9BUkRfUkVDRUlWRVIiLCJDTElQQk9BUkRfUkVUUklFVkFMX0FDVElPTiIsIk5PVElGSUNBVElPTlNfUkVUUklFVkFMX0FDVElPTiIsIlNNU19MSVNUX1JFQ0VJVkVSIiwiU01TX0xJU1RfUkVUUklFVkFMX0FDVElPTiIsIk1FRElBX1NDQU5fUkVDRUlWRVIiLCJNRURJQV9TQ0FOX0FDVElPTiIsIkFQUElVTV9JTUUiLCJVTklDT0RFX0lNRSIsIkRFRkFVTFRfU0FURUxMSVRFU19DT1VOVCIsIkRFRkFVTFRfQUxUSVRVREUiLCJMT0NBVElPTl9UUkFDS0VSX1RBRyIsIkdQU19DQUNIRV9SRUZSRVNIRURfTE9HUyIsIkdQU19DT09SRElOQVRFU19QQVRURVJOIiwiY29tbWFuZHMiLCJyZXF1aXJlUnVubmluZ1NldHRpbmdzQXBwIiwib3B0cyIsInByb2Nlc3NFeGlzdHMiLCJsb2ciLCJkZWJ1ZyIsInRpbWVvdXQiLCJzaG91bGRSZXN0b3JlQ3VycmVudEFwcCIsImFwcFBhY2thZ2UiLCJnZXRGb2N1c2VkUGFja2FnZUFuZEFjdGl2aXR5IiwiZSIsIndhcm4iLCJtZXNzYWdlIiwic3RhcnRBcHAiLCJwa2ciLCJhY3Rpdml0eSIsImFjdGlvbiIsImNhdGVnb3J5Iiwic3RvcEFwcCIsIndhaXRGb3JMYXVuY2giLCJ3YWl0Rm9yQ29uZGl0aW9uIiwid2FpdE1zIiwiaW50ZXJ2YWxNcyIsImFjdGl2YXRlQXBwIiwiZXJyIiwiRXJyb3IiLCJzZXRXaWZpU3RhdGUiLCJvbiIsImlzRW11bGF0b3IiLCJzaGVsbCIsInByaXZpbGVnZWQiLCJnZXRBcGlMZXZlbCIsInNldERhdGFTdGF0ZSIsInNldEFuaW1hdGlvblN0YXRlIiwic2V0RGV2aWNlU3lzTG9jYWxlVmlhU2V0dGluZ0FwcCIsImxhbmd1YWdlIiwiY291bnRyeSIsInNjcmlwdCIsInBhcmFtcyIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJwdXNoIiwic2V0R2VvTG9jYXRpb24iLCJsb2NhdGlvbiIsImZvcm1hdExvY2F0aW9uVmFsdWUiLCJ2YWx1ZU5hbWUiLCJpc1JlcXVpcmVkIiwidXRpbCIsImhhc1ZhbHVlIiwiZmxvYXRWYWx1ZSIsInBhcnNlRmxvYXQiLCJpc05hTiIsIl8iLCJjZWlsIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJhbHRpdHVkZSIsInNwZWVkIiwiYXJncyIsImlzTmlsIiwic2F0ZWxsaXRlcyIsInBhcnNlSW50IiwiTnVtYmVyIiwibGVuZ3RoIiwicmVzZXRUZWxuZXRBdXRoVG9rZW4iLCJhZGJFeGVjIiwibWFwIiwiYXJnIiwicmVwbGFjZSIsImdldEdlb0xvY2F0aW9uIiwib3V0cHV0Iiwic3RkZXJyIiwic3Rkb3V0IiwibWF0Y2giLCJleGVjIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlZnJlc2hHZW9Mb2NhdGlvbkNhY2hlIiwidGltZW91dE1zIiwibG9nY2F0TW9uaXRvciIsIm1vbml0b3JpbmdQcm9taXNlIiwiY21kIiwiZXhlY3V0YWJsZSIsImRlZmF1bHRBcmdzIiwiU3ViUHJvY2VzcyIsInBhdGgiLCJ0aW1lb3V0RXJyb3JNc2ciLCJCIiwicmVzb2x2ZSIsInJlamVjdCIsInNldFRpbWVvdXQiLCJldnQiLCJsaW5lcyIsInNvbWUiLCJsaW5lIiwieCIsImluY2x1ZGVzIiwic3RhcnQiLCJ0aW1lciIsInRpbWluZyIsIlRpbWVyIiwiaW5mbyIsImdldER1cmF0aW9uIiwiYXNNaWxsaVNlY29uZHMiLCJ0b0ZpeGVkIiwiaXNSdW5uaW5nIiwic3RvcCIsInBlcmZvcm1FZGl0b3JBY3Rpb24iLCJydW5JbkltZUNvbnRleHQiLCJnZXRDbGlwYm9hcmQiLCJyZXRyaWV2ZUNsaXBib2FyZCIsInRyaW0iLCJnZXROb3RpZmljYXRpb25zIiwicGFyc2VKc29uRGF0YSIsImdldFNtc0xpc3QiLCJtYXgiLCJ0eXBlVW5pY29kZSIsInRleHQiLCJwbHVyYWxpemUiLCJpbnB1dFRleHQiLCJpbWFwIiwiZW5jb2RlIiwic2Nhbk1lZGlhIiwiZGVzdGluYXRpb24iLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL3Rvb2xzL3NldHRpbmdzLWNsaWVudC1jb21tYW5kcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBwYXJzZUpzb25EYXRhIH0gZnJvbSAnLi4vaGVscGVycy5qcyc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgdXRpbCwgdGltaW5nIH0gZnJvbSAnQGFwcGl1bS9zdXBwb3J0JztcbmltcG9ydCB7IHdhaXRGb3JDb25kaXRpb24gfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgeyBpbWFwIH0gZnJvbSAndXRmNyc7XG5pbXBvcnQgeyBTdWJQcm9jZXNzIH0gZnJvbSAndGVlbl9wcm9jZXNzJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcblxuY29uc3QgU0VUVElOR1NfSEVMUEVSX0lEID0gJ2lvLmFwcGl1bS5zZXR0aW5ncyc7XG5jb25zdCBTRVRUSU5HU19IRUxQRVJfTUFJTl9BQ1RJVklUWSA9ICcuU2V0dGluZ3MnO1xuY29uc3QgV0lGSV9DT05ORUNUSU9OX1NFVFRJTkdfUkVDRUlWRVIgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5yZWNlaXZlcnMuV2lGaUNvbm5lY3Rpb25TZXR0aW5nUmVjZWl2ZXJgO1xuY29uc3QgV0lGSV9DT05ORUNUSU9OX1NFVFRJTkdfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS53aWZpYDtcbmNvbnN0IERBVEFfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLkRhdGFDb25uZWN0aW9uU2V0dGluZ1JlY2VpdmVyYDtcbmNvbnN0IERBVEFfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0uZGF0YV9jb25uZWN0aW9uYDtcbmNvbnN0IEFOSU1BVElPTl9TRVRUSU5HX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLkFuaW1hdGlvblNldHRpbmdSZWNlaXZlcmA7XG5jb25zdCBBTklNQVRJT05fU0VUVElOR19BQ1RJT04gPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9LmFuaW1hdGlvbmA7XG5jb25zdCBMT0NBTEVfU0VUVElOR19SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5Mb2NhbGVTZXR0aW5nUmVjZWl2ZXJgO1xuY29uc3QgTE9DQUxFX1NFVFRJTkdfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5sb2NhbGVgO1xuY29uc3QgTE9DQVRJT05fU0VSVklDRSA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLkxvY2F0aW9uU2VydmljZWA7XG5jb25zdCBMT0NBVElPTl9SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5Mb2NhdGlvbkluZm9SZWNlaXZlcmA7XG5jb25zdCBMT0NBVElPTl9SRVRSSUVWQUxfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5sb2NhdGlvbmA7XG5jb25zdCBDTElQQk9BUkRfUkVDRUlWRVIgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5yZWNlaXZlcnMuQ2xpcGJvYXJkUmVjZWl2ZXJgO1xuY29uc3QgQ0xJUEJPQVJEX1JFVFJJRVZBTF9BQ1RJT04gPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9LmNsaXBib2FyZC5nZXRgO1xuY29uc3QgTk9USUZJQ0FUSU9OU19SRVRSSUVWQUxfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5ub3RpZmljYXRpb25zYDtcbmNvbnN0IFNNU19MSVNUX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLlNtc1JlYWRlcmA7XG5jb25zdCBTTVNfTElTVF9SRVRSSUVWQUxfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5zbXMucmVhZGA7XG5jb25zdCBNRURJQV9TQ0FOX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLk1lZGlhU2Nhbm5lclJlY2VpdmVyYDtcbmNvbnN0IE1FRElBX1NDQU5fQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5zY2FuX21lZGlhYDtcbmNvbnN0IEFQUElVTV9JTUUgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5BcHBpdW1JTUVgO1xuY29uc3QgVU5JQ09ERV9JTUUgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5Vbmljb2RlSU1FYDtcbmNvbnN0IERFRkFVTFRfU0FURUxMSVRFU19DT1VOVCA9IDEyO1xuY29uc3QgREVGQVVMVF9BTFRJVFVERSA9IDAuMDtcbmNvbnN0IExPQ0FUSU9OX1RSQUNLRVJfVEFHID0gJ0xvY2F0aW9uVHJhY2tlcic7XG5jb25zdCBHUFNfQ0FDSEVfUkVGUkVTSEVEX0xPR1MgPSBbXG4gICdUaGUgY3VycmVudCBsb2NhdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcmV0cmlldmVkIGZyb20gUGxheSBTZXJ2aWNlcycsXG4gICdUaGUgY3VycmVudCBsb2NhdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcmV0cmlldmVkIGZyb20gTG9jYXRpb24gTWFuYWdlcidcbl07XG5cbmNvbnN0IEdQU19DT09SRElOQVRFU19QQVRURVJOID0gL2RhdGE9XCIoLT9bXFxkLl0rKVxccysoLT9bXFxkLl0rKVxccysoLT9bXFxkLl0rKVwiLztcblxuY29uc3QgY29tbWFuZHMgPSB7fTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTZXR0aW5nc0FwcFN0YXJ0dXBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gdGltZW91dCBbNTAwMF0gVGhlIG1heGltdW0gbnVtYmVyIG9mIG1pbGxpc2Vjb25kc1xuICogdG8gd2FpdCB1bnRpbCB0aGUgYXBwIGhhcyBzdGFydGVkXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHNob3VsZFJlc3RvcmVDdXJyZW50QXBwIFtmYWxzZV0gV2hldGhlciB0byByZXN0b3JlXG4gKiB0aGUgYWN0aXZpdHkgd2hpY2ggd2FzIHRoZSBjdXJyZW50IG9uZSBiZWZvcmUgU2V0dGluZ3Mgc3RhcnR1cFxuICovXG5cbi8qKlxuICogRW5zdXJlcyB0aGF0IEFwcGl1bSBTZXR0aW5ncyBoZWxwZXIgYXBwbGljYXRpb24gaXMgcnVubmluZ1xuICogYW5kIHN0YXJ0cyBpdCBpZiBuZWNlc3NhcnlcbiAqXG4gKiBAcGFyYW0ge1NldHRpbmdzQXBwU3RhcnR1cE9wdGlvbnN9IG9wdHNcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBBcHBpdW0gU2V0dGluZ3MgaGFzIGZhaWxlZCB0byBzdGFydFxuICogQHJldHVybnMge0FEQn0gc2VsZiBpbnN0YW5jZSBmb3IgY2hhaW5pbmdcbiAqL1xuY29tbWFuZHMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCA9IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVSdW5uaW5nU2V0dGluZ3NBcHAgKG9wdHMgPSB7fSkge1xuICBpZiAoYXdhaXQgdGhpcy5wcm9jZXNzRXhpc3RzKFNFVFRJTkdTX0hFTFBFUl9JRCkpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxvZy5kZWJ1ZygnU3RhcnRpbmcgQXBwaXVtIFNldHRpbmdzIGFwcCcpO1xuICBjb25zdCB7XG4gICAgdGltZW91dCA9IDUwMDAsXG4gICAgc2hvdWxkUmVzdG9yZUN1cnJlbnRBcHAgPSBmYWxzZSxcbiAgfSA9IG9wdHM7XG4gIGxldCBhcHBQYWNrYWdlO1xuICBpZiAoc2hvdWxkUmVzdG9yZUN1cnJlbnRBcHApIHtcbiAgICB0cnkge1xuICAgICAgKHthcHBQYWNrYWdlfSA9IGF3YWl0IHRoaXMuZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eSgpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2cud2FybihgVGhlIGN1cnJlbnQgYXBwbGljYXRpb24gY2FuIG5vdCBiZSByZXN0b3JlZDogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG4gIGF3YWl0IHRoaXMuc3RhcnRBcHAoe1xuICAgIHBrZzogU0VUVElOR1NfSEVMUEVSX0lELFxuICAgIGFjdGl2aXR5OiBTRVRUSU5HU19IRUxQRVJfTUFJTl9BQ1RJVklUWSxcbiAgICBhY3Rpb246ICdhbmRyb2lkLmludGVudC5hY3Rpb24uTUFJTicsXG4gICAgY2F0ZWdvcnk6ICdhbmRyb2lkLmludGVudC5jYXRlZ29yeS5MQVVOQ0hFUicsXG4gICAgc3RvcEFwcDogZmFsc2UsXG4gICAgd2FpdEZvckxhdW5jaDogZmFsc2UsXG4gIH0pO1xuICB0cnkge1xuICAgIGF3YWl0IHdhaXRGb3JDb25kaXRpb24oYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5wcm9jZXNzRXhpc3RzKFNFVFRJTkdTX0hFTFBFUl9JRCksIHtcbiAgICAgIHdhaXRNczogdGltZW91dCxcbiAgICAgIGludGVydmFsTXM6IDMwMCxcbiAgICB9KTtcbiAgICBpZiAoc2hvdWxkUmVzdG9yZUN1cnJlbnRBcHAgJiYgYXBwUGFja2FnZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZUFwcChhcHBQYWNrYWdlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nLndhcm4oYFRoZSBjdXJyZW50IGFwcGxpY2F0aW9uIGNhbiBub3QgYmUgcmVzdG9yZWQ6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBcHBpdW0gU2V0dGluZ3MgYXBwIGlzIG5vdCBydW5uaW5nIGFmdGVyICR7dGltZW91dH1tc2ApO1xuICB9XG59O1xuXG4vKipcbiAqIENoYW5nZSB0aGUgc3RhdGUgb2YgV2lGaSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSBvbiAtIFRydWUgdG8gZW5hYmxlIGFuZCBmYWxzZSB0byBkaXNhYmxlIGl0LlxuICogQHBhcmFtIHtib29sZWFufSBpc0VtdWxhdG9yIFtmYWxzZV0gLSBTZXQgaXQgdG8gdHJ1ZSBpZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgYW4gZW11bGF0b3IgcmF0aGVyIHRoYW4gYSByZWFsIGRldmljZS5cbiAqL1xuY29tbWFuZHMuc2V0V2lmaVN0YXRlID0gYXN5bmMgZnVuY3Rpb24gc2V0V2lmaVN0YXRlIChvbiwgaXNFbXVsYXRvciA9IGZhbHNlKSB7XG4gIGlmIChpc0VtdWxhdG9yKSB7XG4gICAgLy8gVGhlIHN2YyBjb21tYW5kIGRvZXMgbm90IHJlcXVpcmUgdG8gYmUgcm9vdCBzaW5jZSBBUEkgMjZcbiAgICBhd2FpdCB0aGlzLnNoZWxsKFsnc3ZjJywgJ3dpZmknLCBvbiA/ICdlbmFibGUnIDogJ2Rpc2FibGUnXSwge1xuICAgICAgcHJpdmlsZWdlZDogYXdhaXQgdGhpcy5nZXRBcGlMZXZlbCgpIDwgMjYsXG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDMwKSB7XG4gICAgLy8gQW5kcm9pZCBiZWxvdyBBUEkgMzAgZG9lcyBub3QgaGF2ZSBhIGRlZGljYXRlZCBhZGIgY29tbWFuZFxuICAgIC8vIHRvIG1hbmlwdWxhdGUgd2lmaSBjb25uZWN0aW9uIHN0YXRlLCBzbyB0cnkgdG8gZG8gaXQgdmlhIFNldHRpbmdzIGFwcFxuICAgIC8vIGFzIGEgd29ya2Fyb3VuZFxuICAgIGF3YWl0IHRoaXMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCh7c2hvdWxkUmVzdG9yZUN1cnJlbnRBcHA6IHRydWV9KTtcblxuICAgIGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgICAnLWEnLCBXSUZJX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04sXG4gICAgICAnLW4nLCBXSUZJX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUixcbiAgICAgICctLWVzJywgJ3NldHN0YXR1cycsIG9uID8gJ2VuYWJsZScgOiAnZGlzYWJsZSdcbiAgICBdKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCB0aGlzLnNoZWxsKFsnY21kJywgJy13JywgJ3dpZmknLCAnc2V0LXdpZmktZW5hYmxlZCcsIG9uID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ10pO1xufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIERhdGEgdHJhbnNmZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbmNvbW1hbmRzLnNldERhdGFTdGF0ZSA9IGFzeW5jIGZ1bmN0aW9uIHNldERhdGFTdGF0ZSAob24sIGlzRW11bGF0b3IgPSBmYWxzZSkge1xuICBpZiAoaXNFbXVsYXRvcikge1xuICAgIC8vIFRoZSBzdmMgY29tbWFuZCBkb2VzIG5vdCByZXF1aXJlIHRvIGJlIHJvb3Qgc2luY2UgQVBJIDI2XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3N2YycsICdkYXRhJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10sIHtcbiAgICAgIHByaXZpbGVnZWQ6IGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDI2LFxuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChhd2FpdCB0aGlzLmdldEFwaUxldmVsKCkgPCAzMCkge1xuICAgIGF3YWl0IHRoaXMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCh7c2hvdWxkUmVzdG9yZUN1cnJlbnRBcHA6IHRydWV9KTtcblxuICAgIGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgICAnLWEnLCBEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04sXG4gICAgICAnLW4nLCBEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUixcbiAgICAgICctLWVzJywgJ3NldHN0YXR1cycsIG9uID8gJ2VuYWJsZScgOiAnZGlzYWJsZSdcbiAgICBdKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCB0aGlzLnNoZWxsKFsnY21kJywgJ3Bob25lJywgJ2RhdGEnLCBvbiA/ICdlbmFibGUnIDogJ2Rpc2FibGUnXSk7XG59O1xuXG4vKipcbiAqIENoYW5nZSB0aGUgc3RhdGUgb2YgYW5pbWF0aW9uIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIEFuaW1hdGlvbiBvbiB0aGUgZGV2aWNlIGlzIGNvbnRyb2xsZWQgYnkgdGhlIGZvbGxvd2luZyBnbG9iYWwgcHJvcGVydGllczpcbiAqIFtBTklNQVRPUl9EVVJBVElPTl9TQ0FMRV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuR2xvYmFsLmh0bWwjQU5JTUFUT1JfRFVSQVRJT05fU0NBTEV9LFxuICogW1RSQU5TSVRJT05fQU5JTUFUSU9OX1NDQUxFXXtAbGluayBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC9wcm92aWRlci9TZXR0aW5ncy5HbG9iYWwuaHRtbCNUUkFOU0lUSU9OX0FOSU1BVElPTl9TQ0FMRX0sXG4gKiBbV0lORE9XX0FOSU1BVElPTl9TQ0FMRV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuR2xvYmFsLmh0bWwjV0lORE9XX0FOSU1BVElPTl9TQ0FMRX0uXG4gKiBUaGlzIG1ldGhvZCBzZXRzIGFsbCB0aGlzIHByb3BlcnRpZXMgdG8gMC4wIHRvIGRpc2FibGUgKDEuMCB0byBlbmFibGUpIGFuaW1hdGlvbi5cbiAqXG4gKiBUdXJuaW5nIG9mZiBhbmltYXRpb24gbWlnaHQgYmUgdXNlZnVsIHRvIGltcHJvdmUgc3RhYmlsaXR5XG4gKiBhbmQgcmVkdWNlIHRlc3RzIGV4ZWN1dGlvbiB0aW1lLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqL1xuY29tbWFuZHMuc2V0QW5pbWF0aW9uU3RhdGUgPSBhc3luYyBmdW5jdGlvbiBzZXRBbmltYXRpb25TdGF0ZSAob24pIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgJy1hJywgQU5JTUFUSU9OX1NFVFRJTkdfQUNUSU9OLFxuICAgICctbicsIEFOSU1BVElPTl9TRVRUSU5HX1JFQ0VJVkVSLFxuICAgICctLWVzJywgJ3NldHN0YXR1cycsIG9uID8gJ2VuYWJsZScgOiAnZGlzYWJsZSdcbiAgXSk7XG59O1xuXG4vKipcbiAqIENoYW5nZSB0aGUgbG9jYWxlIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC4gRG9uJ3QgbmVlZCB0byByZWJvb3QgdGhlIGRldmljZSBhZnRlciBjaGFuZ2luZyB0aGUgbG9jYWxlLlxuICogVGhpcyBtZXRob2Qgc2V0cyBhbiBhcmJpdHJhcnkgbG9jYWxlIGZvbGxvd2luZzpcbiAqICAgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2phdmEvdXRpbC9Mb2NhbGUuaHRtbFxuICogICBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvamF2YS91dGlsL0xvY2FsZS5odG1sI0xvY2FsZShqYXZhLmxhbmcuU3RyaW5nLCUyMGphdmEubGFuZy5TdHJpbmcpXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gTGFuZ3VhZ2UuIGUuZy4gZW4sIGphXG4gKiBAcGFyYW0ge3N0cmluZ30gY291bnRyeSAtIENvdW50cnkuIGUuZy4gVVMsIEpQXG4gKiBAcGFyYW0gez9zdHJpbmd9IHNjcmlwdCAtIFNjcmlwdC4gZS5nLiBIYW5zIGluIGB6aC1IYW5zLUNOYFxuICovXG5jb21tYW5kcy5zZXREZXZpY2VTeXNMb2NhbGVWaWFTZXR0aW5nQXBwID0gYXN5bmMgZnVuY3Rpb24gc2V0RGV2aWNlU3lzTG9jYWxlVmlhU2V0dGluZ0FwcCAobGFuZ3VhZ2UsIGNvdW50cnksIHNjcmlwdCA9IG51bGwpIHtcbiAgY29uc3QgcGFyYW1zID0gW1xuICAgICdhbScsICdicm9hZGNhc3QnLFxuICAgICctYScsIExPQ0FMRV9TRVRUSU5HX0FDVElPTixcbiAgICAnLW4nLCBMT0NBTEVfU0VUVElOR19SRUNFSVZFUixcbiAgICAnLS1lcycsICdsYW5nJywgbGFuZ3VhZ2UudG9Mb3dlckNhc2UoKSxcbiAgICAnLS1lcycsICdjb3VudHJ5JywgY291bnRyeS50b1VwcGVyQ2FzZSgpXG4gIF07XG5cbiAgaWYgKHNjcmlwdCkge1xuICAgIHBhcmFtcy5wdXNoKCctLWVzJywgJ3NjcmlwdCcsIHNjcmlwdCk7XG4gIH1cblxuICBhd2FpdCB0aGlzLnNoZWxsKHBhcmFtcyk7XG59O1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTG9jYXRpb25cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfHN0cmluZ30gbG9uZ2l0dWRlIC0gVmFsaWQgbG9uZ2l0dWRlIHZhbHVlLlxuICogQHByb3BlcnR5IHtudW1iZXJ8c3RyaW5nfSBsYXRpdHVkZSAtIFZhbGlkIGxhdGl0dWRlIHZhbHVlLlxuICogQHByb3BlcnR5IHs/bnVtYmVyfHN0cmluZ30gYWx0aXR1ZGUgLSBWYWxpZCBhbHRpdHVkZSB2YWx1ZS5cbiAqIEBwcm9wZXJ0eSB7P251bWJlcnxzdHJpbmd9IHNhdGVsbGl0ZXMgWzEyXSAtIE51bWJlciBvZiBzYXRlbGxpdGVzIGJlaW5nIHRyYWNrZWQgKDEtMTIpLlxuICogVGhpcyB2YWx1ZSBpcyBpZ25vcmVkIG9uIHJlYWwgZGV2aWNlcy5cbiAqIEBwcm9wZXJ0eSB7P251bWJlcnxzdHJpbmd9IHNwZWVkIC0gVmFsaWQgc3BlZWQgdmFsdWUuXG4gKiBTaG91bGQgYmUgZ3JlYXRlciB0aGFuIDAuMCBtZXRlcnMvc2Vjb25kIGZvciByZWFsIGRldmljZXMgb3IgMC4wIGtub3RzXG4gKiBmb3IgZW11bGF0b3JzLlxuICovXG5cbi8qKlxuICogRW11bGF0ZSBnZW9sb2NhdGlvbiBjb29yZGluYXRlcyBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtMb2NhdGlvbn0gbG9jYXRpb24gLSBMb2NhdGlvbiBvYmplY3QuIFRoZSBgYWx0aXR1ZGVgIHZhbHVlIGlzIGlnbm9yZWRcbiAqIHdoaWxlIG1vY2tpbmcgdGhlIHBvc2l0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBpc0VtdWxhdG9yIFtmYWxzZV0gLSBTZXQgaXQgdG8gdHJ1ZSBpZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgYW4gZW11bGF0b3IgcmF0aGVyIHRoYW4gYSByZWFsIGRldmljZS5cbiAqL1xuY29tbWFuZHMuc2V0R2VvTG9jYXRpb24gPSBhc3luYyBmdW5jdGlvbiBzZXRHZW9Mb2NhdGlvbiAobG9jYXRpb24sIGlzRW11bGF0b3IgPSBmYWxzZSkge1xuICBjb25zdCBmb3JtYXRMb2NhdGlvblZhbHVlID0gKHZhbHVlTmFtZSwgaXNSZXF1aXJlZCA9IHRydWUpID0+IHtcbiAgICBpZiAoIXV0aWwuaGFzVmFsdWUobG9jYXRpb25bdmFsdWVOYW1lXSkpIHtcbiAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt2YWx1ZU5hbWV9IG11c3QgYmUgcHJvdmlkZWRgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBmbG9hdFZhbHVlID0gcGFyc2VGbG9hdChsb2NhdGlvblt2YWx1ZU5hbWVdKTtcbiAgICBpZiAoIWlzTmFOKGZsb2F0VmFsdWUpKSB7XG4gICAgICByZXR1cm4gYCR7Xy5jZWlsKGZsb2F0VmFsdWUsIDUpfWA7XG4gICAgfVxuICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dmFsdWVOYW1lfSBpcyBleHBlY3RlZCB0byBiZSBhIHZhbGlkIGZsb2F0IG51bWJlci4gYCArXG4gICAgICAgIGAnJHtsb2NhdGlvblt2YWx1ZU5hbWVdfScgaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbiAgY29uc3QgbG9uZ2l0dWRlID0gZm9ybWF0TG9jYXRpb25WYWx1ZSgnbG9uZ2l0dWRlJyk7XG4gIGNvbnN0IGxhdGl0dWRlID0gZm9ybWF0TG9jYXRpb25WYWx1ZSgnbGF0aXR1ZGUnKTtcbiAgY29uc3QgYWx0aXR1ZGUgPSBmb3JtYXRMb2NhdGlvblZhbHVlKCdhbHRpdHVkZScsIGZhbHNlKTtcbiAgY29uc3Qgc3BlZWQgPSBmb3JtYXRMb2NhdGlvblZhbHVlKCdzcGVlZCcsIGZhbHNlKTtcbiAgaWYgKGlzRW11bGF0b3IpIHtcbiAgICBjb25zdCBhcmdzID0gW2xvbmdpdHVkZSwgbGF0aXR1ZGVdO1xuICAgIGlmICghXy5pc05pbChhbHRpdHVkZSkpIHtcbiAgICAgIGFyZ3MucHVzaChhbHRpdHVkZSk7XG4gICAgfVxuICAgIGNvbnN0IHNhdGVsbGl0ZXMgPSBwYXJzZUludChsb2NhdGlvbi5zYXRlbGxpdGVzLCAxMCk7XG4gICAgaWYgKCFOdW1iZXIuaXNOYU4oc2F0ZWxsaXRlcykgJiYgc2F0ZWxsaXRlcyA+IDAgJiYgc2F0ZWxsaXRlcyA8PSAxMikge1xuICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgMykge1xuICAgICAgICBhcmdzLnB1c2goYCR7REVGQVVMVF9BTFRJVFVERX1gKTtcbiAgICAgIH1cbiAgICAgIGFyZ3MucHVzaChgJHtzYXRlbGxpdGVzfWApO1xuICAgIH1cbiAgICBpZiAoIV8uaXNOaWwoc3BlZWQpKSB7XG4gICAgICBpZiAoYXJncy5sZW5ndGggPCAzKSB7XG4gICAgICAgIGFyZ3MucHVzaChgJHtERUZBVUxUX0FMVElUVURFfWApO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgNCkge1xuICAgICAgICBhcmdzLnB1c2goYCR7REVGQVVMVF9TQVRFTExJVEVTX0NPVU5UfWApO1xuICAgICAgfVxuICAgICAgYXJncy5wdXNoKHNwZWVkKTtcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5yZXNldFRlbG5ldEF1dGhUb2tlbigpO1xuICAgIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2VtdScsICdnZW8nLCAnZml4JywgLi4uYXJnc10pO1xuICAgIC8vIEEgd29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9hbmRyb2lkL2lzc3Vlcy9kZXRhaWw/aWQ9MjA2MTgwXG4gICAgYXdhaXQgdGhpcy5hZGJFeGVjKFsnZW11JywgJ2dlbycsICdmaXgnLCAuLi4oYXJncy5tYXAoKGFyZykgPT4gYXJnLnJlcGxhY2UoJy4nLCAnLCcpKSldKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBhcmdzID0gW1xuICAgICAgJ2FtJywgKGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA+PSAyNikgPyAnc3RhcnQtZm9yZWdyb3VuZC1zZXJ2aWNlJyA6ICdzdGFydHNlcnZpY2UnLFxuICAgICAgJy1lJywgJ2xvbmdpdHVkZScsIGxvbmdpdHVkZSxcbiAgICAgICctZScsICdsYXRpdHVkZScsIGxhdGl0dWRlLFxuICAgIF07XG4gICAgaWYgKHV0aWwuaGFzVmFsdWUoYWx0aXR1ZGUpKSB7XG4gICAgICBhcmdzLnB1c2goJy1lJywgJ2FsdGl0dWRlJywgYWx0aXR1ZGUpO1xuICAgIH1cbiAgICBpZiAodXRpbC5oYXNWYWx1ZShzcGVlZCkpIHtcbiAgICAgIGFyZ3MucHVzaCgnLWUnLCAnc3BlZWQnLCBzcGVlZCk7XG4gICAgfVxuICAgIGFyZ3MucHVzaChMT0NBVElPTl9TRVJWSUNFKTtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKGFyZ3MpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBjYWNoZWQgR1BTIGxvY2F0aW9uIGZyb20gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm5zIHtMb2NhdGlvbn0gVGhlIGN1cnJlbnQgbG9jYXRpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY3VycmVudCBsb2NhdGlvbiBjYW5ub3QgYmUgcmV0cmlldmVkXG4gKi9cbmNvbW1hbmRzLmdldEdlb0xvY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gZ2V0R2VvTG9jYXRpb24gKCkge1xuICBhd2FpdCB0aGlzLnJlcXVpcmVSdW5uaW5nU2V0dGluZ3NBcHAoe3Nob3VsZFJlc3RvcmVDdXJyZW50QXBwOiB0cnVlfSk7XG5cbiAgbGV0IG91dHB1dDtcbiAgdHJ5IHtcbiAgICBvdXRwdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAgICdhbScsICdicm9hZGNhc3QnLFxuICAgICAgJy1uJywgTE9DQVRJT05fUkVDRUlWRVIsXG4gICAgICAnLWEnLCBMT0NBVElPTl9SRVRSSUVWQUxfQUNUSU9OLFxuICAgIF0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZXRyaWV2ZSB0aGUgY3VycmVudCBnZW8gY29vcmRpbmF0ZXMgZnJvbSB0aGUgZGV2aWNlLiBgICtcbiAgICAgIGBNYWtlIHN1cmUgdGhlIEFwcGl1bSBTZXR0aW5ncyBhcHBsaWNhdGlvbiBpcyB1cCB0byBkYXRlIGFuZCBoYXMgbG9jYXRpb24gcGVybWlzc2lvbnMuIEFsc28gdGhlIGxvY2F0aW9uIGAgK1xuICAgICAgYHNlcnZpY2VzIG11c3QgYmUgZW5hYmxlZCBvbiB0aGUgZGV2aWNlLiBPcmlnaW5hbCBlcnJvcjogJHtlcnIuc3RkZXJyIHx8IGVyci5zdGRvdXQgfHwgZXJyLm1lc3NhZ2V9YCk7XG4gIH1cblxuICBjb25zdCBtYXRjaCA9IEdQU19DT09SRElOQVRFU19QQVRURVJOLmV4ZWMob3V0cHV0KTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHBhcnNlIHRoZSBhY3R1YWwgbG9jYXRpb24gdmFsdWVzIGZyb20gdGhlIGNvbW1hbmQgb3V0cHV0OiAke291dHB1dH1gKTtcbiAgfVxuICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICBsYXRpdHVkZTogbWF0Y2hbMV0sXG4gICAgbG9uZ2l0dWRlOiBtYXRjaFsyXSxcbiAgICBhbHRpdHVkZTogbWF0Y2hbM10sXG4gIH07XG4gIGxvZy5kZWJ1ZyhgR290IGdlbyBjb29yZGluYXRlczogJHtKU09OLnN0cmluZ2lmeShsb2NhdGlvbil9YCk7XG4gIHJldHVybiBsb2NhdGlvbjtcbn07XG5cbi8qKlxuICogU2VuZHMgYW4gYXN5bmMgcmVxdWVzdCB0byByZWZyZXNoIHRoZSBHUFMgY2FjaGUuXG4gKiBUaGlzIGZlYXR1cmUgb25seSB3b3JrcyBpZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgaGFzXG4gKiBHb29nbGUgUGxheSBTZXJ2aWNlcyBpbnN0YWxsZWQuIEluIGNhc2UgdGhlIHZhbmlsbGFcbiAqIExvY2F0aW9uTWFuYWdlciBpcyB1c2VkIHRoZSBkZXZpY2UgQVBJIGxldmVsIG11c3QgYmUgYXRcbiAqIHZlcnNpb24gMzAgKEFuZHJvaWQgUikgb3IgaGlnaGVyLlxuICpcbiAqIEBwYXJhbSB0aW1lb3V0TXMgWzIwMDAwXSBUaGUgbWF4aW11bSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzXG4gKiB0byBibG9jayB1bnRpbCBHUFMgY2FjaGUgaXMgcmVmcmVzaGVkLiBQcm92aWRpbmcgemVybyBvciBhIG5lZ2F0aXZlXG4gKiB2YWx1ZSB0byBpdCBza2lwcyB3YWl0aW5nIGNvbXBsZXRlbHkuXG4gKlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBHUFMgY2FjaGUgY2Fubm90IGJlIHJlZnJlc2hlZC5cbiAqL1xuY29tbWFuZHMucmVmcmVzaEdlb0xvY2F0aW9uQ2FjaGUgPSBhc3luYyBmdW5jdGlvbiByZWZyZXNoR2VvTG9jYXRpb25DYWNoZSAodGltZW91dE1zID0gMjAwMDApIHtcbiAgYXdhaXQgdGhpcy5yZXF1aXJlUnVubmluZ1NldHRpbmdzQXBwKHtzaG91bGRSZXN0b3JlQ3VycmVudEFwcDogdHJ1ZX0pO1xuXG4gIGxldCBsb2djYXRNb25pdG9yO1xuICBsZXQgbW9uaXRvcmluZ1Byb21pc2U7XG5cbiAgaWYgKHRpbWVvdXRNcyA+IDApIHtcbiAgICBjb25zdCBjbWQgPSBbXG4gICAgICAuLi50aGlzLmV4ZWN1dGFibGUuZGVmYXVsdEFyZ3MsXG4gICAgICAnbG9nY2F0JywgJy1zJywgTE9DQVRJT05fVFJBQ0tFUl9UQUcsXG4gICAgXTtcbiAgICBsb2djYXRNb25pdG9yID0gbmV3IFN1YlByb2Nlc3ModGhpcy5leGVjdXRhYmxlLnBhdGgsIGNtZCk7XG4gICAgY29uc3QgdGltZW91dEVycm9yTXNnID0gYFRoZSBHUFMgY2FjaGUgaGFzIG5vdCBiZWVuIHJlZnJlc2hlZCB3aXRoaW4gJHt0aW1lb3V0TXN9bXMgdGltZW91dC4gYCArXG4gICAgICBgUGxlYXNlIG1ha2Ugc3VyZSB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgaGFzIEFwcGl1bSBTZXR0aW5ncyBhcHAgaW5zdGFsbGVkIGFuZCBydW5uaW5nLiBgICtcbiAgICAgIGBBbHNvLCBpdCBpcyByZXF1aXJlZCB0aGF0IHRoZSBkZXZpY2UgaGFzIEdvb2dsZSBQbGF5IFNlcnZpY2VzIGluc3RhbGxlZCBvciBpcyBydW5uaW5nIGAgK1xuICAgICAgYEFuZHJvaWQgMTArIG90aGVyd2lzZS5gO1xuICAgIG1vbml0b3JpbmdQcm9taXNlID0gbmV3IEIoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKHRpbWVvdXRFcnJvck1zZykpLCB0aW1lb3V0TXMpO1xuXG4gICAgICBsb2djYXRNb25pdG9yLm9uKCdleGl0JywgKCkgPT4gcmVqZWN0KG5ldyBFcnJvcih0aW1lb3V0RXJyb3JNc2cpKSk7XG4gICAgICBbJ2xpbmVzLXN0ZGVycicsICdsaW5lcy1zdGRvdXQnXS5tYXAoKGV2dCkgPT4gbG9nY2F0TW9uaXRvci5vbihldnQsIChsaW5lcykgPT4ge1xuICAgICAgICBpZiAobGluZXMuc29tZSgobGluZSkgPT4gR1BTX0NBQ0hFX1JFRlJFU0hFRF9MT0dTLnNvbWUoKHgpID0+IGxpbmUuaW5jbHVkZXMoeCkpKSkge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0pO1xuICAgIGF3YWl0IGxvZ2NhdE1vbml0b3Iuc3RhcnQoMCk7XG4gIH1cblxuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgICAnLW4nLCBMT0NBVElPTl9SRUNFSVZFUixcbiAgICAgICctYScsIExPQ0FUSU9OX1JFVFJJRVZBTF9BQ1RJT04sXG4gICAgICAnLS1leicsICdmb3JjZVVwZGF0ZScsICd0cnVlJyxcbiAgICBdKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVmcmVzaCB0aGUgR1BTIGNhY2hlIG9uIHRoZSBkZXZpY2UuIGAgK1xuICAgICAgYE1ha2Ugc3VyZSB0aGUgQXBwaXVtIFNldHRpbmdzIGFwcGxpY2F0aW9uIGlzIHVwIHRvIGRhdGUgYW5kIGhhcyBsb2NhdGlvbiBwZXJtaXNzaW9ucy4gQWxzbyB0aGUgbG9jYXRpb24gYCArXG4gICAgICBgc2VydmljZXMgbXVzdCBiZSBlbmFibGVkIG9uIHRoZSBkZXZpY2UuIE9yaWdpbmFsIGVycm9yOiAke2Vyci5zdGRlcnIgfHwgZXJyLnN0ZG91dCB8fCBlcnIubWVzc2FnZX1gKTtcbiAgfVxuXG4gIGlmIChsb2djYXRNb25pdG9yICYmIG1vbml0b3JpbmdQcm9taXNlKSB7XG4gICAgY29uc3QgdGltZXIgPSBuZXcgdGltaW5nLlRpbWVyKCkuc3RhcnQoKTtcbiAgICBsb2cuZGVidWcoYFdhaXRpbmcgdXAgdG8gJHt0aW1lb3V0TXN9bXMgZm9yIHRoZSBHUFMgY2FjaGUgdG8gYmUgcmVmcmVzaGVkYCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG1vbml0b3JpbmdQcm9taXNlO1xuICAgICAgbG9nLmluZm8oYFRoZSBHUFMgY2FjaGUgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHJlZnJlc2hlZCBhZnRlciBgICtcbiAgICAgICAgYCR7dGltZXIuZ2V0RHVyYXRpb24oKS5hc01pbGxpU2Vjb25kcy50b0ZpeGVkKDApfW1zYCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChsb2djYXRNb25pdG9yLmlzUnVubmluZykge1xuICAgICAgICBhd2FpdCBsb2djYXRNb25pdG9yLnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbG9nLmluZm8oJ1RoZSByZXF1ZXN0IHRvIHJlZnJlc2ggdGhlIEdQUyBjYWNoZSBoYXMgYmVlbiBzZW50LiBTa2lwcGluZyB3YWl0aW5nIGZvciBpdHMgcmVzdWx0LicpO1xuICB9XG59O1xuXG4vKipcbiAqIFBlcmZvcm1zIHRoZSBnaXZlbiBlZGl0b3IgYWN0aW9uIG9uIHRoZSBmb2N1c2VkIGlucHV0IGZpZWxkLlxuICogVGhpcyBtZXRob2QgcmVxdWlyZXMgQXBwaXVtIFNldHRpbmdzIGhlbHBlciB0byBiZSBpbnN0YWxsZWQgb24gdGhlIGRldmljZS5cbiAqIE5vIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlcmUgd2FzIGEgZmFpbHVyZSB3aGlsZSBwZXJmb3JtaW5nIHRoZSBhY3Rpb24uXG4gKiBZb3UgbXVzdCBpbnZlc3RpZ2F0ZSB0aGUgbG9nY2F0IG91dHB1dCBpZiBzb21ldGhpbmcgZGlkIG5vdCB3b3JrIGFzIGV4cGVjdGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gYWN0aW9uIC0gRWl0aGVyIGFjdGlvbiBjb2RlIG9yIG5hbWUuIFRoZSBmb2xsb3dpbmcgYWN0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzIGFyZSBzdXBwb3J0ZWQ6IGBub3JtYWwsIHVuc3BlY2lmaWVkLCBub25lLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbywgc2VhcmNoLCBzZW5kLCBuZXh0LCBkb25lLCBwcmV2aW91c2BcbiAqL1xuY29tbWFuZHMucGVyZm9ybUVkaXRvckFjdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1FZGl0b3JBY3Rpb24gKGFjdGlvbikge1xuICBsb2cuZGVidWcoYFBlcmZvcm1pbmcgZWRpdG9yIGFjdGlvbjogJHthY3Rpb259YCk7XG4gIGF3YWl0IHRoaXMucnVuSW5JbWVDb250ZXh0KEFQUElVTV9JTUUsXG4gICAgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5zaGVsbChbJ2lucHV0JywgJ3RleHQnLCBgLyR7YWN0aW9ufS9gXSkpO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIHRleHQgY29udGVudCBvZiB0aGUgZGV2aWNlJ3MgY2xpcGJvYXJkLlxuICogVGhlIG1ldGhvZCB3b3JrcyBmb3IgQW5kcm9pZCBiZWxvdyBhbmQgYWJvdmUgMjkuXG4gKiBJdCB0ZW1vcmFyaWx5IGVuZm9yY2VzIHRoZSBJTUUgc2V0dGluZyBpbiBvcmRlciB0byB3b3JrYXJvdW5kXG4gKiBzZWN1cml0eSBsaW1pdGF0aW9ucyBpZiBuZWVkZWQuXG4gKiBUaGlzIG1ldGhvZCBvbmx5IHdvcmtzIGlmIEFwcGl1bSBTZXR0aW5ncyB2LiAyLjE1KyBpcyBpbnN0YWxsZWRcbiAqIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdFxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBhY3R1YWwgY29udGVudCBvZiB0aGUgbWFpbiBjbGlwYm9hcmQgYXNcbiAqIGJhc2U2NC1lbmNvZGVkIHN0cmluZyBvciBhbiBlbXB0eSBzdHJpbmcgaWYgdGhlIGNsaXBib2FyZCBpcyBlbXB0eVxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhIHByb2JsZW0gd2hpbGUgZ2V0dGluZyB0aGVcbiAqIGNsaXBib2FyZCBjb250YW50XG4gKi9cbmNvbW1hbmRzLmdldENsaXBib2FyZCA9IGFzeW5jIGZ1bmN0aW9uIGdldENsaXBib2FyZCAoKSB7XG4gIGxvZy5kZWJ1ZygnR2V0dGluZyB0aGUgY2xpcGJvYXJkIGNvbnRlbnQnKTtcbiAgYXdhaXQgdGhpcy5yZXF1aXJlUnVubmluZ1NldHRpbmdzQXBwKHtzaG91bGRSZXN0b3JlQ3VycmVudEFwcDogdHJ1ZX0pO1xuICBjb25zdCByZXRyaWV2ZUNsaXBib2FyZCA9IGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICdhbScsICdicm9hZGNhc3QnLFxuICAgICctbicsIENMSVBCT0FSRF9SRUNFSVZFUixcbiAgICAnLWEnLCBDTElQQk9BUkRfUkVUUklFVkFMX0FDVElPTixcbiAgXSk7XG4gIGxldCBvdXRwdXQ7XG4gIHRyeSB7XG4gICAgb3V0cHV0ID0gKGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA+PSAyOSlcbiAgICAgID8gKGF3YWl0IHRoaXMucnVuSW5JbWVDb250ZXh0KEFQUElVTV9JTUUsIHJldHJpZXZlQ2xpcGJvYXJkKSlcbiAgICAgIDogKGF3YWl0IHJldHJpZXZlQ2xpcGJvYXJkKCkpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZXRyaWV2ZSB0aGUgY3VycmVudCBjbGlwYm9hcmQgY29udGVudCBmcm9tIHRoZSBkZXZpY2UuIGAgK1xuICAgICAgYE1ha2Ugc3VyZSB0aGUgQXBwaXVtIFNldHRpbmdzIGFwcGxpY2F0aW9uIGlzIHVwIHRvIGRhdGUuIGAgK1xuICAgICAgYE9yaWdpbmFsIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG5cbiAgY29uc3QgbWF0Y2ggPSAvZGF0YT1cIihbXlwiXSopXCIvLmV4ZWMob3V0cHV0KTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHBhcnNlIHRoZSBhY3R1YWwgY2xpYm9hcmQgY29udGVudCBmcm9tIHRoZSBjb21tYW5kIG91dHB1dDogJHtvdXRwdXR9YCk7XG4gIH1cbiAgcmV0dXJuIF8udHJpbShtYXRjaFsxXSk7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlcyBBbmRyb2lkIG5vdGlmaWNhdGlvbnMgdmlhIEFwcGl1bSBTZXR0aW5ncyBoZWxwZXIuXG4gKiBBcHBpdW0gU2V0dGluZ3MgYXBwIGl0c2VsZiBtdXN0IGJlICptYW51YWxseSogZ3JhbnRlZCB0byBhY2Nlc3Mgbm90aWZpY2F0aW9uc1xuICogdW5kZXIgZGV2aWNlIFNldHRpbmdzIGluIG9yZGVyIHRvIG1ha2UgdGhpcyBmZWF0dXJlIHdvcmtpbmcuXG4gKiBBcHBpdW0gU2V0dGluZ3MgaGVscGVyIGtlZXBzIGFsbCB0aGUgYWN0aXZlIG5vdGlmaWNhdGlvbnMgcGx1c1xuICogbm90aWZpY2F0aW9ucyB0aGF0IGFwcGVhcmVkIHdoaWxlIGl0IHdhcyBydW5uaW5nIGluIHRoZSBpbnRlcm5hbCBidWZmZXIsXG4gKiBidXQgbm8gbW9yZSB0aGFuIDEwMCBpdGVtcyBhbHRvZ2V0aGVyLiBOZXdseSBhcHBlYXJlZCBub3RpZmljYXRpb25zXG4gKiBhcmUgYWx3YXlzIGFkZGVkIHRvIHRoZSBoZWFkIG9mIHRoZSBub3RpZmljYXRpb25zIGFycmF5LlxuICogVGhlIGBpc1JlbW92ZWRgIGZsYWcgaXMgc2V0IHRvIGB0cnVlYCBmb3Igbm90aWZpY2F0aW9ucyB0aGF0IGhhdmUgYmVlbiByZW1vdmVkLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC9zZXJ2aWNlL25vdGlmaWNhdGlvbi9TdGF0dXNCYXJOb3RpZmljYXRpb25cbiAqIGFuZCBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC9hcHAvTm90aWZpY2F0aW9uLmh0bWxcbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGF2YWlsYWJsZSBub3RpZmljYXRpb24gcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBleGFtcGxlIG91dHB1dCBpczpcbiAqIGBgYGpzb25cbiAqIHtcbiAqICAgXCJzdGF0dXNCYXJOb3RpZmljYXRpb25zXCI6W1xuICogICAgIHtcbiAqICAgICAgIFwiaXNHcm91cFwiOmZhbHNlLFxuICogICAgICAgXCJwYWNrYWdlTmFtZVwiOlwiaW8uYXBwaXVtLnNldHRpbmdzXCIsXG4gKiAgICAgICBcImlzQ2xlYXJhYmxlXCI6ZmFsc2UsXG4gKiAgICAgICBcImlzT25nb2luZ1wiOnRydWUsXG4gKiAgICAgICBcImlkXCI6MSxcbiAqICAgICAgIFwidGFnXCI6bnVsbCxcbiAqICAgICAgIFwibm90aWZpY2F0aW9uXCI6e1xuICogICAgICAgICBcInRpdGxlXCI6bnVsbCxcbiAqICAgICAgICAgXCJiaWdUaXRsZVwiOlwiQXBwaXVtIFNldHRpbmdzXCIsXG4gKiAgICAgICAgIFwidGV4dFwiOm51bGwsXG4gKiAgICAgICAgIFwiYmlnVGV4dFwiOlwiS2VlcCB0aGlzIHNlcnZpY2UgcnVubmluZywgc28gQXBwaXVtIGZvciBBbmRyb2lkIGNhbiBwcm9wZXJseSBpbnRlcmFjdCB3aXRoIHNldmVyYWwgc3lzdGVtIEFQSXNcIixcbiAqICAgICAgICAgXCJ0aWNrZXJUZXh0XCI6bnVsbCxcbiAqICAgICAgICAgXCJzdWJUZXh0XCI6bnVsbCxcbiAqICAgICAgICAgXCJpbmZvVGV4dFwiOm51bGwsXG4gKiAgICAgICAgIFwidGVtcGxhdGVcIjpcImFuZHJvaWQuYXBwLk5vdGlmaWNhdGlvbiRCaWdUZXh0U3R5bGVcIlxuICogICAgICAgfSxcbiAqICAgICAgIFwidXNlckhhbmRsZVwiOjAsXG4gKiAgICAgICBcImdyb3VwS2V5XCI6XCIwfGlvLmFwcGl1bS5zZXR0aW5nc3wxfG51bGx8MTAxMzNcIixcbiAqICAgICAgIFwib3ZlcnJpZGVHcm91cEtleVwiOm51bGwsXG4gKiAgICAgICBcInBvc3RUaW1lXCI6MTU3Njg1MzUxODg1MCxcbiAqICAgICAgIFwia2V5XCI6XCIwfGlvLmFwcGl1bS5zZXR0aW5nc3wxfG51bGx8MTAxMzNcIixcbiAqICAgICAgIFwiaXNSZW1vdmVkXCI6ZmFsc2VcbiAqICAgICB9XG4gKiAgIF1cbiAqIH1cbiAqIGBgYFxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBnZXR0aW5nIHRoZSBub3RpZmljYXRpb25zIGxpc3RcbiAqL1xuY29tbWFuZHMuZ2V0Tm90aWZpY2F0aW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbnMgKCkge1xuICBsb2cuZGVidWcoJ1JldHJpZXZpbmcgbm90aWZpY2F0aW9ucycpO1xuICAvLyBTb21laG93IHByb3ZpZGluZyB0aGUgYC1uYCBhcmcgdG8gdGhlIGBhbWAgdW5kZXJuZWF0aFxuICAvLyByZW5kZXJzIHRoZSBicm9hZGNhc3QgdG8gZmFpbCBpbnN0ZWFkIG9mIHN0YXJ0aW5nIHRoZVxuICAvLyBBcHBpdW0gU2V0dGluZ3MgYXBwLiBUaGlzIG9ubHkgaGFwcGVucyB0byB0aGUgbm90aWZpY2F0aW9uc1xuICAvLyByZWNlaXZlclxuICBhd2FpdCB0aGlzLnJlcXVpcmVSdW5uaW5nU2V0dGluZ3NBcHAoe3Nob3VsZFJlc3RvcmVDdXJyZW50QXBwOiB0cnVlfSk7XG4gIGxldCBvdXRwdXQ7XG4gIHRyeSB7XG4gICAgb3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAgICctYScsIE5PVElGSUNBVElPTlNfUkVUUklFVkFMX0FDVElPTixcbiAgICBdKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmV0cmlldmUgbm90aWZpY2F0aW9ucyBmcm9tIHRoZSBkZXZpY2UuIGAgK1xuICAgICAgYE1ha2Ugc3VyZSB0aGUgQXBwaXVtIFNldHRpbmdzIGFwcGxpY2F0aW9uIGlzIGluc3RhbGxlZCBhbmQgaXMgdXAgdG8gZGF0ZS4gYCArXG4gICAgICBgT3JpZ2luYWwgZXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cbiAgcmV0dXJuIHBhcnNlSnNvbkRhdGEob3V0cHV0LCAnbm90aWZpY2F0aW9ucycpO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTbXNMaXN0T3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heCBbMTAwXSAtIFRoZSBtYXhpbXVtIGNvdW50IG9mIHJlY2VudCBtZXNzYWdlc1xuICogdG8gcmV0cmlldmVcbiAqL1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgbGlzdCBvZiB0aGUgbW9zdCByZWNlbnQgU01TXG4gKiBwcm9wZXJ0aWVzIGxpc3QgdmlhIEFwcGl1bSBTZXR0aW5ncyBoZWxwZXIuXG4gKiBNZXNzYWdlcyBhcmUgc29ydGVkIGJ5IGRhdGUgaW4gZGVzY2VuZGluZyBvcmRlci5cbiAqXG4gKiBAcGFyYW0ge1Ntc0xpc3RPcHRpb25zfSBvcHRzXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgZXhhbXBsZSBvdXRwdXQgaXM6XG4gKiBgYGBqc29uXG4gKiB7XG4gKiAgIFwiaXRlbXNcIjpbXG4gKiAgICAge1xuICogICAgICAgXCJpZFwiOlwiMlwiLFxuICogICAgICAgXCJhZGRyZXNzXCI6XCIrMTIzNDU2Nzg5XCIsXG4gKiAgICAgICBcInBlcnNvblwiOm51bGwsXG4gKiAgICAgICBcImRhdGVcIjpcIjE1ODE5MzY0MjIyMDNcIixcbiAqICAgICAgIFwicmVhZFwiOlwiMFwiLFxuICogICAgICAgXCJzdGF0dXNcIjpcIi0xXCIsXG4gKiAgICAgICBcInR5cGVcIjpcIjFcIixcbiAqICAgICAgIFwic3ViamVjdFwiOm51bGwsXG4gKiAgICAgICBcImJvZHlcIjpcIlxcXCJ0ZXh0IG1lc3NhZ2UyXFxcIlwiLFxuICogICAgICAgXCJzZXJ2aWNlQ2VudGVyXCI6bnVsbFxuICogICAgIH0sXG4gKiAgICAge1xuICogICAgICAgXCJpZFwiOlwiMVwiLFxuICogICAgICAgXCJhZGRyZXNzXCI6XCIrMTIzNDU2Nzg5XCIsXG4gKiAgICAgICBcInBlcnNvblwiOm51bGwsXG4gKiAgICAgICBcImRhdGVcIjpcIjE1ODE5MzYzODI3NDBcIixcbiAqICAgICAgIFwicmVhZFwiOlwiMFwiLFxuICogICAgICAgXCJzdGF0dXNcIjpcIi0xXCIsXG4gKiAgICAgICBcInR5cGVcIjpcIjFcIixcbiAqICAgICAgIFwic3ViamVjdFwiOm51bGwsXG4gKiAgICAgICBcImJvZHlcIjpcIlxcXCJ0ZXh0IG1lc3NhZ2VcXFwiXCIsXG4gKiAgICAgICBcInNlcnZpY2VDZW50ZXJcIjpudWxsXG4gKiAgICAgfVxuICogICBdLFxuICogICBcInRvdGFsXCI6MlxuICogfVxuICogYGBgXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGdldHRpbmcgdGhlIFNNUyBsaXN0XG4gKi9cbmNvbW1hbmRzLmdldFNtc0xpc3QgPSBhc3luYyBmdW5jdGlvbiBnZXRTbXNMaXN0IChvcHRzID0ge30pIHtcbiAgbG9nLmRlYnVnKCdSZXRyaWV2aW5nIHRoZSByZWNlbnQgU01TIG1lc3NhZ2VzJyk7XG4gIGF3YWl0IHRoaXMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCh7c2hvdWxkUmVzdG9yZUN1cnJlbnRBcHA6IHRydWV9KTtcbiAgY29uc3QgYXJncyA9IFtcbiAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAnLW4nLCBTTVNfTElTVF9SRUNFSVZFUixcbiAgICAnLWEnLCBTTVNfTElTVF9SRVRSSUVWQUxfQUNUSU9OLFxuICBdO1xuICBpZiAob3B0cy5tYXgpIHtcbiAgICBhcmdzLnB1c2goJy0tZXMnLCAnbWF4Jywgb3B0cy5tYXgpO1xuICB9XG4gIGxldCBvdXRwdXQ7XG4gIHRyeSB7XG4gICAgb3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChhcmdzKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmV0cmlldmUgU01TIGxpc3QgZnJvbSB0aGUgZGV2aWNlLiBgICtcbiAgICAgIGBNYWtlIHN1cmUgdGhlIEFwcGl1bSBTZXR0aW5ncyBhcHBsaWNhdGlvbiBpcyBpbnN0YWxsZWQgYW5kIGlzIHVwIHRvIGRhdGUuIGAgK1xuICAgICAgYE9yaWdpbmFsIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG4gIHJldHVybiBwYXJzZUpzb25EYXRhKG91dHB1dCwgJ1NNUyBsaXN0Jyk7XG59O1xuXG4vKipcbiAqIFR5cGVzIHRoZSBnaXZlbiBVbmljb2RlIHN0cmluZy5cbiAqIEl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIGZvY3VzIGlzIGFscmVhZHkgcHV0XG4gKiB0byB0aGUgZGVzdGluYXRpb24gaW5wdXQgZmllbGQgYmVmb3JlIHRoaXMgbWV0aG9kIGlzIGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgc3RyaW5nIHRvIHR5cGVcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGlucHV0IHRleHQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHNlbnQgdG8gYWRiXG4gKi9cbmNvbW1hbmRzLnR5cGVVbmljb2RlID0gYXN5bmMgZnVuY3Rpb24gdHlwZVVuaWNvZGUgKHRleHQpIHtcbiAgaWYgKF8uaXNOaWwodGV4dCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB0ZXh0ID0gYCR7dGV4dH1gO1xuICBsb2cuZGVidWcoYFR5cGluZyAke3V0aWwucGx1cmFsaXplKCdjaGFyYWN0ZXInLCB0ZXh0Lmxlbmd0aCwgdHJ1ZSl9YCk7XG4gIGlmICghdGV4dCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBhd2FpdCB0aGlzLnJ1bkluSW1lQ29udGV4dChcbiAgICBVTklDT0RFX0lNRSwgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5pbnB1dFRleHQoaW1hcC5lbmNvZGUodGV4dCkpXG4gICk7XG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBQZXJmb3JtcyByZWN1cnNpdmUgbWVkaWEgc2NhbiBhdCB0aGUgZ2l2ZW4gZGVzdGluYXRpb24uXG4gKiBBbGwgc3VjY2Vzc2Z1bGx5IHNjYW5uZWQgaXRlbXMgYXJlIGJlaW5nIGFkZGVkIHRvIHRoZSBkZXZpY2Unc1xuICogbWVkaWEgbGlicmFyeS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb24gRmlsZS9mb2xkZXIgcGF0aCBvbiB0aGUgcmVtb3RlIGRldmljZS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gdW5leHBlY3RlZCBlcnJvciBieSBzY2FubmluZy5cbiAqL1xuY29tbWFuZHMuc2Nhbk1lZGlhID0gYXN5bmMgZnVuY3Rpb24gc2Nhbk1lZGlhIChkZXN0aW5hdGlvbikge1xuICBsb2cuZGVidWcoYFNjYW5uaW5nICcke2Rlc3RpbmF0aW9ufScgZm9yIG1lZGlhIGZpbGVzYCk7XG4gIGF3YWl0IHRoaXMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCh7c2hvdWxkUmVzdG9yZUN1cnJlbnRBcHA6IHRydWV9KTtcbiAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgJy1uJywgTUVESUFfU0NBTl9SRUNFSVZFUixcbiAgICAnLWEnLCBNRURJQV9TQ0FOX0FDVElPTixcbiAgICAnLS1lcycsICdwYXRoJywgZGVzdGluYXRpb25cbiAgXSk7XG4gIGlmICghXy5pbmNsdWRlcyhvdXRwdXQsICdyZXN1bHQ9LTEnKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTm8gbWVkaWEgY291bGQgYmUgc2Nhbm5lZCBhdCAnJHtkZXN0aW5hdGlvbn0nLiBgICtcbiAgICAgIGBDaGVjayB0aGUgZGV2aWNlIGxvZ2NhdCBvdXRwdXQgZm9yIG1vcmUgZGV0YWlscy5gKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFuZHM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksU0FBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssSUFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sYUFBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sU0FBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTVEsa0JBQWtCLEdBQUcsb0JBQW9CO0FBQy9DLE1BQU1DLDZCQUE2QixHQUFHLFdBQVc7QUFDakQsTUFBTUMsZ0NBQWdDLEdBQUksR0FBRUYsa0JBQW1CLDJDQUEwQztBQUN6RyxNQUFNRyw4QkFBOEIsR0FBSSxHQUFFSCxrQkFBbUIsT0FB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