{"version":3,"file":"ime.js","names":["_driver","require","commands","helpers","extensions","exports","isIMEActivated","availableIMEEngines","log","debug","engines","adb","availableIMEs","JSON","stringify","getActiveIMEEngine","defaultIME","activateIMEEngine","imeId","availableEngines","indexOf","errors","IMENotAvailableError","enableIME","setIME","deactivateIMEEngine","currentEngine","disableIME","Object","assign","_default","default"],"sources":["../../../lib/commands/ime.js"],"sourcesContent":["import { errors } from 'appium/driver';\n\nlet commands = {}, helpers = {}, extensions = {};\n\ncommands.isIMEActivated = async function isIMEActivated () { // eslint-disable-line require-await\n  // IME is always activated on Android devices\n  return true;\n};\n\ncommands.availableIMEEngines = async function availableIMEEngines () {\n  this.log.debug('Retrieving available IMEs');\n  let engines = await this.adb.availableIMEs();\n  this.log.debug(`Engines: ${JSON.stringify(engines)}`);\n  return engines;\n};\n\ncommands.getActiveIMEEngine = async function getActiveIMEEngine () {\n  this.log.debug('Retrieving current default IME');\n  return await this.adb.defaultIME();\n};\n\ncommands.activateIMEEngine = async function activateIMEEngine (imeId) {\n  this.log.debug(`Attempting to activate IME ${imeId}`);\n  let availableEngines = await this.adb.availableIMEs();\n  if (availableEngines.indexOf(imeId) === -1) {\n    this.log.debug('IME not found, failing');\n    throw new errors.IMENotAvailableError();\n  }\n  this.log.debug('Found installed IME, attempting to activate');\n  await this.adb.enableIME(imeId);\n  await this.adb.setIME(imeId);\n};\n\ncommands.deactivateIMEEngine = async function deactivateIMEEngine () {\n  let currentEngine = await this.getActiveIMEEngine();\n  this.log.debug(`Attempting to deactivate ${currentEngine}`);\n  await this.adb.disableIME(currentEngine);\n};\n\nObject.assign(extensions, commands, helpers);\nexport { commands, helpers };\nexport default extensions;\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEA,IAAIC,QAAQ,GAAG,CAAC,CAAC;EAAEC,OAAO,GAAG,CAAC,CAAC;EAAEC,UAAU,GAAG,CAAC,CAAC;AAACC,OAAA,CAAAF,OAAA,GAAAA,OAAA;AAAAE,OAAA,CAAAH,QAAA,GAAAA,QAAA;AAEjDA,QAAQ,CAACI,cAAc,GAAG,eAAeA,cAAcA,CAAA,EAAI;EAEzD,OAAO,IAAI;AACb,CAAC;AAEDJ,QAAQ,CAACK,mBAAmB,GAAG,eAAeA,mBAAmBA,CAAA,EAAI;EACnE,IAAI,CAACC,GAAG,CAACC,KAAK,CAAC,2BAA2B,CAAC;EAC3C,IAAIC,OAAO,GAAG,MAAM,IAAI,CAACC,GAAG,CAACC,aAAa,CAAC,CAAC;EAC5C,IAAI,CAACJ,GAAG,CAACC,KAAK,CAAE,YAAWI,IAAI,CAACC,SAAS,CAACJ,OAAO,CAAE,EAAC,CAAC;EACrD,OAAOA,OAAO;AAChB,CAAC;AAEDR,QAAQ,CAACa,kBAAkB,GAAG,eAAeA,kBAAkBA,CAAA,EAAI;EACjE,IAAI,CAACP,GAAG,CAACC,KAAK,CAAC,gCAAgC,CAAC;EAChD,OAAO,MAAM,IAAI,CAACE,GAAG,CAACK,UAAU,CAAC,CAAC;AACpC,CAAC;AAEDd,QAAQ,CAACe,iBAAiB,GAAG,eAAeA,iBAAiBA,CAAEC,KAAK,EAAE;EACpE,IAAI,CAACV,GAAG,CAACC,KAAK,CAAE,8BAA6BS,KAAM,EAAC,CAAC;EACrD,IAAIC,gBAAgB,GAAG,MAAM,IAAI,CAACR,GAAG,CAACC,aAAa,CAAC,CAAC;EACrD,IAAIO,gBAAgB,CAACC,OAAO,CAACF,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;IAC1C,IAAI,CAACV,GAAG,CAACC,KAAK,CAAC,wBAAwB,CAAC;IACxC,MAAM,IAAIY,cAAM,CAACC,oBAAoB,CAAC,CAAC;EACzC;EACA,IAAI,CAACd,GAAG,CAACC,KAAK,CAAC,6CAA6C,CAAC;EAC7D,MAAM,IAAI,CAACE,GAAG,CAACY,SAAS,CAACL,KAAK,CAAC;EAC/B,MAAM,IAAI,CAACP,GAAG,CAACa,MAAM,CAACN,KAAK,CAAC;AAC9B,CAAC;AAEDhB,QAAQ,CAACuB,mBAAmB,GAAG,eAAeA,mBAAmBA,CAAA,EAAI;EACnE,IAAIC,aAAa,GAAG,MAAM,IAAI,CAACX,kBAAkB,CAAC,CAAC;EACnD,IAAI,CAACP,GAAG,CAACC,KAAK,CAAE,4BAA2BiB,aAAc,EAAC,CAAC;EAC3D,MAAM,IAAI,CAACf,GAAG,CAACgB,UAAU,CAACD,aAAa,CAAC;AAC1C,CAAC;AAEDE,MAAM,CAACC,MAAM,CAACzB,UAAU,EAAEF,QAAQ,EAAEC,OAAO,CAAC;AAAC,IAAA2B,QAAA,GAE9B1B,UAAU;AAAAC,OAAA,CAAA0B,OAAA,GAAAD,QAAA"}