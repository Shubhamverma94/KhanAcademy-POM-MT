{"version":3,"file":"emu-console.js","names":["_driver","require","EMU_CONSOLE_FEATURE","commands","exports","mobileExecEmuConsoleCommand","opts","ensureFeatureEnabled","command","execTimeout","connTimeout","initTimeout","errors","InvalidArgumentError","adb","execEmuConsoleCommand","_default","default"],"sources":["../../../lib/commands/emu-console.js"],"sourcesContent":["import { errors } from 'appium/driver';\n\nconst EMU_CONSOLE_FEATURE = 'emulator_console';\n\nconst commands = {};\n\n/**\n * @typedef {Object} ExecOptions\n * @property {!Array<string>|string} command - The actual command to execute. See\n * https://developer.android.com/studio/run/emulator-console for more details\n * on available commands\n * @property {number} execTimeout [60000] A timeout used to wait for a server\n * reply to the given command in milliseconds\n * @property {number} connTimeout [5000] Console connection timeout in milliseconds\n * @property {number} initTimeout [5000] Telnet console initialization timeout\n * in milliseconds (the time between the connection happens and the command prompt\n * is available)\n */\n\n/**\n * Executes a command through emulator telnet console interface and returns its output.\n * The `emulator_console` server feature must be enabled in order to use this method.\n *\n * @param {ExecOptions} opts\n * @returns {string} The command output\n * @throws {Error} If there was an error while connecting to the Telnet console\n * or if the given command returned non-OK response\n */\ncommands.mobileExecEmuConsoleCommand = async function mobileExecEmuConsoleCommand (opts = {}) {\n  this.ensureFeatureEnabled(EMU_CONSOLE_FEATURE);\n\n  const {\n    command,\n    execTimeout,\n    connTimeout,\n    initTimeout,\n  } = opts;\n\n  if (!command) {\n    throw new errors.InvalidArgumentError(`The 'command' argument is mandatory`);\n  }\n\n  return await this.adb.execEmuConsoleCommand(command, {\n    execTimeout,\n    connTimeout,\n    initTimeout,\n  });\n};\n\nexport { commands };\nexport default commands;\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEA,MAAMC,mBAAmB,GAAG,kBAAkB;AAE9C,MAAMC,QAAQ,GAAG,CAAC,CAAC;AAACC,OAAA,CAAAD,QAAA,GAAAA,QAAA;AAwBpBA,QAAQ,CAACE,2BAA2B,GAAG,eAAeA,2BAA2BA,CAAEC,IAAI,GAAG,CAAC,CAAC,EAAE;EAC5F,IAAI,CAACC,oBAAoB,CAACL,mBAAmB,CAAC;EAE9C,MAAM;IACJM,OAAO;IACPC,WAAW;IACXC,WAAW;IACXC;EACF,CAAC,GAAGL,IAAI;EAER,IAAI,CAACE,OAAO,EAAE;IACZ,MAAM,IAAII,cAAM,CAACC,oBAAoB,CAAE,qCAAoC,CAAC;EAC9E;EAEA,OAAO,MAAM,IAAI,CAACC,GAAG,CAACC,qBAAqB,CAACP,OAAO,EAAE;IACnDC,WAAW;IACXC,WAAW;IACXC;EACF,CAAC,CAAC;AACJ,CAAC;AAAC,IAAAK,QAAA,GAGab,QAAQ;AAAAC,OAAA,CAAAa,OAAA,GAAAD,QAAA"}