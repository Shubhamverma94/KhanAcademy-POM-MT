"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.helpers = exports.default = exports.commands = void 0;
require("source-map-support/register");
var _lodash = _interopRequireDefault(require("lodash"));
var _driver = require("appium/driver");
var _support = require("appium/support");
var _bluebird = _interopRequireDefault(require("bluebird"));
let commands = {},
  helpers = {},
  extensions = {};
exports.helpers = helpers;
exports.commands = commands;
const AIRPLANE_MODE_MASK = 0b001;
const WIFI_MASK = 0b010;
const DATA_MASK = 0b100;
const GEO_EPSILON = Number.MIN_VALUE;
const WIFI_KEY_NAME = 'wifi';
const DATA_KEY_NAME = 'data';
const AIRPLANE_MODE_KEY_NAME = 'airplaneMode';
const SUPPORTED_SERVICE_NAMES = [WIFI_KEY_NAME, DATA_KEY_NAME, AIRPLANE_MODE_KEY_NAME];
commands.getNetworkConnection = async function getNetworkConnection() {
  this.log.info('Getting network connection');
  let airplaneModeOn = await this.adb.isAirplaneModeOn();
  let connection = airplaneModeOn ? AIRPLANE_MODE_MASK : 0;
  if (!airplaneModeOn) {
    let wifiOn = await this.isWifiOn();
    connection |= wifiOn ? WIFI_MASK : 0;
    let dataOn = await this.adb.isDataOn();
    connection |= dataOn ? DATA_MASK : 0;
  }
  return connection;
};
commands.isWifiOn = async function isWifiOn() {
  return await this.adb.isWifiOn();
};
commands.mobileSetConnectivity = async function mobileSetConnectivity(opts = {}) {
  const {
    wifi,
    data,
    airplaneMode
  } = opts;
  if (_lodash.default.every([wifi, data, airplaneMode], _lodash.default.isUndefined)) {
    throw new _driver.errors.InvalidArgumentError(`Either one of ${JSON.stringify(SUPPORTED_SERVICE_NAMES)} options must be provided`);
  }
  const currentState = await this.mobileGetConnectivity({
    services: [...(_lodash.default.isUndefined(wifi) ? [] : [WIFI_KEY_NAME]), ...(_lodash.default.isUndefined(data) ? [] : [DATA_KEY_NAME]), ...(_lodash.default.isUndefined(airplaneMode) ? [] : [AIRPLANE_MODE_KEY_NAME])]
  });
  const setters = [];
  if (!_lodash.default.isUndefined(wifi) && currentState.wifi !== Boolean(wifi)) {
    setters.push(this.adb.setWifiState(wifi, this.isEmulator()));
  }
  if (!_lodash.default.isUndefined(data) && currentState.data !== Boolean(data)) {
    setters.push(this.adb.setDataState(data, this.isEmulator()));
  }
  if (!_lodash.default.isUndefined(airplaneMode) && currentState.airplaneMode !== Boolean(airplaneMode)) {
    setters.push(async () => {
      await this.adb.setAirplaneMode(airplaneMode);
      if (this.adb.getApiLevel() < 30) {
        await this.adb.broadcastAirplaneMode(airplaneMode);
      }
    });
  }
  if (!_lodash.default.isEmpty(setters)) {
    await _bluebird.default.all(setters);
  }
};
commands.mobileGetConnectivity = async function mobileGetConnectivity(opts = {}) {
  let {
    services = SUPPORTED_SERVICE_NAMES
  } = opts;
  if (!_lodash.default.isArray(services)) {
    services = [services];
  }
  const unsupportedServices = _lodash.default.difference(services, SUPPORTED_SERVICE_NAMES);
  if (!_lodash.default.isEmpty(unsupportedServices)) {
    throw new _driver.errors.InvalidArgumentError(`${_support.util.pluralize('Service name', unsupportedServices.length, false)} ${unsupportedServices} ` + `${unsupportedServices.length === 1 ? 'is' : 'are'} not known. Only the following services are ` + `suported: ${SUPPORTED_SERVICE_NAMES}`);
  }
  const statePromises = {
    wifi: _bluebird.default.resolve(services.includes(WIFI_KEY_NAME) ? this.adb.isWifiOn() : undefined),
    data: _bluebird.default.resolve(services.includes(DATA_KEY_NAME) ? this.adb.isDataOn() : undefined),
    airplaneMode: _bluebird.default.resolve(services.includes(AIRPLANE_MODE_KEY_NAME) ? this.adb.isAirplaneModeOn() : undefined)
  };
  await _bluebird.default.all(_lodash.default.values(statePromises));
  return _lodash.default.fromPairs(services.map(k => [k, statePromises[k].value()]));
};
commands.setNetworkConnection = async function setNetworkConnection(type) {
  this.log.info('Setting network connection');
  const shouldEnableAirplaneMode = (type & AIRPLANE_MODE_MASK) !== 0;
  const shouldEnableWifi = (type & WIFI_MASK) !== 0;
  const shouldEnableDataConnection = (type & DATA_MASK) !== 0;
  const currentState = await this.getNetworkConnection();
  const isAirplaneModeEnabled = (currentState & AIRPLANE_MODE_MASK) !== 0;
  const isWiFiEnabled = (currentState & WIFI_MASK) !== 0;
  const isDataEnabled = (currentState & DATA_MASK) !== 0;
  if (shouldEnableAirplaneMode !== isAirplaneModeEnabled) {
    await this.wrapBootstrapDisconnect(async () => {
      await this.adb.setAirplaneMode(shouldEnableAirplaneMode);
    });
    await this.wrapBootstrapDisconnect(async () => {
      if ((await this.adb.getApiLevel()) < 30) {
        await this.adb.broadcastAirplaneMode(shouldEnableAirplaneMode);
      }
    });
  } else {
    this.log.info(`Not changing airplane mode, since it is already ${shouldEnableAirplaneMode ? 'enabled' : 'disabled'}`);
  }
  if (shouldEnableWifi === isWiFiEnabled && shouldEnableDataConnection === isDataEnabled) {
    this.log.info('Not changing data connection/Wi-Fi states, since they are already set to expected values');
    if (await this.adb.isAirplaneModeOn()) {
      return AIRPLANE_MODE_MASK | currentState;
    }
    return ~AIRPLANE_MODE_MASK & currentState;
  }
  await this.wrapBootstrapDisconnect(async () => {
    if (shouldEnableWifi !== isWiFiEnabled) {
      await this.setWifiState(shouldEnableWifi);
    } else {
      this.log.info(`Not changing Wi-Fi state, since it is already ` + `${shouldEnableWifi ? 'enabled' : 'disabled'}`);
    }
    if (shouldEnableAirplaneMode) {
      this.log.info('Not changing data connection state, because airplane mode is enabled');
    } else if (shouldEnableDataConnection === isDataEnabled) {
      this.log.info(`Not changing data connection state, since it is already ` + `${shouldEnableDataConnection ? 'enabled' : 'disabled'}`);
    } else {
      await this.adb.setDataState(shouldEnableDataConnection, this.isEmulator());
    }
  });
  return await this.getNetworkConnection();
};
commands.setWifiState = async function setWifiState(wifi) {
  await this.adb.setWifiState(wifi, this.isEmulator());
};
commands.toggleData = async function toggleData() {
  let data = !(await this.adb.isDataOn());
  this.log.info(`Turning network data ${data ? 'on' : 'off'}`);
  await this.wrapBootstrapDisconnect(async () => {
    await this.adb.setWifiAndData({
      data
    }, this.isEmulator());
  });
};
commands.toggleWiFi = async function toggleWiFi() {
  let wifi = !(await this.adb.isWifiOn());
  this.log.info(`Turning WiFi ${wifi ? 'on' : 'off'}`);
  await this.wrapBootstrapDisconnect(async () => {
    await this.adb.setWifiAndData({
      wifi
    }, this.isEmulator());
  });
};
commands.toggleFlightMode = async function toggleFlightMode() {
  let flightMode = !(await this.adb.isAirplaneModeOn());
  this.log.info(`Turning flight mode ${flightMode ? 'on' : 'off'}`);
  await this.wrapBootstrapDisconnect(async () => {
    await this.adb.setAirplaneMode(flightMode);
  });
  await this.wrapBootstrapDisconnect(async () => {
    if ((await this.adb.getApiLevel()) < 30) {
      await this.adb.broadcastAirplaneMode(flightMode);
    }
  });
};
commands.setGeoLocation = async function setGeoLocation(location) {
  await this.adb.setGeoLocation(location, this.isEmulator());
  try {
    return await this.getGeoLocation();
  } catch (e) {
    this.log.warn(`Could not get the current geolocation info: ${e.message}`);
    this.log.warn(`Returning the default zero'ed values`);
    return {
      latitude: GEO_EPSILON,
      longitude: GEO_EPSILON,
      altitude: GEO_EPSILON
    };
  }
};
commands.mobileRefreshGpsCache = async function mobileRefreshGpsCache(opts = {}) {
  const {
    timeoutMs
  } = opts;
  await this.adb.refreshGeoLocationCache(timeoutMs);
};
commands.getGeoLocation = async function getGeoLocation() {
  const {
    latitude,
    longitude,
    altitude
  } = await this.adb.getGeoLocation();
  return {
    latitude: parseFloat(latitude) || GEO_EPSILON,
    longitude: parseFloat(longitude) || GEO_EPSILON,
    altitude: parseFloat(altitude) || GEO_EPSILON
  };
};
commands.isLocationServicesEnabled = async function iLocationServicesEnabled() {
  return (await this.adb.getLocationProviders()).includes('gps');
};
commands.toggleLocationServices = async function toggleLocationServices() {
  this.log.info('Toggling location services');
  const isGpsEnabled = await this.isLocationServicesEnabled();
  this.log.debug(`Current GPS state: ${isGpsEnabled}. ` + `The service is going to be ${isGpsEnabled ? 'disabled' : 'enabled'}`);
  await this.adb.toggleGPSLocationProvider(!isGpsEnabled);
};
helpers.wrapBootstrapDisconnect = async function wrapBootstrapDisconnect(wrapped) {
  if (!this.bootstrap) {
    return await wrapped();
  }
  this.bootstrap.ignoreUnexpectedShutdown = true;
  try {
    await wrapped();
    await this.adb.restart();
    await this.bootstrap.start(this.opts.appPackage, this.opts.disableAndroidWatchers, this.opts.acceptSslCerts);
  } finally {
    this.bootstrap.ignoreUnexpectedShutdown = false;
  }
};
Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZHJpdmVyIiwiX3N1cHBvcnQiLCJfYmx1ZWJpcmQiLCJjb21tYW5kcyIsImhlbHBlcnMiLCJleHRlbnNpb25zIiwiZXhwb3J0cyIsIkFJUlBMQU5FX01PREVfTUFTSyIsIldJRklfTUFTSyIsIkRBVEFfTUFTSyIsIkdFT19FUFNJTE9OIiwiTnVtYmVyIiwiTUlOX1ZBTFVFIiwiV0lGSV9LRVlfTkFNRSIsIkRBVEFfS0VZX05BTUUiLCJBSVJQTEFORV9NT0RFX0tFWV9OQU1FIiwiU1VQUE9SVEVEX1NFUlZJQ0VfTkFNRVMiLCJnZXROZXR3b3JrQ29ubmVjdGlvbiIsImxvZyIsImluZm8iLCJhaXJwbGFuZU1vZGVPbiIsImFkYiIsImlzQWlycGxhbmVNb2RlT24iLCJjb25uZWN0aW9uIiwid2lmaU9uIiwiaXNXaWZpT24iLCJkYXRhT24iLCJpc0RhdGFPbiIsIm1vYmlsZVNldENvbm5lY3Rpdml0eSIsIm9wdHMiLCJ3aWZpIiwiZGF0YSIsImFpcnBsYW5lTW9kZSIsIl8iLCJldmVyeSIsImlzVW5kZWZpbmVkIiwiZXJyb3JzIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiY3VycmVudFN0YXRlIiwibW9iaWxlR2V0Q29ubmVjdGl2aXR5Iiwic2VydmljZXMiLCJzZXR0ZXJzIiwiQm9vbGVhbiIsInB1c2giLCJzZXRXaWZpU3RhdGUiLCJpc0VtdWxhdG9yIiwic2V0RGF0YVN0YXRlIiwic2V0QWlycGxhbmVNb2RlIiwiZ2V0QXBpTGV2ZWwiLCJicm9hZGNhc3RBaXJwbGFuZU1vZGUiLCJpc0VtcHR5IiwiQiIsImFsbCIsImlzQXJyYXkiLCJ1bnN1cHBvcnRlZFNlcnZpY2VzIiwiZGlmZmVyZW5jZSIsInV0aWwiLCJwbHVyYWxpemUiLCJsZW5ndGgiLCJzdGF0ZVByb21pc2VzIiwicmVzb2x2ZSIsImluY2x1ZGVzIiwidW5kZWZpbmVkIiwidmFsdWVzIiwiZnJvbVBhaXJzIiwibWFwIiwiayIsInZhbHVlIiwic2V0TmV0d29ya0Nvbm5lY3Rpb24iLCJ0eXBlIiwic2hvdWxkRW5hYmxlQWlycGxhbmVNb2RlIiwic2hvdWxkRW5hYmxlV2lmaSIsInNob3VsZEVuYWJsZURhdGFDb25uZWN0aW9uIiwiaXNBaXJwbGFuZU1vZGVFbmFibGVkIiwiaXNXaUZpRW5hYmxlZCIsImlzRGF0YUVuYWJsZWQiLCJ3cmFwQm9vdHN0cmFwRGlzY29ubmVjdCIsInRvZ2dsZURhdGEiLCJzZXRXaWZpQW5kRGF0YSIsInRvZ2dsZVdpRmkiLCJ0b2dnbGVGbGlnaHRNb2RlIiwiZmxpZ2h0TW9kZSIsInNldEdlb0xvY2F0aW9uIiwibG9jYXRpb24iLCJnZXRHZW9Mb2NhdGlvbiIsImUiLCJ3YXJuIiwibWVzc2FnZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiYWx0aXR1ZGUiLCJtb2JpbGVSZWZyZXNoR3BzQ2FjaGUiLCJ0aW1lb3V0TXMiLCJyZWZyZXNoR2VvTG9jYXRpb25DYWNoZSIsInBhcnNlRmxvYXQiLCJpc0xvY2F0aW9uU2VydmljZXNFbmFibGVkIiwiaUxvY2F0aW9uU2VydmljZXNFbmFibGVkIiwiZ2V0TG9jYXRpb25Qcm92aWRlcnMiLCJ0b2dnbGVMb2NhdGlvblNlcnZpY2VzIiwiaXNHcHNFbmFibGVkIiwiZGVidWciLCJ0b2dnbGVHUFNMb2NhdGlvblByb3ZpZGVyIiwid3JhcHBlZCIsImJvb3RzdHJhcCIsImlnbm9yZVVuZXhwZWN0ZWRTaHV0ZG93biIsInJlc3RhcnQiLCJzdGFydCIsImFwcFBhY2thZ2UiLCJkaXNhYmxlQW5kcm9pZFdhdGNoZXJzIiwiYWNjZXB0U3NsQ2VydHMiLCJPYmplY3QiLCJhc3NpZ24iLCJfZGVmYXVsdCIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvY29tbWFuZHMvbmV0d29yay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgZXJyb3JzIH0gZnJvbSAnYXBwaXVtL2RyaXZlcic7XG5pbXBvcnQgeyB1dGlsIH0gZnJvbSAnYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG5sZXQgY29tbWFuZHMgPSB7fSwgaGVscGVycyA9IHt9LCBleHRlbnNpb25zID0ge307XG5cbmNvbnN0IEFJUlBMQU5FX01PREVfTUFTSyA9IDBiMDAxO1xuY29uc3QgV0lGSV9NQVNLID0gMGIwMTA7XG5jb25zdCBEQVRBX01BU0sgPSAwYjEwMDtcbi8vIFRoZSB2YWx1ZSBjbG9zZSB0byB6ZXJvLCBidXQgbm90IHplcm8sIGlzIG5lZWRlZFxuLy8gdG8gdHJpY2sgSlNPTiBnZW5lcmF0aW9uIGFuZCBzZW5kIGEgZmxvYXQgdmFsdWUgaW5zdGVhZCBvZiBhbiBpbnRlZ2VyLFxuLy8gVGhpcyBhbGxvd3Mgc3RyaWN0bHktdHlwZWQgY2xpZW50cywgbGlrZSBKYXZhLCB0byBwcm9wZXJseVxuLy8gcGFyc2UgaXQuIE90aGVyd2lzZSBmbG9hdCAwLjAgaXMgYWx3YXlzIHJlcHJlc2VudGVkIGFzIGludGVnZXIgMCBpbiBKUy5cbi8vIFRoZSB2YWx1ZSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gREJMX0VQU0lMT04gKGh0dHBzOi8vb3BlbnNvdXJjZS5hcHBsZS5jb20vc291cmNlL0xpYmMvTGliYy00OTgvaW5jbHVkZS9mbG9hdC5oKVxuY29uc3QgR0VPX0VQU0lMT04gPSBOdW1iZXIuTUlOX1ZBTFVFO1xuY29uc3QgV0lGSV9LRVlfTkFNRSA9ICd3aWZpJztcbmNvbnN0IERBVEFfS0VZX05BTUUgPSAnZGF0YSc7XG5jb25zdCBBSVJQTEFORV9NT0RFX0tFWV9OQU1FID0gJ2FpcnBsYW5lTW9kZSc7XG5jb25zdCBTVVBQT1JURURfU0VSVklDRV9OQU1FUyA9IFtXSUZJX0tFWV9OQU1FLCBEQVRBX0tFWV9OQU1FLCBBSVJQTEFORV9NT0RFX0tFWV9OQU1FXTtcblxuY29tbWFuZHMuZ2V0TmV0d29ya0Nvbm5lY3Rpb24gPSBhc3luYyBmdW5jdGlvbiBnZXROZXR3b3JrQ29ubmVjdGlvbiAoKSB7XG4gIHRoaXMubG9nLmluZm8oJ0dldHRpbmcgbmV0d29yayBjb25uZWN0aW9uJyk7XG4gIGxldCBhaXJwbGFuZU1vZGVPbiA9IGF3YWl0IHRoaXMuYWRiLmlzQWlycGxhbmVNb2RlT24oKTtcbiAgbGV0IGNvbm5lY3Rpb24gPSBhaXJwbGFuZU1vZGVPbiA/IEFJUlBMQU5FX01PREVfTUFTSyA6IDA7XG5cbiAgLy8gbm8gbmVlZCB0byBjaGVjayBhbnl0aGluZyBlbHNlIGlmIHdlIGFyZSBpbiBhaXJwbGFuZSBtb2RlXG4gIGlmICghYWlycGxhbmVNb2RlT24pIHtcbiAgICBsZXQgd2lmaU9uID0gYXdhaXQgdGhpcy5pc1dpZmlPbigpO1xuICAgIGNvbm5lY3Rpb24gfD0gKHdpZmlPbiA/IFdJRklfTUFTSyA6IDApO1xuICAgIGxldCBkYXRhT24gPSBhd2FpdCB0aGlzLmFkYi5pc0RhdGFPbigpO1xuICAgIGNvbm5lY3Rpb24gfD0gKGRhdGFPbiA/IERBVEFfTUFTSyA6IDApO1xuICB9XG5cbiAgcmV0dXJuIGNvbm5lY3Rpb247XG59O1xuXG4vKipcbiAqIGRlY291cGxpbmcgdG8gb3ZlcnJpZGUgdGhlIGJlaGF2aW91ciBpbiBvdGhlciBkcml2ZXJzIGxpa2UgVWlBdXRvbWF0b3IyLlxuICovXG5jb21tYW5kcy5pc1dpZmlPbiA9IGFzeW5jIGZ1bmN0aW9uIGlzV2lmaU9uICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuYWRiLmlzV2lmaU9uKCk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNldENvbm5lY3Rpdml0eU9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbj99IHdpZmkgRWl0aGVyIHRvIGVuYWJsZSBvciBkaXNhYmxlIFdpLUZpLlxuICogQW4gdW5zZXQgdmFsdWUgbWVhbnMgdG8gbm90IGNoYW5nZSB0aGUgc3RhdGUgZm9yIHRoZSBnaXZlbiBzZXJ2aWNlLlxuICogQHByb3BlcnR5IHtib29sZWFuP30gZGF0YSBFaXRoZXIgdG8gZW5hYmxlIG9yIGRpc2FibGUgbW9iaWxlIGRhdGEgY29ubmVjdGlvbi5cbiAqIEFuIHVuc2V0IHZhbHVlIG1lYW5zIHRvIG5vdCBjaGFuZ2UgdGhlIHN0YXRlIGZvciB0aGUgZ2l2ZW4gc2VydmljZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbj99IGFpcnBsYW5lTW9kZSBFaXRoZXIgdG8gZW5hYmxlIHRvIGRpc2FibGUgdGhlIEFpcnBsYW5lIE1vZGVcbiAqIEFuIHVuc2V0IHZhbHVlIG1lYW5zIHRvIG5vdCBjaGFuZ2UgdGhlIHN0YXRlIGZvciB0aGUgZ2l2ZW4gc2VydmljZS5cbiAqL1xuXG4vKipcbiAqIFNldCB0aGUgY29ubmVjdGl2aXR5IHN0YXRlIGZvciBkaWZmZXJlbnQgc2VydmljZXNcbiAqXG4gKiBAcGFyYW0ge1NldENvbm5lY3Rpdml0eU9wdGlvbnN9IG9wdHNcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBub25lIG9mIGtub3duIHByb3BlcnRpZXMgd2VyZSBwcm92aWRlZCBvciB0aGVyZSB3YXMgYW4gZXJyb3JcbiAqIHdoaWxlIGNoYW5naW5nIGNvbm5lY3Rpdml0eSBzdGF0ZXNcbiAqL1xuY29tbWFuZHMubW9iaWxlU2V0Q29ubmVjdGl2aXR5ID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlU2V0Q29ubmVjdGl2aXR5IChvcHRzID0ge30pIHtcbiAgY29uc3Qge1xuICAgIHdpZmksXG4gICAgZGF0YSxcbiAgICBhaXJwbGFuZU1vZGUsXG4gIH0gPSBvcHRzO1xuXG4gIGlmIChfLmV2ZXJ5KFt3aWZpLCBkYXRhLCBhaXJwbGFuZU1vZGVdLCBfLmlzVW5kZWZpbmVkKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICBgRWl0aGVyIG9uZSBvZiAke0pTT04uc3RyaW5naWZ5KFNVUFBPUlRFRF9TRVJWSUNFX05BTUVTKX0gb3B0aW9ucyBtdXN0IGJlIHByb3ZpZGVkYFxuICAgICk7XG4gIH1cblxuICBjb25zdCBjdXJyZW50U3RhdGUgPSBhd2FpdCB0aGlzLm1vYmlsZUdldENvbm5lY3Rpdml0eSh7XG4gICAgc2VydmljZXM6IFtcbiAgICAgIC4uLihfLmlzVW5kZWZpbmVkKHdpZmkpID8gW10gOiBbV0lGSV9LRVlfTkFNRV0pLFxuICAgICAgLi4uKF8uaXNVbmRlZmluZWQoZGF0YSkgPyBbXSA6IFtEQVRBX0tFWV9OQU1FXSksXG4gICAgICAuLi4oXy5pc1VuZGVmaW5lZChhaXJwbGFuZU1vZGUpID8gW10gOiBbQUlSUExBTkVfTU9ERV9LRVlfTkFNRV0pLFxuICAgIF1cbiAgfSk7XG4gIGNvbnN0IHNldHRlcnMgPSBbXTtcbiAgaWYgKCFfLmlzVW5kZWZpbmVkKHdpZmkpICYmIGN1cnJlbnRTdGF0ZS53aWZpICE9PSBCb29sZWFuKHdpZmkpKSB7XG4gICAgc2V0dGVycy5wdXNoKHRoaXMuYWRiLnNldFdpZmlTdGF0ZSh3aWZpLCB0aGlzLmlzRW11bGF0b3IoKSkpO1xuICB9XG4gIGlmICghXy5pc1VuZGVmaW5lZChkYXRhKSAmJiBjdXJyZW50U3RhdGUuZGF0YSAhPT0gQm9vbGVhbihkYXRhKSkge1xuICAgIHNldHRlcnMucHVzaCh0aGlzLmFkYi5zZXREYXRhU3RhdGUoZGF0YSwgdGhpcy5pc0VtdWxhdG9yKCkpKTtcbiAgfVxuICBpZiAoIV8uaXNVbmRlZmluZWQoYWlycGxhbmVNb2RlKSAmJiBjdXJyZW50U3RhdGUuYWlycGxhbmVNb2RlICE9PSBCb29sZWFuKGFpcnBsYW5lTW9kZSkpIHtcbiAgICBzZXR0ZXJzLnB1c2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5hZGIuc2V0QWlycGxhbmVNb2RlKGFpcnBsYW5lTW9kZSk7XG4gICAgICBpZiAodGhpcy5hZGIuZ2V0QXBpTGV2ZWwoKSA8IDMwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRiLmJyb2FkY2FzdEFpcnBsYW5lTW9kZShhaXJwbGFuZU1vZGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGlmICghXy5pc0VtcHR5KHNldHRlcnMpKSB7XG4gICAgYXdhaXQgQi5hbGwoc2V0dGVycyk7XG4gIH1cbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gR2V0Q29ubmVjdGl2aXR5UmVzdWx0XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHdpZmkgVHJ1ZSBpZiB3aWZpIGlzIGVuYWJsZWRcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZGF0YSBUcnVlIGlmIG1vYmlsZSBkYXRhIGNvbm5lY3Rpb24gaXMgZW5hYmxlZFxuICogQHByb3BlcnR5IHtib29sZWFufSBhaXJwbGFuZU1vZGUgVHJ1ZSBpZiBBaXJwbGFuZSBNb2RlIGlzIGVuYWJsZWRcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEdldENvbm5lY3Rpdml0eU9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW118c3RyaW5nP30gc2VydmljZXMgb25lIG9yIG1vcmUgc2VydmljZXMgdG8gZ2V0IHRoZSBjb25uZWN0aXZpdHkgZm9yLlxuICogU3VwcG9ydGVkIHNlcnZpY2UgbmFtZXMgYXJlOiB3aWZpLCBkYXRhLCBhaXJwbGFuZU1vZGUuXG4gKi9cblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGNvbm5lY3Rpdml0eSBwcm9wZXJ0aWVzIGZyb20gdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKlxuICogQHBhcmFtIHtHZXRDb25uZWN0aXZpdHlPcHRpb25zP30gb3B0cyBJZiBubyBzZXJ2aWNlIG5hbWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZVxuICogY29ubmVjdGl2aXR5IHN0YXRlIGlzIHJldHVybmVkIGZvciBhbGwgb2YgdGhlbS5cbiAqIEByZXR1cm5zIHtHZXRDb25uZWN0aXZpdHlSZXN1bHR9XG4gKi9cbmNvbW1hbmRzLm1vYmlsZUdldENvbm5lY3Rpdml0eSA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZUdldENvbm5lY3Rpdml0eSAob3B0cyA9IHt9KSB7XG4gIGxldCB7XG4gICAgc2VydmljZXMgPSBTVVBQT1JURURfU0VSVklDRV9OQU1FUyxcbiAgfSA9IG9wdHM7XG4gIGlmICghXy5pc0FycmF5KHNlcnZpY2VzKSkge1xuICAgIHNlcnZpY2VzID0gW3NlcnZpY2VzXTtcbiAgfVxuICBjb25zdCB1bnN1cHBvcnRlZFNlcnZpY2VzID0gXy5kaWZmZXJlbmNlKHNlcnZpY2VzLCBTVVBQT1JURURfU0VSVklDRV9OQU1FUyk7XG4gIGlmICghXy5pc0VtcHR5KHVuc3VwcG9ydGVkU2VydmljZXMpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgIGAke3V0aWwucGx1cmFsaXplKCdTZXJ2aWNlIG5hbWUnLCB1bnN1cHBvcnRlZFNlcnZpY2VzLmxlbmd0aCwgZmFsc2UpfSAke3Vuc3VwcG9ydGVkU2VydmljZXN9IGAgK1xuICAgICAgYCR7dW5zdXBwb3J0ZWRTZXJ2aWNlcy5sZW5ndGggPT09IDEgPyAnaXMnIDogJ2FyZSd9IG5vdCBrbm93bi4gT25seSB0aGUgZm9sbG93aW5nIHNlcnZpY2VzIGFyZSBgICtcbiAgICAgIGBzdXBvcnRlZDogJHtTVVBQT1JURURfU0VSVklDRV9OQU1FU31gXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHN0YXRlUHJvbWlzZXMgPSB7XG4gICAgd2lmaTogQi5yZXNvbHZlKHNlcnZpY2VzLmluY2x1ZGVzKFdJRklfS0VZX05BTUUpID8gdGhpcy5hZGIuaXNXaWZpT24oKSA6IHVuZGVmaW5lZCksXG4gICAgZGF0YTogQi5yZXNvbHZlKHNlcnZpY2VzLmluY2x1ZGVzKERBVEFfS0VZX05BTUUpID8gdGhpcy5hZGIuaXNEYXRhT24oKSA6IHVuZGVmaW5lZCksXG4gICAgYWlycGxhbmVNb2RlOiBCLnJlc29sdmUoXG4gICAgICBzZXJ2aWNlcy5pbmNsdWRlcyhBSVJQTEFORV9NT0RFX0tFWV9OQU1FKSA/IHRoaXMuYWRiLmlzQWlycGxhbmVNb2RlT24oKSA6IHVuZGVmaW5lZFxuICAgICksXG4gIH07XG4gIGF3YWl0IEIuYWxsKF8udmFsdWVzKHN0YXRlUHJvbWlzZXMpKTtcbiAgcmV0dXJuIF8uZnJvbVBhaXJzKHNlcnZpY2VzLm1hcCgoaykgPT4gW2ssIHN0YXRlUHJvbWlzZXNba10udmFsdWUoKV0pKTtcbn07XG5cbmNvbW1hbmRzLnNldE5ldHdvcmtDb25uZWN0aW9uID0gYXN5bmMgZnVuY3Rpb24gc2V0TmV0d29ya0Nvbm5lY3Rpb24gKHR5cGUpIHtcbiAgdGhpcy5sb2cuaW5mbygnU2V0dGluZyBuZXR3b3JrIGNvbm5lY3Rpb24nKTtcbiAgLy8gZGVjb2RlIHRoZSBpbnB1dFxuICBjb25zdCBzaG91bGRFbmFibGVBaXJwbGFuZU1vZGUgPSAodHlwZSAmIEFJUlBMQU5FX01PREVfTUFTSykgIT09IDA7XG4gIGNvbnN0IHNob3VsZEVuYWJsZVdpZmkgPSAodHlwZSAmIFdJRklfTUFTSykgIT09IDA7XG4gIGNvbnN0IHNob3VsZEVuYWJsZURhdGFDb25uZWN0aW9uID0gKHR5cGUgJiBEQVRBX01BU0spICE9PSAwO1xuXG4gIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IGF3YWl0IHRoaXMuZ2V0TmV0d29ya0Nvbm5lY3Rpb24oKTtcbiAgY29uc3QgaXNBaXJwbGFuZU1vZGVFbmFibGVkID0gKGN1cnJlbnRTdGF0ZSAmIEFJUlBMQU5FX01PREVfTUFTSykgIT09IDA7XG4gIGNvbnN0IGlzV2lGaUVuYWJsZWQgPSAoY3VycmVudFN0YXRlICYgV0lGSV9NQVNLKSAhPT0gMDtcbiAgY29uc3QgaXNEYXRhRW5hYmxlZCA9IChjdXJyZW50U3RhdGUgJiBEQVRBX01BU0spICE9PSAwO1xuXG4gIGlmIChzaG91bGRFbmFibGVBaXJwbGFuZU1vZGUgIT09IGlzQWlycGxhbmVNb2RlRW5hYmxlZCkge1xuICAgIGF3YWl0IHRoaXMud3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5hZGIuc2V0QWlycGxhbmVNb2RlKHNob3VsZEVuYWJsZUFpcnBsYW5lTW9kZSk7XG4gICAgfSk7XG4gICAgYXdhaXQgdGhpcy53cmFwQm9vdHN0cmFwRGlzY29ubmVjdChhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hZGIuZ2V0QXBpTGV2ZWwoKSA8IDMwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRiLmJyb2FkY2FzdEFpcnBsYW5lTW9kZShzaG91bGRFbmFibGVBaXJwbGFuZU1vZGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubG9nLmluZm8oXG4gICAgICBgTm90IGNoYW5naW5nIGFpcnBsYW5lIG1vZGUsIHNpbmNlIGl0IGlzIGFscmVhZHkgJHtzaG91bGRFbmFibGVBaXJwbGFuZU1vZGUgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfWBcbiAgICApO1xuICB9XG5cbiAgaWYgKHNob3VsZEVuYWJsZVdpZmkgPT09IGlzV2lGaUVuYWJsZWQgJiYgc2hvdWxkRW5hYmxlRGF0YUNvbm5lY3Rpb24gPT09IGlzRGF0YUVuYWJsZWQpIHtcbiAgICB0aGlzLmxvZy5pbmZvKCdOb3QgY2hhbmdpbmcgZGF0YSBjb25uZWN0aW9uL1dpLUZpIHN0YXRlcywgc2luY2UgdGhleSBhcmUgYWxyZWFkeSBzZXQgdG8gZXhwZWN0ZWQgdmFsdWVzJyk7XG4gICAgaWYgKGF3YWl0IHRoaXMuYWRiLmlzQWlycGxhbmVNb2RlT24oKSkge1xuICAgICAgcmV0dXJuIEFJUlBMQU5FX01PREVfTUFTSyB8IGN1cnJlbnRTdGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIH5BSVJQTEFORV9NT0RFX01BU0sgJiBjdXJyZW50U3RhdGU7XG4gIH1cblxuICBhd2FpdCB0aGlzLndyYXBCb290c3RyYXBEaXNjb25uZWN0KGFzeW5jICgpID0+IHtcbiAgICBpZiAoc2hvdWxkRW5hYmxlV2lmaSAhPT0gaXNXaUZpRW5hYmxlZCkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRXaWZpU3RhdGUoc2hvdWxkRW5hYmxlV2lmaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubG9nLmluZm8oYE5vdCBjaGFuZ2luZyBXaS1GaSBzdGF0ZSwgc2luY2UgaXQgaXMgYWxyZWFkeSBgICtcbiAgICAgICAgYCR7c2hvdWxkRW5hYmxlV2lmaSA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YCk7XG4gICAgfVxuXG4gICAgaWYgKHNob3VsZEVuYWJsZUFpcnBsYW5lTW9kZSkge1xuICAgICAgdGhpcy5sb2cuaW5mbygnTm90IGNoYW5naW5nIGRhdGEgY29ubmVjdGlvbiBzdGF0ZSwgYmVjYXVzZSBhaXJwbGFuZSBtb2RlIGlzIGVuYWJsZWQnKTtcbiAgICB9IGVsc2UgaWYgKHNob3VsZEVuYWJsZURhdGFDb25uZWN0aW9uID09PSBpc0RhdGFFbmFibGVkKSB7XG4gICAgICB0aGlzLmxvZy5pbmZvKGBOb3QgY2hhbmdpbmcgZGF0YSBjb25uZWN0aW9uIHN0YXRlLCBzaW5jZSBpdCBpcyBhbHJlYWR5IGAgK1xuICAgICAgICBgJHtzaG91bGRFbmFibGVEYXRhQ29ubmVjdGlvbiA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuYWRiLnNldERhdGFTdGF0ZShzaG91bGRFbmFibGVEYXRhQ29ubmVjdGlvbiwgdGhpcy5pc0VtdWxhdG9yKCkpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TmV0d29ya0Nvbm5lY3Rpb24oKTtcbn07XG5cbi8qKlxuICogZGVjb3VwbGluZyB0byBvdmVycmlkZSBiZWhhdmlvdXIgaW4gb3RoZXIgZHJpdmVycyBsaWtlIFVpQXV0b21hdG9yMi5cbiAqL1xuY29tbWFuZHMuc2V0V2lmaVN0YXRlID0gYXN5bmMgZnVuY3Rpb24gc2V0V2lmaVN0YXRlICh3aWZpKSB7XG4gIGF3YWl0IHRoaXMuYWRiLnNldFdpZmlTdGF0ZSh3aWZpLCB0aGlzLmlzRW11bGF0b3IoKSk7XG59O1xuXG5jb21tYW5kcy50b2dnbGVEYXRhID0gYXN5bmMgZnVuY3Rpb24gdG9nZ2xlRGF0YSAoKSB7XG4gIGxldCBkYXRhID0gIShhd2FpdCB0aGlzLmFkYi5pc0RhdGFPbigpKTtcbiAgdGhpcy5sb2cuaW5mbyhgVHVybmluZyBuZXR3b3JrIGRhdGEgJHtkYXRhID8gJ29uJyA6ICdvZmYnfWApO1xuICBhd2FpdCB0aGlzLndyYXBCb290c3RyYXBEaXNjb25uZWN0KGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCB0aGlzLmFkYi5zZXRXaWZpQW5kRGF0YSh7ZGF0YX0sIHRoaXMuaXNFbXVsYXRvcigpKTtcbiAgfSk7XG59O1xuXG5jb21tYW5kcy50b2dnbGVXaUZpID0gYXN5bmMgZnVuY3Rpb24gdG9nZ2xlV2lGaSAoKSB7XG4gIGxldCB3aWZpID0gIShhd2FpdCB0aGlzLmFkYi5pc1dpZmlPbigpKTtcbiAgdGhpcy5sb2cuaW5mbyhgVHVybmluZyBXaUZpICR7d2lmaSA/ICdvbicgOiAnb2ZmJ31gKTtcbiAgYXdhaXQgdGhpcy53cmFwQm9vdHN0cmFwRGlzY29ubmVjdChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdGhpcy5hZGIuc2V0V2lmaUFuZERhdGEoe3dpZml9LCB0aGlzLmlzRW11bGF0b3IoKSk7XG4gIH0pO1xufTtcblxuY29tbWFuZHMudG9nZ2xlRmxpZ2h0TW9kZSA9IGFzeW5jIGZ1bmN0aW9uIHRvZ2dsZUZsaWdodE1vZGUgKCkge1xuICAvKlxuICAgKiBUT0RPOiBJbXBsZW1lbnQgaXNSZWFsRGV2aWNlKCkuIFRoaXMgbWV0aG9kIGZhaWxzIG9uXG4gICAqIHJlYWwgZGV2aWNlcywgaXQgc2hvdWxkIHRocm93IGEgTm90WWV0SW1wbGVtZW50ZWRFcnJvclxuICAgKi9cbiAgbGV0IGZsaWdodE1vZGUgPSAhKGF3YWl0IHRoaXMuYWRiLmlzQWlycGxhbmVNb2RlT24oKSk7XG4gIHRoaXMubG9nLmluZm8oYFR1cm5pbmcgZmxpZ2h0IG1vZGUgJHtmbGlnaHRNb2RlID8gJ29uJyA6ICdvZmYnfWApO1xuICBhd2FpdCB0aGlzLndyYXBCb290c3RyYXBEaXNjb25uZWN0KGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCB0aGlzLmFkYi5zZXRBaXJwbGFuZU1vZGUoZmxpZ2h0TW9kZSk7XG4gIH0pO1xuICBhd2FpdCB0aGlzLndyYXBCb290c3RyYXBEaXNjb25uZWN0KGFzeW5jICgpID0+IHtcbiAgICBpZiAoYXdhaXQgdGhpcy5hZGIuZ2V0QXBpTGV2ZWwoKSA8IDMwKSB7XG4gICAgICBhd2FpdCB0aGlzLmFkYi5icm9hZGNhc3RBaXJwbGFuZU1vZGUoZmxpZ2h0TW9kZSk7XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbW1hbmRzLnNldEdlb0xvY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gc2V0R2VvTG9jYXRpb24gKGxvY2F0aW9uKSB7XG4gIGF3YWl0IHRoaXMuYWRiLnNldEdlb0xvY2F0aW9uKGxvY2F0aW9uLCB0aGlzLmlzRW11bGF0b3IoKSk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0R2VvTG9jYXRpb24oKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRoaXMubG9nLndhcm4oYENvdWxkIG5vdCBnZXQgdGhlIGN1cnJlbnQgZ2VvbG9jYXRpb24gaW5mbzogJHtlLm1lc3NhZ2V9YCk7XG4gICAgdGhpcy5sb2cud2FybihgUmV0dXJuaW5nIHRoZSBkZWZhdWx0IHplcm8nZWQgdmFsdWVzYCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiBHRU9fRVBTSUxPTixcbiAgICAgIGxvbmdpdHVkZTogR0VPX0VQU0lMT04sXG4gICAgICBhbHRpdHVkZTogR0VPX0VQU0lMT04sXG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBHcHNDYWNoZVJlZnJlc2hPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gdGltZW91dE1zIFsyMDAwMF0gVGhlIG1heGltdW0gbnVtYmVyIG9mIG1pbGxpc2Vjb25kc1xuICogdG8gYmxvY2sgdW50aWwgR1BTIGNhY2hlIGlzIHJlZnJlc2hlZC4gUHJvdmlkaW5nIHplcm8gb3IgYSBuZWdhdGl2ZVxuICogdmFsdWUgdG8gaXQgc2tpcHMgd2FpdGluZyBjb21wbGV0ZWx5LlxuICovXG5cbi8qKlxuICogU2VuZHMgYW4gYXN5bmMgcmVxdWVzdCB0byByZWZyZXNoIHRoZSBHUFMgY2FjaGUuXG4gKiBUaGlzIGZlYXR1cmUgb25seSB3b3JrcyBpZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgaGFzXG4gKiBHb29nbGUgUGxheSBTZXJ2aWNlcyBpbnN0YWxsZWQuIEluIGNhc2UgdGhlIHZhbmlsbGFcbiAqIExvY2F0aW9uTWFuYWdlciBpcyB1c2VkIHRoZSBkZXZpY2UgQVBJIGxldmVsIG11c3QgYmUgYXRcbiAqIHZlcnNpb24gMzAgKEFuZHJvaWQgUikgb3IgaGlnaGVyLlxuICpcbiAqIEBwYXJhbSB7R3BzQ2FjaGVSZWZyZXNoT3B0aW9uc30gb3B0c1xuICovXG5jb21tYW5kcy5tb2JpbGVSZWZyZXNoR3BzQ2FjaGUgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVSZWZyZXNoR3BzQ2FjaGUgKG9wdHMgPSB7fSkge1xuICBjb25zdCB7IHRpbWVvdXRNcyB9ID0gb3B0cztcbiAgYXdhaXQgdGhpcy5hZGIucmVmcmVzaEdlb0xvY2F0aW9uQ2FjaGUodGltZW91dE1zKTtcbn07XG5cbmNvbW1hbmRzLmdldEdlb0xvY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gZ2V0R2VvTG9jYXRpb24gKCkge1xuICBjb25zdCB7bGF0aXR1ZGUsIGxvbmdpdHVkZSwgYWx0aXR1ZGV9ID0gYXdhaXQgdGhpcy5hZGIuZ2V0R2VvTG9jYXRpb24oKTtcbiAgcmV0dXJuIHtcbiAgICBsYXRpdHVkZTogcGFyc2VGbG9hdChsYXRpdHVkZSkgfHwgR0VPX0VQU0lMT04sXG4gICAgbG9uZ2l0dWRlOiBwYXJzZUZsb2F0KGxvbmdpdHVkZSkgfHwgR0VPX0VQU0lMT04sXG4gICAgYWx0aXR1ZGU6IHBhcnNlRmxvYXQoYWx0aXR1ZGUpIHx8IEdFT19FUFNJTE9OLFxuICB9O1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgR1BTIGlzIGVuYWJsZWRcbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxCb29sZWFuPn0gVHJ1ZSBpZiB5ZXNcbiAqL1xuY29tbWFuZHMuaXNMb2NhdGlvblNlcnZpY2VzRW5hYmxlZCA9IGFzeW5jIGZ1bmN0aW9uIGlMb2NhdGlvblNlcnZpY2VzRW5hYmxlZCAoKSB7XG4gIHJldHVybiAoYXdhaXQgdGhpcy5hZGIuZ2V0TG9jYXRpb25Qcm92aWRlcnMoKSkuaW5jbHVkZXMoJ2dwcycpO1xufTtcblxuLyoqXG4gKiBUb2dnbGVzIEdQUyBzdGF0ZVxuICovXG5jb21tYW5kcy50b2dnbGVMb2NhdGlvblNlcnZpY2VzID0gYXN5bmMgZnVuY3Rpb24gdG9nZ2xlTG9jYXRpb25TZXJ2aWNlcyAoKSB7XG4gIHRoaXMubG9nLmluZm8oJ1RvZ2dsaW5nIGxvY2F0aW9uIHNlcnZpY2VzJyk7XG4gIGNvbnN0IGlzR3BzRW5hYmxlZCA9IGF3YWl0IHRoaXMuaXNMb2NhdGlvblNlcnZpY2VzRW5hYmxlZCgpO1xuICB0aGlzLmxvZy5kZWJ1ZyhcbiAgICBgQ3VycmVudCBHUFMgc3RhdGU6ICR7aXNHcHNFbmFibGVkfS4gYCArXG4gICAgYFRoZSBzZXJ2aWNlIGlzIGdvaW5nIHRvIGJlICR7aXNHcHNFbmFibGVkID8gJ2Rpc2FibGVkJyA6ICdlbmFibGVkJ31gXG4gICk7XG4gIGF3YWl0IHRoaXMuYWRiLnRvZ2dsZUdQU0xvY2F0aW9uUHJvdmlkZXIoIWlzR3BzRW5hYmxlZCk7XG59O1xuXG5oZWxwZXJzLndyYXBCb290c3RyYXBEaXNjb25uZWN0ID0gYXN5bmMgZnVuY3Rpb24gd3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QgKHdyYXBwZWQpIHtcbiAgaWYgKCF0aGlzLmJvb3RzdHJhcCkge1xuICAgIHJldHVybiBhd2FpdCB3cmFwcGVkKCk7XG4gIH1cblxuICB0aGlzLmJvb3RzdHJhcC5pZ25vcmVVbmV4cGVjdGVkU2h1dGRvd24gPSB0cnVlO1xuICB0cnkge1xuICAgIGF3YWl0IHdyYXBwZWQoKTtcbiAgICBhd2FpdCB0aGlzLmFkYi5yZXN0YXJ0KCk7XG4gICAgYXdhaXQgdGhpcy5ib290c3RyYXAuc3RhcnQodGhpcy5vcHRzLmFwcFBhY2thZ2UsIHRoaXMub3B0cy5kaXNhYmxlQW5kcm9pZFdhdGNoZXJzLCB0aGlzLm9wdHMuYWNjZXB0U3NsQ2VydHMpO1xuICB9IGZpbmFsbHkge1xuICAgIHRoaXMuYm9vdHN0cmFwLmlnbm9yZVVuZXhwZWN0ZWRTaHV0ZG93biA9IGZhbHNlO1xuICB9XG59O1xuXG5PYmplY3QuYXNzaWduKGV4dGVuc2lvbnMsIGNvbW1hbmRzLCBoZWxwZXJzKTtcbmV4cG9ydCB7IGNvbW1hbmRzLCBoZWxwZXJzIH07XG5leHBvcnQgZGVmYXVsdCBleHRlbnNpb25zO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUlJLFFBQVEsR0FBRyxDQUFDLENBQUM7RUFBRUMsT0FBTyxHQUFHLENBQUMsQ0FBQztFQUFFQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBQUNDLE9BQUEsQ0FBQUYsT0FBQSxHQUFBQSxPQUFBO0FBQUFFLE9BQUEsQ0FBQUgsUUFBQSxHQUFBQSxRQUFBO0FBRWpELE1BQU1JLGtCQUFrQixHQUFHLEtBQUs7QUFDaEMsTUFBTUMsU0FBUyxHQUFHLEtBQUs7QUFDdkIsTUFBTUMsU0FBUyxHQUFHLEtBQUs7QUFNdkIsTUFBTUMsV0FBVyxHQUFHQyxNQUFNLENBQUNDLFNBQVM7QUFDcEMsTUFBTUMsYUFBYSxHQUFHLE1BQU07QUFDNUIsTUFBTUMsYUFBYSxHQUFHLE1BQU07QUFDNUIsTUFBTUMsc0JBQXNCLEdBQUcsY0FBYztBQUM3QyxNQUFNQyx1QkFBdUIsR0FBRyxDQUFDSCxhQUFhLEVBQUVDLGFBQWEsRUFBRUMsc0JBQXNCLENBQUM7QUFFdEZaLFFBQVEsQ0FBQ2Msb0JBQW9CLEdBQUcsZUFBZUEsb0JBQW9CQSxDQUFBLEVBQUk7RUFDckUsSUFBSSxDQUFDQyxHQUFHLENBQUNDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQztF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